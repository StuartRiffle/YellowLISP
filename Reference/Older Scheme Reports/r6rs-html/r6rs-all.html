<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_Temp_1"></a>
<h1 class=chapter>
<div class=chapterheading>&nbsp;</div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_Temp_1">Summary</a></h1>
<p></p>
<div class=medskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p>
The report gives a defining description of the programming language
Scheme.  Scheme is a statically scoped and properly tail-recursive
dialect of the Lisp programming language invented by Guy Lewis
Steele&nbsp;Jr. and Gerald Jay&nbsp;Sussman.  It was designed to have an
exceptionally clear and simple semantics and few different ways to
form expressions.  A wide variety of programming paradigms, including
functional, imperative, and message passing styles, find convenient
expression in Scheme.</p>
<p>
This report is accompanied by a report describing standard
libraries&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_24">24</a>]; references to this document are
identified by designations such as &ldquo;library section&rdquo; or &ldquo;library
chapter&rdquo;.  It is also accompanied by a report containing
non-normative appendices&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_22">22</a>].  A fourth report gives
some historical background and rationales for many aspects of the
language and its libraries&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_23">23</a>].</p>
<p>
</p>
<div class=medskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p>
The individuals listed above are not the sole authors of the text of
the report.  Over the years, the following individuals were involved
in discussions contributing to the design of the Scheme language, and
were listed as authors of prior reports:</p>
<p>
Hal Abelson, Norman Adams, David Bartley, Gary Brooks, William
Clinger, R. Kent Dybvig, Daniel Friedman, Robert Halstead, Chris
Hanson, Christopher Haynes, Eugene Kohlbecker, Don Oxley, Kent Pitman,
Jonathan Rees, Guillermo Rozas, Guy L. Steele Jr., Gerald Jay Sussman, and
Mitchell Wand.</p>
<p>
In order to highlight recent contributions, they are not listed as
authors of this version of the report.  However, their contribution
and service is gratefully acknowledged.</p>
<p>
</p>
<div class=medskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p>
We intend this report to belong to the entire Scheme community, and so
we grant permission to copy it in whole or in part without fee.  In
particular, we encourage implementors of Scheme to use this report as
a starting point for manuals and other documentation, modifying it as
necessary.
</p>
<p>
</p>
<div class=bigskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p>

</p>
<p>
</p>
<p>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_7"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_7">Chapter 7</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_7">Libraries</a></h1>
<p>
<a name="node_idx_264"></a>Libraries are parts of a program that can be distributed
independently.
The library system supports macro definitions within libraries,
macro exports, and distinguishes the phases in which definitions
and imports are needed.  This chapter defines the notation for
libraries and a semantics for library expansion and execution.</p>
<p>
</p>
<a name="node_sec_7.1"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_7.1">7.1&nbsp;&nbsp;Library form</a></h2>
<p></p>
<p>
A library definition must have the following form:<a name="node_idx_266"></a><a name="node_idx_268"></a><a name="node_idx_270"></a></p>
<p>
</p>

<tt>(library&nbsp;&lt;library&nbsp;name&gt;
<p class=nopadding>&nbsp;&nbsp;(export&nbsp;&lt;export&nbsp;spec&gt;&nbsp;<tt>...</tt>)</p>

<p class=nopadding>&nbsp;&nbsp;(import&nbsp;&lt;import&nbsp;spec&gt;&nbsp;<tt>...</tt>)</p>

<p class=nopadding>&nbsp;&nbsp;&lt;library&nbsp;body&gt;)</p>
<p></tt></p>
<p>
A library declaration contains the following elements:</p>
<p>
</p>
<ul>
<li><p>The &lt;library&nbsp;name&gt; specifies the name of the library
(possibly with version).
</p>
<li><p>The <tt>export</tt> subform specifies a list of exports, which name
a subset of the bindings defined within or imported into the
library.
</p>
<li><p>The <tt>import</tt> subform specifies the imported bindings as a
list of import dependencies, where each dependency specifies:
</p>
<ul>
<li><p>the imported library's name, and, optionally, constraints on its
version,
</p>
<li><p>the relevant levels, e.g., expand or run time (see
section&nbsp;<a href="r6rs-Z-H-10.html#node_sec_7.2">7.2</a>, and
</p>
<li><p>the subset of the library's exports to make available within the
importing library, and the local names to use within the importing
library for each of the library's exports.
</p>
</ul><p>
</p>
<li><p>The &lt;library body&gt; is the library body, consisting of a
sequence of definitions followed by a sequence of expressions.  The
definitions may be both for local (unexported) and exported
bindings, and the expressions are initialization expressions to be evaluated
for their effects.
</p>
</ul><p></p>
<p>
An identifier can be imported with the same local name from two or
more libraries or for two levels from the same library only if the
binding exported by each library is the same (i.e., the binding is
defined in one library, and it arrives through the imports only by
exporting and re-exporting).  Otherwise, no identifier can be imported
multiple times, defined multiple times, or both defined and imported.
No identifiers are visible within a library except for those
explicitly imported into the library or defined within the library.</p>
<p>
A &lt;library name&gt; uniquely identifies a library within an
implementation, and is globally visible in the <tt>import</tt> clauses
(see below) of all other libraries within an implementation.
A &lt;library name&gt; has the following form:</p>
<p>
</p>

<tt>(&lt;identifier<sub>1</sub>&gt;&nbsp;&lt;identifier<sub>2</sub>&gt;&nbsp;<tt>...</tt>&nbsp;&lt;version&gt;)<p></tt></p>
<p>
where &lt;version&gt; is empty or has the following form:
</p>

<tt>(&lt;sub-version&gt;&nbsp;<tt>...</tt>)<p></tt></p>
<p>
Each &lt;sub-version&gt; must represent an exact nonnegative integer object.
An empty &lt;version&gt; is equivalent to <tt>()</tt>.</p>
<p>
An &lt;export&nbsp;spec&gt; names a set of imported and locally defined bindings to
be exported, possibly with different
external names.  An &lt;export&nbsp;spec&gt; must have one of the
following forms:</p>
<p>
</p>

<tt>&lt;identifier&gt;
<p class=nopadding>(rename&nbsp;(&lt;identifier<sub>1</sub>&gt;&nbsp;&lt;identifier<sub>2</sub>&gt;)&nbsp;<tt>...</tt>)</p>
<p></tt></p>
<p>
In an &lt;export&nbsp;spec&gt;, an &lt;identifier&gt; names a single binding defined
within or imported into the library, where the external name for the export is
the same as the name of the binding within the library. 
A <tt>rename</tt> spec exports the binding named by 
&lt;identifier<sub>1</sub>&gt; in each <tt>(&lt;identifier<sub>1</sub>&gt;
&lt;identifier<sub>2</sub>&gt;)</tt> pairing, using &lt;identifier<sub>2</sub>&gt; as the
external name.</p>
<p>
Each &lt;import&nbsp;spec&gt; specifies a set of bindings to be imported into
the library, the levels at which they are to be available, and the local
names by which they are to be known.  An &lt;import spec&gt; must
be one of the following:
</p>

<tt>&lt;import&nbsp;set&gt;
<p class=nopadding>(for&nbsp;&lt;import&nbsp;set&gt;&nbsp;&lt;import&nbsp;level&gt;&nbsp;<tt>...</tt>)</p>
<p></tt></p>
<p>
An &lt;import level&gt;  is one of the following:
</p>

<tt>run
<p class=nopadding>expand</p>

<p class=nopadding>(meta&nbsp;&lt;level&gt;)</p>
<p></tt></p>
<p>
where &lt;level&gt; represents an exact integer object.</p>
<p>
As an &lt;import level&gt;, <tt>run</tt> is an abbreviation for <tt>(meta 0)</tt>, and <tt>expand</tt> is an abbreviation for <tt>(meta 1)</tt>.
Levels and phases are discussed in section&nbsp;<a href="r6rs-Z-H-10.html#node_sec_7.2">7.2</a>.</p>
<p>
An &lt;import&nbsp;set&gt; names a set of bindings from another library and
possibly specifies local names for the imported bindings.  It must be
one of the following:</p>
<p>
</p>

<tt>&lt;library&nbsp;reference&gt;
<p class=nopadding>(library&nbsp;&lt;library&nbsp;reference&gt;)</p>

<p class=nopadding>(only&nbsp;&lt;import&nbsp;set&gt;&nbsp;&lt;identifier&gt;&nbsp;<tt>...</tt>)</p>

<p class=nopadding>(except&nbsp;&lt;import&nbsp;set&gt;&nbsp;&lt;identifier&gt;&nbsp;<tt>...</tt>)</p>

<p class=nopadding>(prefix&nbsp;&lt;import&nbsp;set&gt;&nbsp;&lt;identifier&gt;)</p>

<p class=nopadding>(rename&nbsp;&lt;import&nbsp;set&gt;&nbsp;(&lt;identifier<sub>1</sub>&gt;&nbsp;&lt;identifier<sub>2</sub>&gt;)&nbsp;<tt>...</tt>)</p>
<p></tt></p>
<p>
A &lt;library&nbsp;reference&gt; identifies a library by its 
name and optionally by its version.  It has one of the following forms:</p>
<p>
</p>

<tt>(&lt;identifier<sub>1</sub>&gt;&nbsp;&lt;identifier<sub>2</sub>&gt;&nbsp;<tt>...</tt>)
<p class=nopadding>(&lt;identifier<sub>1</sub>&gt;&nbsp;&lt;identifier<sub>2</sub>&gt;&nbsp;<tt>...</tt>&nbsp;&lt;version&nbsp;reference&gt;)</p>
<p></tt></p>
<p>
A &lt;library&nbsp;reference&gt; whose first &lt;identifier&gt; is
<tt>for</tt>, <tt>library</tt>, <tt>only</tt>, <tt>except</tt>, <tt>prefix</tt>, or <tt>rename</tt> is
permitted only within a <tt>library</tt> &lt;import&nbsp;set&gt;.
The &lt;import&nbsp;set&gt; <tt>(library &lt;library&nbsp;reference&gt;)</tt> is
otherwise equivalent to &lt;library&nbsp;reference&gt;.</p>
<p>
A &lt;library&nbsp;reference&gt; with no &lt;version&nbsp;reference&gt;
(first form above) is equivalent to a &lt;library&nbsp;reference&gt; with a
&lt;version&nbsp;reference&gt; of <tt>()</tt>.</p>
<p>
A &lt;version&nbsp;reference&gt; specifies a set of &lt;version&gt;s that
it matches.  The &lt;library&nbsp;reference&gt; identifies all libraries of
the same name and whose version is matched by the
&lt;version&nbsp;reference&gt;.  A &lt;version&nbsp;reference&gt; has
the following form:
</p>

<tt>(&lt;sub-version&nbsp;reference<sub>1</sub>&gt;&nbsp;<tt>...</tt>&nbsp;&lt;sub-version&nbsp;reference<sub><em>n</em></sub>&gt;)
<p class=nopadding>(and&nbsp;&lt;version&nbsp;reference&gt;&nbsp;<tt>...</tt>)</p>

<p class=nopadding>(or&nbsp;&lt;version&nbsp;reference&gt;&nbsp;<tt>...</tt>)</p>

<p class=nopadding>(not&nbsp;&lt;version&nbsp;reference&gt;)</p>
<p></tt>
A &lt;version reference&gt; of the first form matches a &lt;version&gt;
with at least <em>n</em> elements, whose &lt;sub-version reference&gt;s match
the corresponding &lt;sub-version&gt;s.  An <tt>and</tt> &lt;version
reference&gt; matches a version if all &lt;version references&gt;
following the <tt>and</tt> match it.  Correspondingly, an <tt>or</tt> &lt;version reference&gt; matches a version if one of
&lt;version references&gt; following the <tt>or</tt> matches it,
and a <tt>not</tt> &lt;version reference&gt; matches a version if the
&lt;version reference&gt; following it does not match it.</p>
<p>
A &lt;sub-version reference&gt; has one of the following forms:</p>
<p>
</p>

<tt>&lt;sub-version&gt;
<p class=nopadding>(&gt;=&nbsp;&lt;sub-version&gt;)</p>

<p class=nopadding>(&lt;=&nbsp;&lt;sub-version&gt;)</p>

<p class=nopadding>(and&nbsp;&lt;sub-version&nbsp;reference&gt;&nbsp;<tt>...</tt>)</p>

<p class=nopadding>(or&nbsp;&lt;sub-version&nbsp;reference&gt;&nbsp;<tt>...</tt>)</p>

<p class=nopadding>(not&nbsp;&lt;sub-version&nbsp;reference&gt;)</p>
<p></tt></p>
<p>
A &lt;sub-version reference&gt; of the first form matches a
&lt;sub-version&gt; if it is equal to it.  A <tt>&gt;=</tt>
&lt;sub-version reference&gt; of the first form matches a sub-version
if it is greater or equal to the &lt;sub-version&gt; following it;
analogously for <tt>&lt;=</tt>.  An <tt>and</tt> &lt;sub-version reference&gt;
matches a sub-version if all of the subsequent &lt;sub-version
reference&gt;s match it.  Correspondingly, an <tt>or</tt>
&lt;sub-version reference&gt; matches a sub-version if one of the
subsequent &lt;sub-version reference&gt;s matches it, and a <tt>not</tt>
&lt;sub-version reference&gt; matches a sub-version if the subsequent
&lt;sub-version reference&gt; does not match it.</p>
<p>
Examples:</p>
<p>
</p>
<div align=left><img src="r6rs-Z-G-1.gif" border="0" alt="[r6rs-Z-G-1.gif]"></div><p>
</p>
<p>
When more than one library is identified by a library reference, the
choice of libraries is determined in some implementation-dependent manner.</p>
<p>
To avoid problems such as incompatible types and replicated state,
implementations should prohibit the two libraries whose library names
consist of the same sequence of identifiers but whose versions do not
match to co-exist in the same program.</p>
<p>
By default, all of an imported library's exported bindings are made
visible within an importing library using the names given to the bindings
by the imported library.
The precise set of bindings to be imported and the names of those
bindings can be adjusted with the <tt>only</tt>, <tt>except</tt>,
<tt>prefix</tt>, and <tt>rename</tt> forms as described below.</p>
<p>
</p>
<ul>
<li><p>An <tt>only</tt> form produces a subset of the bindings from another
&lt;import&nbsp;set&gt;, including only the listed
&lt;identifier&gt;s.
The included &lt;identifier&gt;s must be in
the original &lt;import&nbsp;set&gt;.
</p>
<li><p>An <tt>except</tt> form produces a subset of the bindings from another
&lt;import&nbsp;set&gt;, including all but the listed
&lt;identifier&gt;s.
All of the excluded &lt;identifier&gt;s must be in
the original &lt;import&nbsp;set&gt;.
</p>
<li><p>A <tt>prefix</tt> form adds the &lt;identifier&gt; prefix to each
name from another &lt;import&nbsp;set&gt;.
</p>
<li><p>A <tt>rename</tt> form, <tt>(rename (&lt;identifier<sub>1</sub>&gt; &lt;identifier<sub>2</sub>&gt;) <tt>...</tt>)</tt>,
removes the bindings for <tt>&lt;identifier<sub>1</sub>&gt; <tt>...</tt></tt> to form an
intermediate &lt;import&nbsp;set&gt;, then adds the bindings back for the
corresponding <tt>&lt;identifier<sub>2</sub>&gt; <tt>...</tt></tt> to form the final
&lt;import&nbsp;set&gt;.
Each &lt;identifier<sub>1</sub>&gt; must be in the original &lt;import&nbsp;set&gt;,
each &lt;identifier<sub>2</sub>&gt; must not be in the intermediate &lt;import&nbsp;set&gt;,
and the &lt;identifier<sub>2</sub>&gt;s must be distinct.
</p>
</ul><p>
It is a syntax violation if a constraint given above is not met.</p>
<p>

The &lt;library&nbsp;body&gt; of a <tt>library</tt> form consists of forms
that are classified as 
<i>definitions</i><a name="node_idx_272"></a>or
<i>expressions</i><a name="node_idx_274"></a>.  Which forms belong to
which class depends on the imported libraries and the result of
expansion&mdash;see chapter&nbsp;<a href="r6rs-Z-H-13.html#node_chap_10">10</a>.  Generally, forms that
are not 
definitions (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.2">11.2</a> for definitions available
through the base library) are expressions.</p>
<p>
A &lt;library&nbsp;body&gt; is like a &lt;body&gt; (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>) except that
a &lt;library&nbsp;body&gt;s need not include any expressions.  It must
have the following form:</p>
<p>
</p>

<tt>&lt;definition&gt;&nbsp;<tt>...</tt>&nbsp;&lt;expression&gt;&nbsp;<tt>...</tt><p></tt></p>
<p>
When <tt>begin</tt>, <tt>let-syntax</tt>, or <tt>letrec-syntax</tt> forms
occur in a top-level body prior to the first
expression, they are spliced into the body; see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.7">11.4.7</a>.
Some or all of the body, including portions wrapped in <tt>begin</tt>,
<tt>let-syntax</tt>, or <tt>letrec-syntax</tt>
forms, may be specified by a syntactic abstraction
(see section&nbsp;<a href="r6rs-Z-H-12.html#node_sec_9.2">9.2</a>).</p>
<p>
The transformer expressions and bindings are evaluated and created
from left to right, as described in chapter&nbsp;<a href="r6rs-Z-H-13.html#node_chap_10">10</a>.
The expressions of variable definitions are evaluated
from left to right, as if in an implicit <tt>letrec*</tt>,
and the body expressions are also evaluated from left to right
after the expressions of the variable definitions.
A fresh location is created for each exported variable and initialized
to the value of its local counterpart.
The effect of returning twice to the continuation of the last body
expression is unspecified.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The names <tt>library</tt>, <tt>export</tt>, <tt>import</tt>,
<tt>for</tt>, <tt>run</tt>, <tt>expand</tt>, <tt>meta</tt>,
<tt>import</tt>, <tt>export</tt>, <tt>only</tt>, <tt>except</tt>, <tt>prefix</tt>, <tt>rename</tt>, <tt>and</tt>, <tt>or</tt>, <tt>not</tt>, <tt>&gt;=</tt>, and <tt>&lt;=</tt>
appearing in the library syntax are part of the
syntax and are not reserved, i.e., the same names can be used for other
purposes within the library or even exported from or imported 
into a library with different meanings, without affecting their
use in the <tt>library</tt> form.
</blockquote><p>
Bindings defined with a library are not visible in code
outside of the library, unless the bindings are explicitly exported from the
library. 
An exported macro may, however, <em>implicitly export</em> an otherwise
unexported identifier defined within or imported into the library.
That is, it may insert a reference to that identifier into the output code
it produces.</p>
<p>
 
All explicitly exported variables are immutable in both the
exporting and importing libraries. 
It is thus a syntax violation if an
explicitly exported variable appears on the left-hand side of a <tt>set!</tt>
expression, either in the exporting or importing libraries.</p>
<p>
All implicitly exported variables are also immutable in both the
exporting and importing libraries.
It is thus a syntax violation if a
variable appears on the left-hand side of a <tt>set!</tt>
expression in any code produced by an exported macro outside of the
library in which the variable is defined.
It is also a syntax violation if a
reference to an assigned variable appears in any code produced by
an exported macro outside of the library in which the variable is defined,
where an assigned variable is one that appears on the left-hand
side of a <tt>set!</tt> expression in the exporting library.</p>
<p>
All other variables defined within a library are mutable.</p>
<p>
</p>
<a name="node_sec_7.2"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_7.2">7.2&nbsp;&nbsp;Import and export levels</a></h2>
<p></p>
<p>
Expanding a library may require run-time information from another
library.  For example, if a macro transformer calls a
procedure from library <em>A</em>, then the library <em>A</em> must be
instantiated before expanding any use of the macro in library <em>B</em>.  Library <em>A</em> may
not be
needed when library <em>B</em> is eventually run as part of a program, or it
may be needed for run time of library <em>B</em>, too.  The library
mechanism distinguishes these times by phases, which are explained in
this section.</p>
<p>
Every library can be characterized by expand-time information (minimally,
its imported libraries, a list of the exported keywords, a list of the
exported variables, and code to evaluate the transformer expressions) and
run-time information (minimally, code to evaluate the variable definition
right-hand-side expressions, and code to evaluate the body expressions).
The expand-time information must be available to expand references to
any exported binding, and the run-time information must be available to
evaluate references to any exported variable binding.</p>
<p>
<a name="node_idx_276"></a>A <em>phase</em> is a time at which the expressions within a library are
evaluated.
Within a library body, top-level expressions and
the right-hand sides of <tt>define</tt> forms are evaluated at run time,
i.e., phase 0, and the right-hand
sides of <tt>define-syntax</tt> forms are evaluated at expand time, i.e.,
phase 1.
When <tt>define-syntax</tt>,
<tt>let-syntax</tt>, or <tt>letrec-syntax</tt>
forms appear within code evaluated at phase <em>n</em>, the right-hand sides
are evaluated at phase <em>n</em> + 1.</p>
<p>
These phases are relative to the phase in which the library itself is
used.
An <a name="node_idx_278"></a><em>instance</em> of a library corresponds to an evaluation of its
variable definitions and expressions in a particular phase relative to another
library&mdash;a process called <a name="node_idx_280"></a><em>instantiation</em>.
For example, if a top-level expression in a library <em>B</em> refers to
a variable export from another library <em>A</em>, then it refers to the export from an
instance of <em>A</em> at phase 0 (relative to the phase of <em>B</em>).
But if a phase 1 expression within <em>B</em> refers to the same binding from
<em>A</em>, then it refers to the export from an instance of <em>A</em> at phase 1
(relative to the phase of <em>B</em>).</p>
<p>
A <a name="node_idx_282"></a><em>visit</em> of a library corresponds to the evaluation of its syntax
definitions in a particular phase relative to another
library&mdash;a process called <a name="node_idx_284"></a><em>visiting</em>. 
For example, if a top-level expression in a library <em>B</em> refers to
a macro export from another library <em>A</em>, then it refers to the export from a
visit of <em>A</em> at phase 0 (relative to the phase of <em>B</em>), which corresponds
to the evaluation of the macro's transformer expression at phase 1.</p>
<p>
<a name="node_idx_286"></a><a name="node_idx_288"></a>A <em>level</em> is a lexical property of an identifier that determines
in which phases it can be referenced. The level for each identifier
bound by a definition within a library is 0; that is, the identifier
can be referenced only at phase 0 within the library.
The level for each imported binding is determined by the enclosing <tt>for</tt> form of the <tt>import</tt> in the importing library, in
addition to the levels of the identifier in the exporting
library. Import and export levels are combined by pairwise addition of
all level combinations.  For example, references to an imported
identifier exported for levels <em>p</em><sub><em>a</em></sub> and <em>p</em><sub><em>b</em></sub> and imported for levels
<em>q</em><sub><em>a</em></sub>, <em>q</em><sub><em>b</em></sub>, and <em>q</em><sub><em>c</em></sub> are valid at levels <em>p</em><sub><em>a</em></sub> + <em>q</em><sub><em>a</em></sub>, <em>p</em><sub><em>a</em></sub> + <em>q</em><sub><em>b</em></sub>,
<em>p</em><sub><em>a</em></sub> + <em>q</em><sub><em>c</em></sub>, <em>p</em><sub><em>b</em></sub> + <em>q</em><sub><em>a</em></sub>, <em>p</em><sub><em>b</em></sub> + <em>q</em><sub><em>b</em></sub>, and <em>p</em><sub><em>b</em></sub> + <em>q</em><sub><em>c</em></sub>. An &lt;import&nbsp;set&gt;
without an enclosing <tt>for</tt> is equivalent to <tt>(for
&lt;import&nbsp;set&gt; run)</tt>, which is the same as <tt>(for
&lt;import&nbsp;set&gt; (meta 0))</tt>.</p>
<p>
The export level of an exported binding is 0 for all bindings
that are defined within the exporting library. The export levels of a
reexported binding, i.e., an export imported from another library, are the
same as the effective import levels of that binding within the reexporting
library.</p>
<p>
For the libraries defined in the library report, the export level is
0 for nearly all bindings. The exceptions are <tt>syntax-rules</tt>,
<tt>identifier-syntax</tt>, <tt>...</tt>, and <tt>_</tt> from the
<tt>(rnrs base (6))</tt> library, which are exported with level 1, <tt>set!</tt> from the <tt>(rnrs base (6))</tt> library, which is exported with
levels 0 and 1, and all bindings from the composite
<tt>(rnrs (6))</tt> library (see library
chapter&nbsp;on &ldquo;Composite library&rdquo;), which are
exported with levels 0 and 1.</p>
<p>
Macro expansion within a library can introduce a reference to an
identifier that is not explicitly imported into the library. In that
case, the phase of the reference must match the identifier's level as
shifted by the difference between the phase of the source library
(i.e., the library that supplied the identifier's lexical context) and
the library that encloses the reference. For example, suppose that
expanding a library invokes a macro transformer, and the evaluation of
the macro transformer refers to an identifier that is exported from
another library (so the phase-1 instance of the library is used);
suppose further that the value of the binding is a syntax object
representing an identifier with only a level-<em>n</em> binding; then, the
identifier must be used only at phase <em>n</em> + 1 in the
library being expanded. This combination of levels and phases is why
negative levels on identifiers can be useful, even though libraries
exist only at non-negative phases.</p>
<p>
If any of a library's definitions are referenced at phase 0 in the
expanded form of a program, then an instance of the referenced library
is created for phase 0 before the program's definitions and
expressions are evaluated. This rule applies transitively: if the
expanded form of one library references at phase 0 an identifier
from another library, then before the referencing library is
instantiated at phase <em>n</em>, the referenced library must be instantiated
at phase <em>n</em>. When an identifier is referenced at any phase <em>n</em>
greater than 0, in contrast, then the defining library is
instantiated at phase <em>n</em> at some unspecified time before the
reference is evaluated. Similarly, when a macro keyword is referenced at
phase <em>n</em> during the expansion of a library, then the
defining library is visited at phase <em>n</em> at some unspecified time
before the reference is evaluated.</p>
<p>
An implementation may distinguish instances/visits of a library for
different phases or to use an instance/visit at any phase as an instance/visit at
any other phase. An implementation may further
expand each <tt>library</tt> form with distinct
visits of libraries in any phase and/or instances of
libraries in phases above 0. An implementation may
create instances/visits of more libraries at more phases than required to
satisfy references. When an identifier appears as an expression in a
phase that is inconsistent with the identifier's level, then an
implementation may raise an exception either at expand time or run
time, or it may allow the reference. Thus, a library whose meaning depends on whether the
instances of a library are distinguished or shared across phases or
<tt>library</tt> expansions may be unportable.</p>
<p>
</p>
<a name="node_sec_7.3"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_7.3">7.3&nbsp;&nbsp;Examples</a></h2>
<p>Examples for various &lt;import&nbsp;spec&gt;s and &lt;export&nbsp;spec&gt;s:</p>
<p>
</p>

<tt>(library&nbsp;(stack)
<p class=nopadding>&nbsp;&nbsp;(export&nbsp;make&nbsp;push!&nbsp;pop!&nbsp;empty!)</p>

<p class=nopadding>&nbsp;&nbsp;(import&nbsp;(rnrs))</p>

<p class=nopadding></p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(make)&nbsp;(list&nbsp;'()))</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(push!&nbsp;s&nbsp;v)&nbsp;(set-car!&nbsp;s&nbsp;(cons&nbsp;v&nbsp;(car&nbsp;s))))</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(pop!&nbsp;s)&nbsp;(let&nbsp;([v&nbsp;(caar&nbsp;s)])</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set-car!&nbsp;s&nbsp;(cdar&nbsp;s))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v))</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(empty!&nbsp;s)&nbsp;(set-car!&nbsp;s&nbsp;'())))</p>

<p class=nopadding></p>

<p class=nopadding>(library&nbsp;(balloons)</p>

<p class=nopadding>&nbsp;&nbsp;(export&nbsp;make&nbsp;push&nbsp;pop)</p>

<p class=nopadding>&nbsp;&nbsp;(import&nbsp;(rnrs))</p>

<p class=nopadding></p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(make&nbsp;w&nbsp;h)&nbsp;(cons&nbsp;w&nbsp;h))</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(push&nbsp;b&nbsp;amt)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;(-&nbsp;(car&nbsp;b)&nbsp;amt)&nbsp;(+&nbsp;(cdr&nbsp;b)&nbsp;amt)))</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(pop&nbsp;b)&nbsp;(display&nbsp;&quot;Boom!&nbsp;&quot;)&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(display&nbsp;(*&nbsp;(car&nbsp;b)&nbsp;(cdr&nbsp;b)))&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(newline)))</p>

<p class=nopadding></p>

<p class=nopadding>(library&nbsp;(party)</p>

<p class=nopadding>&nbsp;&nbsp;;;&nbsp;Total&nbsp;exports:</p>

<p class=nopadding>&nbsp;&nbsp;;;&nbsp;make,&nbsp;push,&nbsp;push!,&nbsp;make-party,&nbsp;pop!</p>

<p class=nopadding>&nbsp;&nbsp;(export&nbsp;(rename&nbsp;(balloon:make&nbsp;make)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(balloon:push&nbsp;push))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push!</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make-party</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rename&nbsp;(party-pop!&nbsp;pop!)))</p>

<p class=nopadding>&nbsp;&nbsp;(import&nbsp;(rnrs)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(only&nbsp;(stack)&nbsp;make&nbsp;push!&nbsp;pop!)&nbsp;;&nbsp;not&nbsp;empty!</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(prefix&nbsp;(balloons)&nbsp;balloon:))</p>

<p class=nopadding></p>

<p class=nopadding>&nbsp;&nbsp;;;&nbsp;Creates&nbsp;a&nbsp;party&nbsp;as&nbsp;a&nbsp;stack&nbsp;of&nbsp;balloons,</p>

<p class=nopadding>&nbsp;&nbsp;;;&nbsp;starting&nbsp;with&nbsp;two&nbsp;balloons</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(make-party)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;([s&nbsp;(make)])&nbsp;;&nbsp;from&nbsp;stack</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(push!&nbsp;s&nbsp;(balloon:make&nbsp;10&nbsp;10))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(push!&nbsp;s&nbsp;(balloon:make&nbsp;12&nbsp;9))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s))</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(party-pop!&nbsp;p)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(balloon:pop&nbsp;(pop!&nbsp;p))))</p>

<p class=nopadding></p>

<p class=nopadding></p>

<p class=nopadding>(library&nbsp;(main)</p>

<p class=nopadding>&nbsp;&nbsp;(export)</p>

<p class=nopadding>&nbsp;&nbsp;(import&nbsp;(rnrs)&nbsp;(party))</p>

<p class=nopadding></p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;p&nbsp;(make-party))</p>

<p class=nopadding>&nbsp;&nbsp;(pop!&nbsp;p)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;displays&nbsp;&quot;Boom!&nbsp;108&quot;</p>

<p class=nopadding>&nbsp;&nbsp;(push!&nbsp;p&nbsp;(push&nbsp;(make&nbsp;5&nbsp;5)&nbsp;1))</p>

<p class=nopadding>&nbsp;&nbsp;(pop!&nbsp;p))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;displays&nbsp;&quot;Boom!&nbsp;24&quot;</p>
<p></tt></p>
<p>
Examples for macros and phases:</p>
<p>
</p>

<tt>(library&nbsp;(my-helpers&nbsp;id-stuff)
<p class=nopadding>&nbsp;&nbsp;(export&nbsp;find-dup)</p>

<p class=nopadding>&nbsp;&nbsp;(import&nbsp;(rnrs))</p>

<p class=nopadding></p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(find-dup&nbsp;l)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(and&nbsp;(pair?&nbsp;l)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;loop&nbsp;((rest&nbsp;(cdr&nbsp;l)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(null?&nbsp;rest)&nbsp;(find-dup&nbsp;(cdr&nbsp;l))]</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(bound-identifier=?&nbsp;(car&nbsp;l)&nbsp;(car&nbsp;rest))&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(car&nbsp;rest)]</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[else&nbsp;(loop&nbsp;(cdr&nbsp;rest))])))))</p>

<p class=nopadding></p>

<p class=nopadding>(library&nbsp;(my-helpers&nbsp;values-stuff)</p>

<p class=nopadding>&nbsp;&nbsp;(export&nbsp;mvlet)</p>

<p class=nopadding>&nbsp;&nbsp;(import&nbsp;(rnrs)&nbsp;(for&nbsp;(my-helpers&nbsp;id-stuff)&nbsp;expand))</p>

<p class=nopadding></p>

<p class=nopadding>&nbsp;&nbsp;(define-syntax&nbsp;mvlet</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(stx)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(syntax-case&nbsp;stx&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(_&nbsp;[(id&nbsp;...)&nbsp;expr]&nbsp;body0&nbsp;body&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(not&nbsp;(find-dup&nbsp;(syntax&nbsp;(id&nbsp;...))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(syntax</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(call-with-values</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()&nbsp;expr)&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(id&nbsp;...)&nbsp;body0&nbsp;body&nbsp;...)))]))))</p>

<p class=nopadding></p>

<p class=nopadding>(library&nbsp;(let-div)</p>

<p class=nopadding>&nbsp;&nbsp;(export&nbsp;let-div)</p>

<p class=nopadding>&nbsp;&nbsp;(import&nbsp;(rnrs)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(my-helpers&nbsp;values-stuff)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rnrs&nbsp;r5rs))</p>

<p class=nopadding></p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(quotient+remainder&nbsp;n&nbsp;d)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;([q&nbsp;(quotient&nbsp;n&nbsp;d)])</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(values&nbsp;q&nbsp;(-&nbsp;n&nbsp;(*&nbsp;q&nbsp;d)))))</p>

<p class=nopadding>&nbsp;&nbsp;(define-syntax&nbsp;let-div</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(_&nbsp;n&nbsp;d&nbsp;(q&nbsp;r)&nbsp;body0&nbsp;body&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mvlet&nbsp;[(q&nbsp;r)&nbsp;(quotient+remainder&nbsp;n&nbsp;d)]</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body0&nbsp;body&nbsp;...)])))</p>
<p></tt></p>
<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">

</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_8"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_8">Chapter 8</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_8">Top-level programs</a></h1>
<p></p>
<p>
A <a name="node_idx_290"></a><em>top-level program</em> specifies an entry point for defining and running
a Scheme program.  A top-level program specifies a set of libraries to import and
code to run.  Through the imported libraries, whether directly or through the
transitive closure of importing, a top-level program defines a complete Scheme
program.</p>
<p>
</p>
<a name="node_sec_8.1"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_8.1">8.1&nbsp;&nbsp;Top-level program syntax</a></h2>
<p></p>
<p>
A top-level program is a delimited piece of text, typically a file, that 
has the following form:
</p>

<tt>&lt;import&nbsp;form&gt;&nbsp;&lt;top-level&nbsp;body&gt;<p></tt>
An &lt;import form&gt; has the following form:
</p>

<tt>(import&nbsp;&lt;import&nbsp;spec&gt;&nbsp;<tt>...</tt>)<p></tt>
A &lt;top-level body&gt; has the following form:
</p>

<tt>&lt;top-level&nbsp;body&nbsp;form&gt;&nbsp;<tt>...</tt><p></tt>
A &lt;top-level body form&gt; is either a &lt;definition&gt; or an
&lt;expression&gt;.</p>
<p>
The &lt;import form&gt; is identical to the import clause in
libraries (see section&nbsp;<a href="r6rs-Z-H-10.html#node_sec_7.1">7.1</a>), 
and specifies a set of libraries to import.  A &lt;top-level 
body&gt; is like a &lt;library body&gt; (see
section&nbsp;<a href="r6rs-Z-H-10.html#node_sec_7.1">7.1</a>), except that 
definitions and expressions may occur in any order.  Thus, the syntax
specified by &lt;top-level body form&gt; refers to the result of macro
expansion.</p>
<p>
When uses of <tt>begin</tt>, <tt>let-syntax</tt>, or <tt>letrec-syntax</tt>
from the <tt>(rnrs base (6))</tt> library
occur in a top-level body prior to the first
expression, they are spliced into the body; see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.7">11.4.7</a>.
Some or all of the body, including portions wrapped in <tt>begin</tt>,
<tt>let-syntax</tt>, or <tt>letrec-syntax</tt>
forms, may be specified by a syntactic abstraction
(see section&nbsp;<a href="r6rs-Z-H-12.html#node_sec_9.2">9.2</a>).</p>
<p>
</p>
<a name="node_sec_8.2"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_8.2">8.2&nbsp;&nbsp;Top-level program semantics</a></h2>
<p>A top-level program is executed by treating the program similarly to a library, and
evaluating its definitions and expressions.
The semantics of a top-level body may be roughly explained by
a simple translation into a library body: 
Each &lt;expression&gt; that appears before a
definition in
the top-level body is converted into a dummy definition 
</p>

<tt>(define&nbsp;&lt;variable&gt;&nbsp;(begin&nbsp;&lt;expression&gt;&nbsp;&lt;unspecified&gt;))<p></tt>
where &lt;variable&gt; is a fresh identifier and &lt;unspecified&gt;
is a side-effect-free expression returning an unspecified value.
(It is generally impossible to determine which forms are 
definitions and expressions without concurrently expanding the body, so
the actual translation is somewhat more complicated; see
chapter&nbsp;<a href="r6rs-Z-H-13.html#node_chap_10">10</a>.)</p>
<p>
On platforms that support it, a top-level program may access its command line 
by calling the <tt>command-line</tt> procedure (see library 
section&nbsp;on &ldquo;Command-line access and exit values&rdquo;).</p>
<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-10.html">previous</a></span><span>, <a href="r6rs-Z-H-12.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_9"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_9">Chapter 9</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_9">Primitive syntax</a></h1>
<p>After the <tt>import</tt> form within a <tt>library</tt> form or a top-level
program, the forms
that constitute the body of the library or the top-level program
depend on the libraries that are
imported. In particular, imported syntactic keywords determine 
the available syntactic abstractions and whether each form is a 
definition or expression. A few form types are
always available independent of imported libraries, however,
including constant literals, variable references, procedure calls,
and macro uses.</p>
<p>
</p>
<a name="node_sec_9.1"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_9.1">9.1&nbsp;&nbsp;Primitive expression types</a></h2>
<p></p>
<p>
The entries in this section all describe expressions, which may occur
in the place of &lt;expression&gt; syntactic variables.  See
also section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4">11.4</a>.</p>
<p>
</p>
<a name="node_sec_Temp_14"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_14">Constant literals</a></h3>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt>&lt;number&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<div align=left><tt>&lt;boolean&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<div align=left><tt>&lt;character&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<div align=left><tt>&lt;string&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<div align=left><tt>&lt;bytevector&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<a name="node_idx_292"></a><p>
An expression consisting of a representation of a number object, a
boolean, a character, a string, or a bytevector, evaluates &ldquo;to
itself&rdquo;.</p>
<p>
</p>

<tt>145932&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;145932
<p class=nopadding><tt>#t</tt>&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>&quot;abc&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;&quot;abc&quot;</p>

<p class=nopadding>#vu8(2&nbsp;24&nbsp;123)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;#vu8(2&nbsp;24&nbsp;123)</p>
<p></tt></p>
<p>
As noted in section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.10">5.10</a>, the value of a literal
expression is immutable.
</p>
<p></p>
<p>
</p>
<a name="node_sec_Temp_15"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_15">Variable references</a></h3>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p></p>
<div align=left><tt>&lt;variable&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
An expression consisting of a variable<a name="node_idx_294"></a>(section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.2">5.2</a>) is a variable reference if it is not a
macro use (see below).  The value of
the variable reference is the value stored in the location to which the
variable is bound.  It is a syntax violation to reference
an unbound<a name="node_idx_296"></a>variable.</p>
<p>
The following example examples assumes the base library
has been imported:
</p>

<tt>(define&nbsp;x&nbsp;28)
<p class=nopadding>x&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;28</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<a name="node_sec_Temp_16"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_16">Procedure calls</a></h3>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt>(&lt;operator&gt; &lt;operand<sub>1</sub>&gt; <tt>...</tt>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
A procedure call consists of expressions for the procedure to be
called and the arguments to be passed to it, with enclosing
parentheses.  A form in an expression context is a procedure call if
&lt;operator&gt; is not an identifier bound as a syntactic keyword
(see section&nbsp;<a href="r6rs-Z-H-12.html#node_sec_9.2">9.2</a> below).</p>
<p>
When a procedure call is evaluated, the operator and operand
expressions are evaluated (in an unspecified order) and the resulting
procedure is passed the resulting
arguments.<a name="node_idx_298"></a><a name="node_idx_300"></a></p>
<p>
The following examples assume the <tt>(rnrs base (6))</tt> library
has been imported:
</p>

<tt>(+&nbsp;3&nbsp;4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;7
<p class=nopadding>((if&nbsp;<tt>#f</tt>&nbsp;+&nbsp;*)&nbsp;3&nbsp;4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;12</p>
<p></tt>
If the value of &lt;operator&gt; is not a procedure, an exception with
condition type <tt>&amp;assertion</tt> is raised.  Also, if &lt;operator&gt;
does not accept as many arguments as there are &lt;operand&gt;s, an
exception with condition type <tt>&amp;assertion</tt> is raised.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em> In contrast to other dialects of Lisp, the order of
evaluation is unspecified, and the operator expression and the operand
expressions are always evaluated with the same evaluation rules.<p>
Although the order of evaluation is otherwise unspecified, the effect of
any concurrent evaluation of the operator and operand expressions is
constrained to be consistent with some sequential order of evaluation.
The order of evaluation may be chosen differently for each procedure call.
</p>
</blockquote><p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em> In many dialects of Lisp, the form <tt>()</tt> is a legitimate expression.  In Scheme, expressions written as
list/pair forms must have at
least one subexpression, so <tt>()</tt> is not a syntactically valid
expression.
</blockquote><p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_9.2"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_9.2">9.2&nbsp;&nbsp;Macros</a></h2>
<p></p>
<p>
Libraries and top-level programs can define and use new kinds of derived expressions and
definitions called <em>syntactic abstractions</em> or
<em>macros</em>.<a name="node_idx_302"></a><a name="node_idx_304"></a>A syntactic abstraction is created by binding a keyword to a
<em>macro transformer</em> or, simply, <em>transformer</em>.
<a name="node_idx_306"></a><a name="node_idx_308"></a>The transformer determines
how a use of the macro (called a <a name="node_idx_310"></a><em>macro use</em>)
is transcribed into a more primitive form.</p>
<p>
Most macro uses have the form:
</p>

<tt>(&lt;keyword&gt;&nbsp;&lt;datum&gt;&nbsp;<tt>...</tt>)<p></tt>where &lt;keyword&gt; is an identifier that uniquely determines the
kind of form.  This identifier is called the <em>syntactic
keyword</em><a name="node_idx_312"></a>, or simply <em>keyword</em><a name="node_idx_314"></a>, of the macro<a name="node_idx_316"></a>.
The number of &lt;datum&gt;s and the syntax
of each depends on the syntactic abstraction.</p>
<p>
Macro uses can also take the form of improper lists, singleton
identifiers, or <tt>set!</tt> forms, where the second subform of the
<tt>set!</tt> is the keyword (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.19">11.19</a>)
library section&nbsp;on &ldquo;<tt>make-variable-transformer</tt>&rdquo;):
</p>

<tt>(&lt;keyword&gt;&nbsp;&lt;datum&gt;&nbsp;<tt>...</tt>&nbsp;.&nbsp;&lt;datum&gt;)
<p class=nopadding>&lt;keyword&gt;</p>

<p class=nopadding>(set!&nbsp;&lt;keyword&gt;&nbsp;&lt;datum&gt;)</p>
<p></tt></p>
<p>
The <tt>define-syntax</tt>, <tt>let-syntax</tt> and <tt>letrec-syntax</tt>
forms, described in sections&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.2.2">11.2.2</a> and <a href="r6rs-Z-H-14.html#node_sec_11.18">11.18</a>,
create bindings for keywords, associate them with macro transformers,
and control the scope within which they are visible.</p>
<p>
The <tt>syntax-rules</tt> and <tt>identifier-syntax</tt> forms, described in
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.19">11.19</a>, create transformers via a pattern
language.  Moreover, the <tt>syntax-case</tt> form, described in library
chapter&nbsp;on &ldquo;<tt>syntax-case</tt>&rdquo;, 
allows creating transformers via arbitrary Scheme code.</p>
<p>
Keywords occupy the same name space as variables.
That is, within the same
scope, an identifier can be bound as a variable or keyword, or neither, but
not both, and local bindings of either kind may shadow other bindings of
either kind.</p>
<p>
Macros defined using <tt>syntax-rules</tt> and <tt>identifier-syntax</tt>
are &ldquo;hygienic&rdquo; and &ldquo;referentially transparent&rdquo; and thus preserve
Scheme's lexical scoping&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_16">16</a>,&nbsp;<a href="r6rs-Z-H-21.html#node_bib_15">15</a>,&nbsp;<a href="r6rs-Z-H-21.html#node_bib_2">2</a>,&nbsp;<a href="r6rs-Z-H-21.html#node_bib_6">6</a>,&nbsp;<a href="r6rs-Z-H-21.html#node_bib_9">9</a>]:
<a name="node_idx_318"></a><a name="node_idx_320"></a></p>
<p>
</p>
<ul>
<li><p>If a macro transformer inserts a binding for an identifier
(variable or keyword) not appearing in the macro use, the identifier is in effect renamed
throughout its scope to avoid conflicts with other identifiers.</p>
<p>
</p>
<li><p>If a macro transformer inserts a free reference to an
identifier, the reference refers to the binding that was visible
where the transformer was specified, regardless of any local
bindings that may surround the use of the macro.
</p>
</ul><p></p>
<p>
Macros defined using the <tt>syntax-case</tt> facility are also
hygienic unless <tt>datum-&gt;syntax</tt>
(see library section&nbsp;on &ldquo;Syntax-object and datum conversions&rdquo;) is used.</p>
<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-11.html">previous</a></span><span>, <a href="r6rs-Z-H-13.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_10"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_10">Chapter 10</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_10">Expansion process</a></h1>
<p></p>
<p>
Macro uses (see section&nbsp;<a href="r6rs-Z-H-12.html#node_sec_9.2">9.2</a>) are expanded into <i>core
forms</i><a name="node_idx_322"></a>at the start of evaluation (before compilation or interpretation)
by a syntax <em>expander</em>.
The set of core forms is implementation-dependent, as is the
representation of these forms in the expander's output.
If the expander encounters a syntactic abstraction, it invokes
the associated transformer to expand the syntactic abstraction, then
repeats the expansion process for the form returned by the transformer.
If the expander encounters a core form, it recursively
processes its subforms that are in expression or definition context,
if any, and reconstructs the form from the
expanded subforms.
Information about identifier bindings is maintained during expansion
to enforce lexical scoping for variables and keywords.</p>
<p>
To handle definitions, the expander processes the initial
forms in a &lt;body&gt; (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>) or
&lt;library body&gt; (see section&nbsp;<a href="r6rs-Z-H-10.html#node_sec_7.1">7.1</a>)
from left to
right.  How the expander processes each form encountered 
depends upon the kind of form.</p>
<p>
</p>
<dl><dt></dt><dd>
</dd><dt><b>macro use</b></dt><dd>
The expander invokes the associated transformer to transform the macro
use, then recursively performs whichever of these actions are appropriate
for the resulting form.<p>
</p>
</dd><dt><b><tt>define-syntax</tt> form</b></dt><dd>
The expander expands and evaluates the right-hand-side expression and binds the
keyword to the resulting transformer.<p>
</p>
</dd><dt><b><tt>define</tt> form</b></dt><dd>
The expander records the fact that the defined identifier is a variable but defers
expansion of the right-hand-side expression until after all of the
definitions have been processed.<p>
</p>
</dd><dt><b><tt>begin</tt> form</b></dt><dd>
The expander splices the subforms into the list of body forms it is
processing.  (See section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.7">11.4.7</a>.)<p>
</p>
</dd><dt><b><tt>let-syntax</tt> or <tt>letrec-syntax</tt> form</b></dt><dd>
The expander splices the inner body forms into the list of (outer) body forms it is
processing, arranging for the keywords bound by the <tt>let-syntax</tt>
and <tt>letrec-syntax</tt> to be visible only in the inner body forms.<p>
</p>
</dd><dt><b>expression, i.e., nondefinition</b></dt><dd>
The expander completes the expansion of the deferred right-hand-side expressions
and the current and remaining expressions in the body, and then
creates the equivalent of a <tt>letrec*</tt> form from the defined variables,
expanded right-hand-side expressions, and expanded body expressions.
</dd></dl><p></p>
<p>
For the right-hand side of the definition of a variable, expansion is
deferred until after all of the definitions have been seen.  Consequently,
each keyword and variable reference within the right-hand side
resolves to the local binding, if any.</p>
<p>
A definition in the sequence of forms must not define any identifier whose
binding is used to determine the meaning of the undeferred portions of the
definition or any definition that precedes it in the sequence of forms.
For example, the bodies of the following expressions violate this
restriction.</p>
<p>
</p>

<tt>(let&nbsp;()
<p class=nopadding>&nbsp;&nbsp;(define&nbsp;define&nbsp;17)</p>

<p class=nopadding>&nbsp;&nbsp;(list&nbsp;define))</p>

<p class=nopadding></p>

<p class=nopadding>(let-syntax&nbsp;([def0&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(_&nbsp;x)&nbsp;(define&nbsp;x&nbsp;0)])])</p>

<p class=nopadding>&nbsp;&nbsp;(let&nbsp;([z&nbsp;3])</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(def0&nbsp;z)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(define&nbsp;def0&nbsp;list)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(list&nbsp;z)))</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;(define-syntax&nbsp;foo</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(e)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;1&nbsp;2)))</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;+&nbsp;2)</p>

<p class=nopadding>&nbsp;&nbsp;(foo))</p>
<p></tt></p>
<p>
The following do not violate the restriction.</p>
<p>
</p>

<tt>(let&nbsp;([x&nbsp;5])
<p class=nopadding>&nbsp;&nbsp;(define&nbsp;lambda&nbsp;list)</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;x&nbsp;x))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(5&nbsp;5)</p>

<p class=nopadding></p>

<p class=nopadding>(let-syntax&nbsp;([def0&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(_&nbsp;x)&nbsp;(define&nbsp;x&nbsp;0)])])</p>

<p class=nopadding>&nbsp;&nbsp;(let&nbsp;([z&nbsp;3])</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(define&nbsp;def0&nbsp;list)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(def0&nbsp;z)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(list&nbsp;z)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(3)</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;(define-syntax&nbsp;foo</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(e)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;([+&nbsp;-])&nbsp;(+&nbsp;1&nbsp;2))))</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;+&nbsp;2)</p>

<p class=nopadding>&nbsp;&nbsp;(foo))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-1</p>
<p></tt></p>
<p>
The implementation should treat a violation of the restriction as a
syntax violation.</p>
<p>
</p>
<p>
Note that this algorithm does not directly reprocess any form.
It requires a single left-to-right pass over the definitions followed by a
single pass (in any order) over the body expressions and deferred
right-hand sides.</p>
<p>
Example:</p>
<p>
</p>

<tt>(lambda&nbsp;(x)
<p class=nopadding>&nbsp;&nbsp;(define-syntax&nbsp;defun</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(_&nbsp;x&nbsp;a&nbsp;e)&nbsp;(define&nbsp;x&nbsp;(lambda&nbsp;a&nbsp;e))]))</p>

<p class=nopadding>&nbsp;&nbsp;(defun&nbsp;even?&nbsp;(n)&nbsp;(or&nbsp;(=&nbsp;n&nbsp;0)&nbsp;(odd?&nbsp;(-&nbsp;n&nbsp;1))))</p>

<p class=nopadding>&nbsp;&nbsp;(define-syntax&nbsp;odd?</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(syntax-rules&nbsp;()&nbsp;[(_&nbsp;n)&nbsp;(not&nbsp;(even?&nbsp;n))]))</p>

<p class=nopadding>&nbsp;&nbsp;(odd?&nbsp;(if&nbsp;(odd?&nbsp;x)&nbsp;(*&nbsp;x&nbsp;x)&nbsp;x)))</p>
<p></tt></p>
<p>
In the example, the definition of <tt>defun</tt> is encountered first, and the keyword
<tt>defun</tt> is associated with the transformer resulting from
the expansion and evaluation of the corresponding right-hand side.
A use of <tt>defun</tt> is encountered next and expands into a
<tt>define</tt> form.
Expansion of the right-hand side of this define form is deferred.
The definition of <tt>odd?</tt> is next and results in the association
of the keyword <tt>odd?</tt> with the transformer resulting from
expanding and evaluating the corresponding right-hand side.
A use of <tt>odd?</tt> appears next and is expanded; the resulting
call to <tt>not</tt> is recognized as an expression
because <tt>not</tt> is bound as a variable.
At this point, the expander completes the expansion of the current
expression (the call to <tt>not</tt>) and the deferred right-hand side of the
<tt>even?</tt> definition;
the uses of <tt>odd?</tt> appearing in these expressions are expanded
using the transformer associated with the keyword <tt>odd?</tt>.
The final output is the equivalent of</p>
<p>
</p>

<tt>(lambda&nbsp;(x)
<p class=nopadding>&nbsp;&nbsp;(letrec*&nbsp;([even?</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(n)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(or&nbsp;(=&nbsp;n&nbsp;0)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(not&nbsp;(even?&nbsp;(-&nbsp;n&nbsp;1)))))])</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(not&nbsp;(even?&nbsp;(if&nbsp;(not&nbsp;(even?&nbsp;x))&nbsp;(*&nbsp;x&nbsp;x)&nbsp;x)))))</p>
<p></tt></p>
<p>
although the structure of the output is implementation-dependent.</p>
<p>
Because definitions and expressions can be interleaved in a
&lt;top-level body&gt; (see chapter&nbsp;<a href="r6rs-Z-H-11.html#node_chap_8">8</a>),
the expander's processing of a &lt;top-level body&gt; is somewhat
more complicated.
It behaves as described above for a &lt;body&gt; or
&lt;library body&gt; with the following exceptions:
When the expander finds a nondefinition,
it defers its expansion and continues scanning for definitions.
Once it reaches the end of the set of forms, it processes the
deferred right-hand-side and body expressions, then
generates the equivalent of a <tt>letrec*</tt> form from the defined variables,
expanded right-hand-side expressions, and expanded body expressions.
For each body expression &lt;expression&gt; that appears before a variable definition
in the body, a dummy binding is created at the corresponding place within
the set of <tt>letrec*</tt> bindings, with a fresh temporary variable on the
left-hand side and the equivalent of <tt>(begin &lt;expression&gt;
&lt;unspecified&gt;)</tt>,
where &lt;unspecified&gt; is a side-effect-free expression returning
an unspecified value,
on the right-hand side, so that
left-to-right evaluation order is preserved.
The <tt>begin</tt> wrapper allows &lt;expression&gt; to evaluate to an
arbitrary number of values.</p>
<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-12.html">previous</a></span><span>, <a href="r6rs-Z-H-14.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_11"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_11">Chapter 11</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_11">Base library</a></h1>
<p></p>
<p>
This chapter describes Scheme's <tt>(rnrs base (6))</tt><a name="node_idx_324"></a>library, which exports many of
the procedure and syntax bindings that are traditionally associated
with Scheme.</p>
<p>
Section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.20">11.20</a> defines the rules that identify
tail calls and tail contexts in constructs from the <tt>(rnrs base (6))</tt>
library.</p>
<p>
</p>
<a name="node_sec_11.1"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.1">11.1&nbsp;&nbsp;Base types</a></h2>
<p></p>
<p>
No object satisfies more than one of the following predicates:</p>
<p>
</p>

<tt>boolean?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pair?
<p class=nopadding>symbol?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number?</p>

<p class=nopadding>char?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string?</p>

<p class=nopadding>vector?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;procedure?</p>

<p class=nopadding>null?</p>
<p></tt></p>
<p>
These predicates define the base types <em>boolean</em>, <em>pair</em>, <em>symbol</em>, <em>number</em>, <em>char</em> (or <em>character</em>), <em>string</em>, <em>vector</em>, and <em>procedure</em>.  Moreover, the empty list is a special
object of its own type.
<a name="node_idx_326"></a><a name="node_idx_328"></a><a name="node_idx_330"></a><a name="node_idx_332"></a><a name="node_idx_334"></a><a name="node_idx_336"></a><a name="node_idx_338"></a><a name="node_idx_340"></a><a name="node_idx_342"></a><a name="node_idx_344"></a><a name="node_idx_346"></a></p>
<p>
Note that, although there is a separate boolean type, any Scheme value
can be used as a boolean value for the purpose of a conditional test;
see section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.7">5.7</a>.</p>
<p>
</p>
<a name="node_sec_11.2"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.2">11.2&nbsp;&nbsp;Definitions</a></h2>
<p></p>
<p>
Definitions<a name="node_idx_348"></a>may appear within a
&lt;top-level body&gt; (section&nbsp;<a href="r6rs-Z-H-11.html#node_sec_8.1">8.1</a>),
at the top of a &lt;library body&gt; (section&nbsp;<a href="r6rs-Z-H-10.html#node_sec_7.1">7.1</a>),
or at the top of a &lt;body&gt; (section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>).</p>
<p>
A &lt;definition&gt; may be a variable definition
(section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.2.1">11.2.1</a>) or
keyword definition
(section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.2.1">11.2.1</a>).
Macro uses that expand into definitions or groups of
definitions (packaged in a <tt>begin</tt>, <tt>let-syntax</tt>, or
<tt>letrec-syntax</tt> form; see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.7">11.4.7</a>) may also appear
wherever other definitions may appear.</p>
<p>
</p>
<a name="node_sec_11.2.1"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.2.1">11.2.1&nbsp;&nbsp;Variable definitions</a></h3>
<p></p>
<p>
The <tt>define</tt> form described in this section is a
&lt;definition&gt;<a name="node_idx_350"></a>used to create variable bindings
and may appear anywhere other definitions may appear.</p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_352"></a>define<i> &lt;variable&gt; &lt;expression&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<div align=left><tt>(<a name="node_idx_354"></a>define<i> &lt;variable&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<div align=left><tt>(define (&lt;variable&gt; &lt;formals&gt;) &lt;body&gt;)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<div align=left><tt>(define (&lt;variable&gt; . &lt;formal&gt;) &lt;body&gt;)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
The first from of <tt>define</tt> binds &lt;variable&gt; to a new
location before assigning the value of &lt;expression&gt; to it.
</p>

<tt>(define&nbsp;add3
<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(x)&nbsp;(+&nbsp;x&nbsp;3)))</p>

<p class=nopadding>(add3&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;6</p>

<p class=nopadding>(define&nbsp;first&nbsp;car)</p>

<p class=nopadding>(first&nbsp;'(1&nbsp;2))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;1</p>
<p></tt>
The continuation of &lt;expression&gt; should not be invoked more than
once.</p>
<p>
<em>Implementation responsibilities: </em>Implementations should detect that the
continuation of &lt;expression&gt; is invoked more than once.
If the implementation detects this, it must raise an
exception with condition type <tt>&amp;assertion</tt>.</p>
<p>
The second form of <tt>define</tt> is equivalent to
</p>

<tt>(define&nbsp;&lt;variable&gt;&nbsp;&lt;unspecified&gt;)<p></tt>
where &lt;unspecified&gt; is a side-effect-free expression returning
an unspecified value.</p>
<p>
In the third form of <tt>define</tt>, &lt;formals&gt; must be either a
sequence of zero or more variables, or a sequence of one or more
variables followed by a dot <tt>.</tt> and another variable (as
in a lambda expression, see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.2">11.4.2</a>).  This form is equivalent to
</p>

<tt>(define&nbsp;&lt;variable&gt;
<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(&lt;formals&gt;)&nbsp;&lt;body&gt;)).</p>
<p></tt></p>
<p>
In the fourth form of <tt>define</tt>, 
&lt;formal&gt; must be a single
variable.  This form is equivalent to
</p>

<tt>(define&nbsp;&lt;variable&gt;
<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;&lt;formal&gt;&nbsp;&lt;body&gt;)).</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.2.2"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.2.2">11.2.2&nbsp;&nbsp;Syntax definitions</a></h3>
<p></p>
<p>
The <tt>define-syntax</tt> form described in this section is a
&lt;definition&gt;<a name="node_idx_356"></a>used to create keyword bindings
and may appear anywhere other definitions may appear.</p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_358"></a>define-syntax<i> &lt;keyword&gt; &lt;expression&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
Binds &lt;keyword&gt; to the value of
&lt;expression&gt;, which must evaluate, at macro-expansion
time, to a transformer.  Macro transformers can be created using the
<tt>syntax-rules</tt> and <tt>identifier-syntax</tt> forms described in
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.19">11.19</a>.  See library
section&nbsp;on &ldquo;Transformers&rdquo; for a more
complete description of transformers.</p>
<p>
Keyword bindings established by <tt>define-syntax</tt> are visible
throughout the body in which they appear, except where shadowed by
other bindings, and nowhere else, just like variable bindings established
by <tt>define</tt>.
All bindings established by a set of definitions, whether
keyword or variable definitions, are visible within the definitions
themselves.</p>
<p>
<em>Implementation responsibilities: </em>The implementation should detect if the value of
&lt;expression&gt; cannot possibly be a transformer.</p>
<p>
Example:</p>
<p>
</p>

<tt>(let&nbsp;()
<p class=nopadding>&nbsp;&nbsp;(define&nbsp;even?</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(or&nbsp;(=&nbsp;x&nbsp;0)&nbsp;(odd?&nbsp;(-&nbsp;x&nbsp;1)))))</p>

<p class=nopadding>&nbsp;&nbsp;(define-syntax&nbsp;odd?</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((odd?&nbsp;&nbsp;x)&nbsp;(not&nbsp;(even?&nbsp;x)))))</p>

<p class=nopadding>&nbsp;&nbsp;(even?&nbsp;10))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#t</tt></p>
<p></tt></p>
<p>
An implication of the left-to-right processing order
(section&nbsp;<a href="r6rs-Z-H-13.html#node_chap_10">10</a>) is that one definition can
affect whether a subsequent form is also a definition.  </p>
<p>
Example:</p>
<p>
</p>

<tt>(let&nbsp;()
<p class=nopadding>&nbsp;&nbsp;(define-syntax&nbsp;bind-to-zero</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((bind-to-zero&nbsp;id)&nbsp;(define&nbsp;id&nbsp;0))))</p>

<p class=nopadding>&nbsp;&nbsp;(bind-to-zero&nbsp;x)</p>

<p class=nopadding>&nbsp;&nbsp;x)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0</p>
<p></tt></p>
<p>
The behavior is unaffected by any binding for
<tt>bind-to-zero</tt> that might appear outside of the <tt>let</tt>
expression.
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.3"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.3">11.3&nbsp;&nbsp;Bodies</a></h2>
<p></p>
<p>
<a name="node_idx_360"></a>The &lt;body&gt; of a <tt>lambda</tt>, <tt>let</tt>, <tt>let*</tt>,
<tt>let-values</tt>, <tt>let*-values</tt>, <tt>letrec</tt>, or <tt>letrec*</tt>
expression, or that of a definition with a body
consists of zero or more definitions followed by one or more
expressions.</p>
<p>
<tt>&lt;definition&gt; <tt>...</tt> &lt;expression<sub>1</sub>&gt; &lt;expression<sub>2</sub>&gt; <tt>...</tt></tt></p>
<p>
Each identifier defined by a
definition is local to the &lt;body&gt;.  That is, the identifier is
bound, and the region of the binding is the
entire &lt;body&gt; (see section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.2">5.2</a>).</p>
<p>
Example:
</p>

<tt>(let&nbsp;((x&nbsp;5))
<p class=nopadding>&nbsp;&nbsp;(define&nbsp;foo&nbsp;(lambda&nbsp;(y)&nbsp;(bar&nbsp;x&nbsp;y)))</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;bar&nbsp;(lambda&nbsp;(a&nbsp;b)&nbsp;(+&nbsp;(*&nbsp;a&nbsp;b)&nbsp;a)))</p>

<p class=nopadding>&nbsp;&nbsp;(foo&nbsp;(+&nbsp;x&nbsp;3)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;45</p>
<p></tt>
When <tt>begin</tt>, <tt>let-syntax</tt>, or <tt>letrec-syntax</tt> forms
occur in a body prior to the first
expression, they are spliced into the body; see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.7">11.4.7</a>.
Some or all of the body, including portions wrapped in <tt>begin</tt>,
<tt>let-syntax</tt>, or <tt>letrec-syntax</tt>
forms, may be specified by a macro use
(see section&nbsp;<a href="r6rs-Z-H-12.html#node_sec_9.2">9.2</a>).</p>
<p>
An expanded &lt;body&gt; (see chapter&nbsp;<a href="r6rs-Z-H-13.html#node_chap_10">10</a>)
containing variable definitions can
always be converted into an equivalent <tt>letrec*</tt>
expression.  For example, the <tt>let</tt> expression in the above
example is equivalent to</p>
<p>
</p>

<tt>(let&nbsp;((x&nbsp;5))
<p class=nopadding>&nbsp;&nbsp;(letrec*&nbsp;((foo&nbsp;(lambda&nbsp;(y)&nbsp;(bar&nbsp;x&nbsp;y)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bar&nbsp;(lambda&nbsp;(a&nbsp;b)&nbsp;(+&nbsp;(*&nbsp;a&nbsp;b)&nbsp;a))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(foo&nbsp;(+&nbsp;x&nbsp;3))))</p>
<p></tt></p>
<p>
</p>
<a name="node_sec_11.4"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.4">11.4&nbsp;&nbsp;Expressions</a></h2>
<p></p>
<p>
The entries in this section describe the expressions of the <tt>(rnrs base (6))</tt>
library, which may occur in the position of the &lt;expression&gt;
syntactic variable in addition to the primitive
expression types as described in
section&nbsp;<a href="r6rs-Z-H-12.html#node_sec_9.1">9.1</a>.</p>
<p>
</p>
<a name="node_sec_11.4.1"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.4.1">11.4.1&nbsp;&nbsp;Quotation</a></h3>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_362"></a>quote<i> &lt;datum&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>&lt;Datum&gt; should be a syntactic datum.</p>
<p>
<em>Semantics: </em><tt>(quote &lt;datum&gt;)</tt> evaluates to the datum value
represented by &lt;datum&gt;
(see
section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.3">4.3</a>).  This notation is used to include
constants.</p>
<p>
</p>

<tt>(quote&nbsp;a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;a
<p class=nopadding>(quote&nbsp;<tt>#</tt>(a&nbsp;b&nbsp;c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;#(a&nbsp;b&nbsp;c)</p>

<p class=nopadding>(quote&nbsp;(+&nbsp;1&nbsp;2))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(+&nbsp;1&nbsp;2)</p>
<p></tt></p>
<p>
As noted in section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.3.5">4.3.5</a>, <tt>(quote &lt;datum&gt;)</tt>
may be abbreviated as <tt>'</tt>&lt;datum&gt;:</p>
<p>
</p>

<tt>'&quot;abc&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;&quot;abc&quot;
<p class=nopadding>'145932&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;145932</p>

<p class=nopadding>'a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;a</p>

<p class=nopadding>'#(a&nbsp;b&nbsp;c)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;#(a&nbsp;b&nbsp;c)</p>

<p class=nopadding>'()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;()</p>

<p class=nopadding>'(+&nbsp;1&nbsp;2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(+&nbsp;1&nbsp;2)</p>

<p class=nopadding>'(quote&nbsp;a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(quote&nbsp;a)</p>

<p class=nopadding>''a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(quote&nbsp;a)</p>
<p></tt></p>
<p>
As noted in section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.10">5.10</a>, constants are immutable.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
Different constants that are the value of a <tt>quote</tt> expression may
share the same locations.
</blockquote>
<p></p>
<p>
</p>
<a name="node_sec_11.4.2"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.4.2">11.4.2&nbsp;&nbsp;Procedures</a></h3>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_364"></a>lambda<i> &lt;formals&gt; &lt;body&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>&lt;Formals&gt; must be a formal parameter list as described below,
and &lt;body&gt; must be as described in section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>.</p>
<p>
<em>Semantics: </em>A <tt>lambda</tt> expression evaluates to a procedure.  The environment in
effect when the <tt>lambda</tt> expression is evaluated is remembered as part of the
procedure.  When the procedure is later called with some 
arguments, the environment in which the <tt>lambda</tt> expression was evaluated is
extended by binding the variables in the parameter list to
fresh locations, and the resulting argument values are stored
in those locations.  Then, the expressions in the body of the <tt>lambda</tt> expression
(which may contain definitions and thus represent a <tt>letrec*</tt> form, see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>) are evaluated
sequentially in the extended environment.
The results of the last expression in the body are returned as
the results of the procedure call.</p>
<p>
</p>

<tt>(lambda&nbsp;(x)&nbsp;(+&nbsp;x&nbsp;x))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<em>a&nbsp;procedure</em>
<p class=nopadding>((lambda&nbsp;(x)&nbsp;(+&nbsp;x&nbsp;x))&nbsp;4)&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;8</p>

<p class=nopadding></p>

<p class=nopadding>((lambda&nbsp;(x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;(define&nbsp;(p&nbsp;y)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;y&nbsp;1))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;(+&nbsp;(p&nbsp;x)&nbsp;x))</p>

<p class=nopadding>&nbsp;5)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;11</p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;reverse-subtract</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(x&nbsp;y)&nbsp;(-&nbsp;y&nbsp;x)))</p>

<p class=nopadding>(reverse-subtract&nbsp;7&nbsp;10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;3</p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;add4</p>

<p class=nopadding>&nbsp;&nbsp;(let&nbsp;((x&nbsp;4))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(y)&nbsp;(+&nbsp;x&nbsp;y))))</p>

<p class=nopadding>(add4&nbsp;6)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;10</p>
<p></tt></p>
<p>
&lt;Formals&gt; must have one of the following forms:</p>
<p>
</p>
<ul>
<li><p><tt>(&lt;variable<sub>1</sub>&gt; <tt>...</tt>)</tt>:
The procedure takes a fixed number of arguments; when the procedure is
called, the arguments are stored in the bindings of the
corresponding variables.</p>
<p>
</p>
<li><p>&lt;variable&gt;:
The procedure takes any number of arguments; when the procedure is
called, the sequence of arguments is converted into a newly
allocated list, and the list is stored in the binding of the
&lt;variable&gt;.</p>
<p>
</p>
<li><p><tt>(&lt;variable<sub>1</sub>&gt; <tt>...</tt> &lt;variable<sub><em>n</em></sub>&gt; <strong>.</strong>
&lt;variable<sub><em>n</em>+1</sub>&gt;)</tt>:
If a period <tt>.</tt> precedes the last variable, then
the procedure takes <em>n</em> or more arguments, where <em>n</em> is the
number of parameters before the period (there must
be at least one).
The value stored in the binding of the last variable is a
newly allocated
list of the arguments left over after all the other 
arguments have been matched up against the other parameters.
</p>
</ul><p></p>
<p>
</p>

<tt>((lambda&nbsp;x&nbsp;x)&nbsp;3&nbsp;4&nbsp;5&nbsp;6)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(3&nbsp;4&nbsp;5&nbsp;6)
<p class=nopadding>((lambda&nbsp;(x&nbsp;y&nbsp;.&nbsp;z)&nbsp;z)</p>

<p class=nopadding>&nbsp;3&nbsp;4&nbsp;5&nbsp;6)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(5&nbsp;6)</p>
<p></tt></p>
<p>
Any &lt;variable&gt; must not appear more than once in
&lt;formals&gt;.
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.4.3"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.4.3">11.4.3&nbsp;&nbsp;Conditionals</a></h3>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_366"></a>if<i> &lt;test&gt; &lt;consequent&gt; &lt;alternate&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<div align=left><tt>(<a name="node_idx_368"></a>if<i> &lt;test&gt; &lt;consequent&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
  <p>
<em>Syntax: </em>&lt;Test&gt;, &lt;consequent&gt;, and &lt;alternate&gt; must be 
expressions.</p>
<p>
<em>Semantics: </em>An <tt>if</tt> expression is evaluated as follows: first,
&lt;test&gt; is evaluated.  If it yields a true value<a name="node_idx_370"></a>(see
section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.7">5.7</a>), then &lt;consequent&gt; is evaluated and
its values are returned.  Otherwise &lt;alternate&gt; is evaluated and its
values are returned.  If &lt;test&gt; yields <tt>#f</tt> and no
&lt;alternate&gt; is specified, then the result of the expression is unspecified.</p>
<p>
</p>

<tt>(if&nbsp;(&gt;&nbsp;3&nbsp;2)&nbsp;'yes&nbsp;'no)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;yes
<p class=nopadding>(if&nbsp;(&gt;&nbsp;2&nbsp;3)&nbsp;'yes&nbsp;'no)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;no</p>

<p class=nopadding>(if&nbsp;(&gt;&nbsp;3&nbsp;2)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(-&nbsp;3&nbsp;2)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;3&nbsp;2))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;1</p>

<p class=nopadding>(if&nbsp;#f&nbsp;#f)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<em>unspecified</em></p>
<p></tt></p>
<p>
The &lt;consequent&gt; and &lt;alternate&gt; expressions are in
tail context if the <tt>if</tt> expression itself is; see
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.20">11.20</a>.
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.4.4"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.4.4">11.4.4&nbsp;&nbsp;Assignments</a></h3>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_372"></a>set!<i> &lt;variable&gt; &lt;expression&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
&lt;Expression&gt; is evaluated, and the resulting value is stored in
the location to which &lt;variable&gt; is bound.  &lt;Variable&gt; must
be bound either in some region<a name="node_idx_374"></a>enclosing the <tt>set!</tt> expression
or at the top level.  The result of the <tt>set!</tt>
expression is unspecified.</p>
<p>
</p>

<tt>(let&nbsp;((x&nbsp;2))
<p class=nopadding>&nbsp;&nbsp;(+&nbsp;x&nbsp;1)</p>

<p class=nopadding>&nbsp;&nbsp;(set!&nbsp;x&nbsp;4)</p>

<p class=nopadding>&nbsp;&nbsp;(+&nbsp;x&nbsp;1))&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;5</p>
<p></tt></p>
<p>
It is a syntax violation if &lt;variable&gt; refers to an
immutable binding.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The identifier <tt>set!</tt> is exported with level 1 as well.  See
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.19">11.19</a>.
</blockquote>
<p></p>
<p>
</p>
<a name="node_sec_11.4.5"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.4.5">11.4.5&nbsp;&nbsp;Derived conditionals</a></h3>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_376"></a>cond<i> &lt;cond clause<sub>1</sub>&gt; &lt;cond clause<sub>2</sub>&gt; <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<a name="node_idx_378"></a><div align=left><tt>=&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>auxiliary syntax&nbsp;</div>

<a name="node_idx_380"></a><div align=left><tt>else</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>auxiliary syntax&nbsp;</div>
<p>
<em>Syntax: </em>Each &lt;cond clause&gt; must be of the form
</p>

<tt>(&lt;test&gt;&nbsp;&lt;expression<sub>1</sub>&gt;&nbsp;<tt>...</tt>)<p></tt>
where &lt;test&gt; is an expression.  Alternatively, a &lt;cond clause&gt; may be
of the form
</p>

<tt>(&lt;test&gt;&nbsp;=&gt;&nbsp;&lt;expression&gt;)<p></tt>
The last &lt;cond clause&gt; may be
an &ldquo;<tt>else</tt> clause&rdquo;, which has the form
</p>

<tt>(else&nbsp;&lt;expression<sub>1</sub>&gt;&nbsp;&lt;expression<sub>2</sub>&gt;&nbsp;<tt>...</tt>).<p></tt></p>
<p>
<em>Semantics: </em>A <tt>cond</tt> expression is evaluated by evaluating the &lt;test&gt;
expressions of successive &lt;cond clause&gt;s in order until one of them
evaluates to a true value<a name="node_idx_382"></a>(see
section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.7">5.7</a>).  When a &lt;test&gt; evaluates to a true
value, then the remaining &lt;expression&gt;s in its &lt;cond clause&gt; are
evaluated in order, and the results of the last &lt;expression&gt; in the
&lt;cond clause&gt; are returned as the results of the entire <tt>cond</tt>
expression.  If the selected &lt;cond clause&gt; contains only the
&lt;test&gt; and no &lt;expression&gt;s, then the value of the
&lt;test&gt; is returned as the result.  If the selected &lt;cond clause&gt; uses the
<tt>=&gt;</tt> alternate form, then the &lt;expression&gt; is evaluated.
Its value must be a procedure.  This procedure should accept one argument; it is
called on the value of the &lt;test&gt; and the values returned by this
procedure are returned by the <tt>cond</tt> expression.
If all &lt;test&gt;s evaluate
to <tt>#f</tt>, and there is no <tt>else</tt> clause, then 
the conditional expression returns unspecified values; if there is an <tt>else</tt>
clause, then its &lt;expression&gt;s are evaluated, and the values of
the last one are returned.</p>
<p>
</p>

<tt>(cond&nbsp;((&gt;&nbsp;3&nbsp;2)&nbsp;'greater)
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((&lt;&nbsp;3&nbsp;2)&nbsp;'less))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;greater</p>

<p class=nopadding></p>

<p class=nopadding>(cond&nbsp;((&gt;&nbsp;3&nbsp;3)&nbsp;'greater)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((&lt;&nbsp;3&nbsp;3)&nbsp;'less)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(else&nbsp;'equal))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;equal</p>

<p class=nopadding></p>

<p class=nopadding>(cond&nbsp;('(1&nbsp;2&nbsp;3)&nbsp;=&gt;&nbsp;cadr)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(else&nbsp;<tt>#f</tt>))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;2</p>
<p></tt></p>
<p>
For a &lt;cond clause&gt; of one of the following forms
</p>

<tt>(&lt;test&gt;&nbsp;&lt;expression<sub>1</sub>&gt;&nbsp;<tt>...</tt>)
<p class=nopadding>(else&nbsp;&lt;expression<sub>1</sub>&gt;&nbsp;&lt;expression<sub>2</sub>&gt;&nbsp;<tt>...</tt>)</p>
<p></tt>
the last &lt;expression&gt; is in tail context if the <tt>cond</tt> form
itself is.  For a &lt;cond clause&gt; of the form
</p>

<tt>(&lt;test&gt;&nbsp;=&gt;&nbsp;&lt;expression&gt;)<p></tt>
the (implied) call to the procedure that results from the evaluation
of &lt;expression&gt; is in a tail context if the <tt>cond</tt> form
itself is. See section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.20">11.20</a>.</p>
<p>
A sample definition of <tt>cond</tt> in terms of simpler forms is in
appendix&nbsp;<a href="r6rs-Z-H-16.html#node_chap_B">B</a>.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_384"></a>case<i> &lt;key&gt; &lt;case clause<sub>1</sub>&gt; &lt;case clause<sub>2</sub>&gt; <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>&lt;Key&gt; must be an expression.  Each &lt;case clause&gt; must have one of
the following forms:
</p>

<tt>((&lt;datum<sub>1</sub>&gt;&nbsp;<tt>...</tt>)&nbsp;&lt;expression<sub>1</sub>&gt;&nbsp;&lt;expression<sub>2</sub>&gt;&nbsp;<tt>...</tt>)
<p class=nopadding>(else&nbsp;&lt;expression<sub>1</sub>&gt;&nbsp;&lt;expression<sub>2</sub>&gt;&nbsp;<tt>...</tt>)</p>
<p></tt>
<a name="node_idx_386"></a>The second form, which specifies an &ldquo;<tt>else</tt> clause&rdquo;,
may only appear as the last &lt;case clause&gt;.
Each &lt;datum&gt; is an external representation of some object.
The data represented by the &lt;datum&gt;s need not be distinct.</p>
<p>
<em>Semantics: </em>A <tt>case</tt> expression is evaluated as follows.  &lt;Key&gt; is
evaluated and its result is compared using <tt>eqv?</tt> (see
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.5">11.5</a>) against the data
represented by the &lt;datum&gt;s of each &lt;case clause&gt; in turn, proceeding
in order from left to right through the set of clauses.  If the
result of evaluating &lt;key&gt; is equivalent to a datum of a &lt;case clause&gt;, the
corresponding &lt;expression&gt;s are evaluated from left
to right and the results of the last expression in the &lt;case clause&gt; are
returned as the results of the <tt>case</tt> expression.  Otherwise, the
comparison process continues.  If the result of
evaluating &lt;key&gt; is different from every datum in each set, then if
there is an <tt>else</tt> clause its expressions are evaluated and the
results of the last are the results of the <tt>case</tt> expression;
otherwise the <tt>case</tt> expression returns unspecified values.</p>
<p>
</p>

<tt>(case&nbsp;(*&nbsp;2&nbsp;3)
<p class=nopadding>&nbsp;&nbsp;((2&nbsp;3&nbsp;5&nbsp;7)&nbsp;'prime)</p>

<p class=nopadding>&nbsp;&nbsp;((1&nbsp;4&nbsp;6&nbsp;8&nbsp;9)&nbsp;'composite))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;composite</p>

<p class=nopadding>(case&nbsp;(car&nbsp;'(c&nbsp;d))</p>

<p class=nopadding>&nbsp;&nbsp;((a)&nbsp;'a)</p>

<p class=nopadding>&nbsp;&nbsp;((b)&nbsp;'b))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<em>unspecified</em></p>

<p class=nopadding>(case&nbsp;(car&nbsp;'(c&nbsp;d))</p>

<p class=nopadding>&nbsp;&nbsp;((a&nbsp;e&nbsp;i&nbsp;o&nbsp;u)&nbsp;'vowel)</p>

<p class=nopadding>&nbsp;&nbsp;((w&nbsp;y)&nbsp;'semivowel)</p>

<p class=nopadding>&nbsp;&nbsp;(else&nbsp;'consonant))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;consonant</p>
<p></tt></p>
<p>
The last &lt;expression&gt; of a &lt;case clause&gt; is in tail
context if the <tt>case</tt> expression itself is; see
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.20">11.20</a>.</p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_388"></a>and<i> &lt;test<sub>1</sub>&gt; <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>The &lt;test&gt;s must be expressions.</p>
<p>
<em>Semantics: </em>If there are no &lt;test&gt;s, <tt>#t</tt> is returned.
Otherwise, the &lt;test&gt; expressions are evaluated from left to
right until a &lt;test&gt; returns <tt>#f</tt> or the last
&lt;test&gt; is reached.  In the former case, the <tt>and</tt> expression
returns <tt>#f</tt> without evaluating the remaining expressions.
In the latter case, the last expression is evaluated and its values
are returned.</p>
<p>
</p>

<tt>(and&nbsp;(=&nbsp;2&nbsp;2)&nbsp;(&gt;&nbsp;2&nbsp;1))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(and&nbsp;(=&nbsp;2&nbsp;2)&nbsp;(&lt;&nbsp;2&nbsp;1))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(and&nbsp;1&nbsp;2&nbsp;'c&nbsp;'(f&nbsp;g))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(f&nbsp;g)</p>

<p class=nopadding>(and)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>
<p></tt></p>
<p>
The <tt>and</tt> keyword could be defined in terms of <tt>if</tt> using <tt>syntax-rules</tt> (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.19">11.19</a>) as follows:</p>
<p>
</p>

<tt>(define-syntax&nbsp;<tt>and</tt>
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((and)&nbsp;<tt>#t</tt>)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((and&nbsp;test)&nbsp;test)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((and&nbsp;test1&nbsp;test2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;test1&nbsp;(and&nbsp;test2&nbsp;...)&nbsp;<tt>#f</tt>))))</p>
<p></tt></p>
<p>
The last &lt;test&gt; expression is in tail context if the <tt>and</tt>
expression itself is; see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.20">11.20</a>.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_390"></a>or<i> &lt;test<sub>1</sub>&gt; <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>The &lt;test&gt;s must be expressions.</p>
<p>
<em>Semantics: </em>If there are no &lt;test&gt;s, <tt>#f</tt> is returned.
Otherwise, the &lt;test&gt; expressions are evaluated from left to
right until a &lt;test&gt; returns a true value <i>val</i>
(see section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.7">5.7</a>) or the last
&lt;test&gt; is reached.  In the former case, the <tt>or</tt> expression
returns <i>val</i> without evaluating the remaining expressions.
In the latter case, the last expression is evaluated and its values
are returned.</p>
<p>
</p>

<tt>(or&nbsp;(=&nbsp;2&nbsp;2)&nbsp;(&gt;&nbsp;2&nbsp;1))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(or&nbsp;(=&nbsp;2&nbsp;2)&nbsp;(&lt;&nbsp;2&nbsp;1))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(or&nbsp;<tt>#f</tt>&nbsp;<tt>#f</tt>&nbsp;<tt>#f</tt>)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(or&nbsp;'(b&nbsp;c)&nbsp;(/&nbsp;3&nbsp;0))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(b&nbsp;c)</p>
<p></tt></p>
<p>
The <tt>or</tt> keyword could be defined in terms of <tt>if</tt> using <tt>syntax-rules</tt> (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.19">11.19</a>) as follows:</p>
<p>
</p>

<tt>(define-syntax&nbsp;<tt>or</tt>
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((or)&nbsp;<tt>#f</tt>)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((or&nbsp;test)&nbsp;test)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((or&nbsp;test1&nbsp;test2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((x&nbsp;test1))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;x&nbsp;x&nbsp;(or&nbsp;test2&nbsp;...))))))</p>
<p></tt></p>
<p>
The last &lt;test&gt; expression is in tail context if the <tt>or</tt>
expression itself is; see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.20">11.20</a>.
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.4.6"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.4.6">11.4.6&nbsp;&nbsp;Binding constructs</a></h3>
<p>The binding constructs described in this section
create local bindings for variables that are visible only in a
delimited region.  The syntax of the 
constructs
<tt>let</tt>, <tt>let*</tt>, <tt>letrec</tt>, and <tt>letrec*</tt>
is identical, but they differ in the regions<a name="node_idx_392"></a>(see section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.2">5.2</a>) they establish
for their variable bindings and in the order in which the values for
the bindings are computed.  In a <tt>let</tt> expression, the initial
values are computed before any of the variables become bound; in a
<tt>let*</tt> expression, the bindings and evaluations are performed
sequentially.  In a <tt>letrec</tt> or <tt>letrec*</tt>
expression, all the bindings are in
effect while their initial values are being computed, thus allowing
mutually recursive definitions.  In a <tt>letrec</tt> expression, the
initial values are computed before being assigned to the variables;
in a <tt>letrec*</tt>, the evaluations and assignments are performed
sequentially.</p>
<p>
In addition, the binding constructs <tt>let-values</tt> and <tt>let*-values</tt> generalize <tt>let</tt> and <tt>let*</tt> to allow multiple
variables to be bound to the results of expressions that evaluate to
multiple values.
They are analogous to <tt>let</tt> and <tt>let*</tt> in the
way they establish regions: in a <tt>let-values</tt> expression, the
initial values are computed before any of the variables become bound;
in a <tt>let*-values</tt> expression, the bindings are performed
sequentially. </p>
<p>
Sample definitions of all the binding forms of this section in terms
of simpler forms are in appendix&nbsp;<a href="r6rs-Z-H-16.html#node_chap_B">B</a>.</p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_394"></a>let<i> &lt;bindings&gt; &lt;body&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>&lt;Bindings&gt; must have the form
</p>

<tt>((&lt;variable<sub>1</sub>&gt;&nbsp;&lt;init<sub>1</sub>&gt;)&nbsp;<tt>...</tt>),<p></tt>
where each &lt;init&gt; is an expression, and &lt;body&gt; 
is as described in section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>.  
Any variable must not appear more than once in the &lt;variable&gt;s.</p>
<p>
<em>Semantics: </em>The &lt;init&gt;s are evaluated in the current environment (in some
unspecified order), the &lt;variable&gt;s are bound to fresh locations
holding the results, the &lt;body&gt; is evaluated in the extended
environment, and the values of the last expression of &lt;body&gt;
are returned.  Each binding of a &lt;variable&gt; has &lt;body&gt; as its
region.<a name="node_idx_396"></a></p>
<p>
</p>

<tt>(let&nbsp;((x&nbsp;2)&nbsp;(y&nbsp;3))
<p class=nopadding>&nbsp;&nbsp;(*&nbsp;x&nbsp;y))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;6</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;((x&nbsp;2)&nbsp;(y&nbsp;3))</p>

<p class=nopadding>&nbsp;&nbsp;(let&nbsp;((x&nbsp;7)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(z&nbsp;(+&nbsp;x&nbsp;y)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(*&nbsp;z&nbsp;x)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;35</p>
<p></tt></p>
<p>
See also named <tt>let</tt>, section <a href="r6rs-Z-H-14.html#node_sec_11.16">11.16</a>.</p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_398"></a>let*<i> &lt;bindings&gt; &lt;body&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>&lt;Bindings&gt; must have the form
</p>

<tt>((&lt;variable<sub>1</sub>&gt;&nbsp;&lt;init<sub>1</sub>&gt;)&nbsp;<tt>...</tt>),<p></tt>
where each &lt;init&gt; is an expression, and &lt;body&gt; 
is as described in section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>.</p>
<p>
<em>Semantics: </em>The <tt>let*</tt> form is similar to <tt>let</tt>, but the &lt;init&gt;s are
evaluated and bindings created sequentially from left to right, with
the region<a name="node_idx_400"></a>of each binding including the bindings to
its right as well as &lt;body&gt;.  Thus the second &lt;init&gt; is evaluated
in an environment in which the first binding is visible and initialized,
and so on.</p>
<p>
</p>

<tt>(let&nbsp;((x&nbsp;2)&nbsp;(y&nbsp;3))
<p class=nopadding>&nbsp;&nbsp;(let*&nbsp;((x&nbsp;7)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(z&nbsp;(+&nbsp;x&nbsp;y)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(*&nbsp;z&nbsp;x)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;70</p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
While the variables bound by a <tt>let</tt> expression must be distinct,
the variables bound by a <tt>let*</tt> expression need not be distinct.
</blockquote>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_402"></a>letrec<i> &lt;bindings&gt; &lt;body&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>&lt;Bindings&gt; must have the form
</p>

<tt>((&lt;variable<sub>1</sub>&gt;&nbsp;&lt;init<sub>1</sub>&gt;)&nbsp;<tt>...</tt>),<p></tt>
where each &lt;init&gt; is an expression, and &lt;body&gt; 
is as described in section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>.  Any
variable must not appear more than once in the
&lt;variable&gt;s.</p>
<p>
<em>Semantics: </em>The &lt;variable&gt;s are bound to fresh locations, the &lt;init&gt;s
are evaluated in the resulting environment (in
some unspecified order), each &lt;variable&gt; is assigned to the result
of the corresponding &lt;init&gt;, the &lt;body&gt; is evaluated in the
resulting environment, and the values of the last expression in
&lt;body&gt; are returned.  Each binding of a &lt;variable&gt; has the
entire <tt>letrec</tt> expression as its region<a name="node_idx_404"></a>, making it possible to
define mutually recursive procedures.</p>
<p>
</p>

<tt>(letrec&nbsp;((even?
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(n)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(zero?&nbsp;n)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(odd?&nbsp;(-&nbsp;n&nbsp;1)))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(odd?</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(n)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(zero?&nbsp;n)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(even?&nbsp;(-&nbsp;n&nbsp;1))))))</p>

<p class=nopadding>&nbsp;&nbsp;(even?&nbsp;88))&nbsp;&nbsp;&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>
<p></tt></p>
<p>
It should be possible
to evaluate each &lt;init&gt; without assigning or referring to the
value of any &lt;variable&gt;.  In the most
common uses of <tt>letrec</tt>, all the &lt;init&gt;s are <tt>lambda</tt> expressions
and the restriction is satisfied automatically.
Another restriction is that the continuation of each &lt;init&gt; should not be invoked
more than once.</p>
<p>
<em>Implementation responsibilities: </em>Implementations must detect references to a &lt;variable&gt; during the
evaluation of the &lt;init&gt; expressions (using one particular
evaluation order and order of evaluating the &lt;init&gt; expressions).
If an implementation detects such a violation of the
restriction, it must raise an exception with condition type
<tt>&amp;assertion</tt>.
Implementations may or may not detect that the continuation of each
&lt;init&gt; is invoked more than once.  However, if the
implementation detects this, it must raise an exception with condition
type <tt>&amp;assertion</tt>.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_406"></a>letrec*<i> &lt;bindings&gt; &lt;body&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>&lt;Bindings&gt; must have the form
</p>

<tt>((&lt;variable<sub>1</sub>&gt;&nbsp;&lt;init<sub>1</sub>&gt;)&nbsp;<tt>...</tt>),<p></tt>
where each &lt;init&gt; is an expression, and &lt;body&gt; 
is as described in section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>. 
Any variable must not appear more than once in the
&lt;variable&gt;s.</p>
<p>
<em>Semantics: </em>The &lt;variable&gt;s are bound to fresh locations,
each &lt;variable&gt; is assigned in left-to-right order to the
result of evaluating the corresponding &lt;init&gt;, the &lt;body&gt; is
evaluated in the resulting environment, and the values of the last
expression in &lt;body&gt; are returned. 
Despite the left-to-right evaluation and assignment order, each binding of
a &lt;variable&gt; has the entire <tt>letrec*</tt> expression as its
region<a name="node_idx_408"></a>, making it possible to define mutually recursive
procedures.</p>
<p>
</p>

<tt>(letrec*&nbsp;((p
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;1&nbsp;(q&nbsp;(-&nbsp;x&nbsp;1)))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(q</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(y)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(zero?&nbsp;y)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;1&nbsp;(p&nbsp;(-&nbsp;y&nbsp;1))))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(x&nbsp;(p&nbsp;5))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(y&nbsp;x))</p>

<p class=nopadding>&nbsp;&nbsp;y)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;5</p>
<p></tt></p>
<p>
It must be possible
to evaluate each &lt;init&gt; without assigning or referring to the value
of the corresponding &lt;variable&gt; or the &lt;variable&gt; of any of
the bindings that follow it in &lt;bindings&gt;.
Another restriction is that the continuation of each &lt;init&gt; should not be invoked
more than once.</p>
<p>
<em>Implementation responsibilities: </em>Implementations must, during the evaluation of an
&lt;init&gt; expression, detect references to the
value of the corresponding &lt;variable&gt; or the &lt;variable&gt; of
any of the bindings that follow it in &lt;bindings&gt;.
If an implementation detects such a
violation of the restriction, it must raise an exception with
condition type <tt>&amp;assertion</tt>.  Implementations may or may not
detect that the continuation of each &lt;init&gt; is invoked more than
once.  However, if the implementation detects this, it must raise an
exception with condition type <tt>&amp;assertion</tt>.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_410"></a>let-values<i> &lt;mv-bindings&gt; &lt;body&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>&lt;Mv-bindings&gt; must have the form
</p>

<tt>((&lt;formals<sub>1</sub>&gt;&nbsp;&lt;init<sub>1</sub>&gt;)&nbsp;<tt>...</tt>),<p></tt>
where each &lt;init&gt; is an expression, and &lt;body&gt; 
is as described in section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>.  
Any variable must not appear more
than once in the set of &lt;formals&gt;.</p>
<p>
<em>Semantics: </em>The &lt;init&gt;s are evaluated in the current environment
(in some unspecified order), and the variables occurring in the
&lt;formals&gt; are bound to fresh locations containing the values
returned by the &lt;init&gt;s, where the &lt;formals&gt; are matched
to the return values in the same way that the &lt;formals&gt; in a
<tt>lambda</tt> expression are matched to the arguments in a procedure call.
Then, the &lt;body&gt; is evaluated in the extended environment, and the
values of the last expression of &lt;body&gt; are returned.
Each binding of a variable has &lt;body&gt; as its
region.<a name="node_idx_412"></a>If the &lt;formals&gt; do not match, an exception with condition type
<tt>&amp;assertion</tt> is raised.</p>
<p>
</p>

<tt>(let-values&nbsp;(((a&nbsp;b)&nbsp;(values&nbsp;1&nbsp;2))
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((c&nbsp;d)&nbsp;(values&nbsp;3&nbsp;4)))</p>

<p class=nopadding>&nbsp;&nbsp;(list&nbsp;a&nbsp;b&nbsp;c&nbsp;d))&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(1&nbsp;2&nbsp;3&nbsp;4)</p>

<p class=nopadding></p>

<p class=nopadding>(let-values&nbsp;(((a&nbsp;b&nbsp;.&nbsp;c)&nbsp;(values&nbsp;1&nbsp;2&nbsp;3&nbsp;4)))</p>

<p class=nopadding>&nbsp;&nbsp;(list&nbsp;a&nbsp;b&nbsp;c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(1&nbsp;2&nbsp;(3&nbsp;4))</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;((a&nbsp;'a)&nbsp;(b&nbsp;'b)&nbsp;(x&nbsp;'x)&nbsp;(y&nbsp;'y))</p>

<p class=nopadding>&nbsp;&nbsp;(let-values&nbsp;(((a&nbsp;b)&nbsp;(values&nbsp;x&nbsp;y))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((x&nbsp;y)&nbsp;(values&nbsp;a&nbsp;b)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(list&nbsp;a&nbsp;b&nbsp;x&nbsp;y)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(x&nbsp;y&nbsp;a&nbsp;b)</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_414"></a>let*-values<i> &lt;mv-bindings&gt; &lt;body&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>&lt;Mv-bindings&gt; must have the form
</p>

<tt>((&lt;formals<sub>1</sub>&gt;&nbsp;&lt;init<sub>1</sub>&gt;)&nbsp;<tt>...</tt>),<p></tt>
where each &lt;init&gt; is an expression, and &lt;body&gt; 
is as described in section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>.
In each &lt;formals&gt;, any variable must not appear more than once.</p>
<p>
<em>Semantics: </em>The <tt>let*-values</tt> form is similar to <tt>let-values</tt>, but the &lt;init&gt;s are
evaluated and bindings created sequentially from left to right, with
the region<a name="node_idx_416"></a>of the bindings of each &lt;formals&gt; including
the bindings to its right as well as &lt;body&gt;. 
Thus the second &lt;init&gt; is evaluated in an environment in which the
bindings of the first &lt;formals&gt; is visible and initialized, and so
on.</p>
<p>
</p>

<tt>(let&nbsp;((a&nbsp;'a)&nbsp;(b&nbsp;'b)&nbsp;(x&nbsp;'x)&nbsp;(y&nbsp;'y))
<p class=nopadding>&nbsp;&nbsp;(let*-values&nbsp;(((a&nbsp;b)&nbsp;(values&nbsp;x&nbsp;y))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((x&nbsp;y)&nbsp;(values&nbsp;a&nbsp;b)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(list&nbsp;a&nbsp;b&nbsp;x&nbsp;y)))&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(x&nbsp;y&nbsp;x&nbsp;y)</p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
While all of the variables bound by a <tt>let-values</tt> expression
must be distinct, the variables bound by different &lt;formals&gt; of a
<tt>let*-values</tt> expression need not be distinct.
</blockquote><p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.4.7"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.4.7">11.4.7&nbsp;&nbsp;Sequencing</a></h3>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_418"></a>begin<i> &lt;form&gt; <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<div align=left><tt>(<a name="node_idx_420"></a>begin<i> &lt;expression&gt; &lt;expression&gt; <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
The &lt;begin&gt; keyword has two different roles, depending on its
context:
</p>
<ul>
<li><p>It may appear as a form in a &lt;body&gt; (see
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.3">11.3</a>), &lt;library body&gt; (see
section&nbsp;<a href="r6rs-Z-H-10.html#node_sec_7.1">7.1</a>), or &lt;top-level body&gt; (see
chapter&nbsp;<a href="r6rs-Z-H-11.html#node_chap_8">8</a>), or directly nested in a <tt>begin</tt>
form that appears in a body.  In this case, the <tt>begin</tt> form
must have the shape specified in the first header line.  This use of
<tt>begin</tt> acts as a <a name="node_idx_422"></a><em>splicing</em> form&mdash;the forms inside
the &lt;body&gt; are spliced into the surrounding body, as if the
<tt>begin</tt> wrapper were not actually present.</p>
<p>
A <tt>begin</tt> form in a &lt;body&gt; or &lt;library body&gt; must
be non-empty if it appears after the first &lt;expression&gt;
within the body.
</p>
<li><p>It may appear as an ordinary expression and must have the shape
specified in the second header line.  In this case, the
&lt;expression&gt;s are evaluated sequentially from left to right,
and the values of the last &lt;expression&gt; are returned.
This expression type is used to sequence side effects such as
assignments or input
and output.
</p>
</ul><p></p>
<p>
</p>

<tt>(define&nbsp;x&nbsp;0)
<p class=nopadding></p>

<p class=nopadding>(begin&nbsp;(set!&nbsp;x&nbsp;5)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;x&nbsp;1))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;6</p>

<p class=nopadding></p>

<p class=nopadding>(begin&nbsp;(display&nbsp;&quot;4&nbsp;plus&nbsp;1&nbsp;equals&nbsp;&quot;)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(display&nbsp;(+&nbsp;4&nbsp;1)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>&nbsp;<em>&nbsp;and&nbsp;prints</em>&nbsp;&nbsp;4&nbsp;plus&nbsp;1&nbsp;equals&nbsp;5</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.5"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.5">11.5&nbsp;&nbsp;Equivalence predicates</a></h2>
<p></p>
<p>
A <a name="node_idx_424"></a><em>predicate</em> is a procedure that always returns a boolean
value (<tt>#t</tt> or <tt>#f</tt>).  An <a name="node_idx_426"></a><em>equivalence predicate</em> is
the computational analogue of a mathematical equivalence relation (it is
symmetric, reflexive, and transitive).  Of the equivalence predicates
described in this section, <tt>eq?</tt> is the finest or most
discriminating, and <tt>equal?</tt> is the coarsest.  The <tt>eqv?</tt> predicate is
slightly less discriminating than <tt>eq?</tt>.  </p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_428"></a>eqv?<i> <i>obj<sub>1</sub></i> <i>obj<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <tt>eqv?</tt> procedure defines a useful equivalence relation on objects.
Briefly, it returns <tt>#t</tt> if <i>obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> should
normally be regarded as the same object and <tt>#f</tt> otherwise.  This relation is left slightly
open to interpretation, but the following partial specification of
<tt>eqv?</tt> must hold for all implementations.</p>
<p>
The <tt>eqv?</tt> procedure returns <tt>#t</tt> if one of the following holds:</p>
<p>
</p>
<ul>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are both booleans and are the same
according to the <tt>boolean=?</tt> procedure (section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.8">11.8</a>).</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are both symbols and are the same
according to the <tt>symbol=?</tt> procedure (section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.10">11.10</a>).</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are both exact<a name="node_idx_430"></a>number objects
and are numerically equal (see <tt>=</tt>, 
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.7">11.7</a>).</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are both inexact<a name="node_idx_432"></a>number objects, are numerically
equal (see <tt>=</tt>, section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.7">11.7</a>), and
yield the same results (in the sense of <tt>eqv?</tt>) when passed
as arguments to any other procedure that can be defined
as a finite composition of Scheme's standard arithmetic
procedures.</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are both characters and are the same
character according to the <tt>char=?</tt> procedure
(section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.11">11.11</a>).</p>
<p>
</p>
<li><p>Both <i>obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are the empty list.</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are objects such as pairs, vectors, bytevectors
(library chapter&nbsp;on &ldquo;Bytevectors&rdquo;),
strings, hashtables, records (library
chapter&nbsp;on &ldquo;Records&rdquo;), ports (library
section&nbsp;on &ldquo;Port I/O&rdquo;), or hashtables
(library chapter&nbsp;on &ldquo;Hash tables&rdquo;) that
refer to the same locations in the store (section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.10">5.10</a>).</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are record-type descriptors that are
specified to be <tt>eqv?</tt> in library
section&nbsp;on &ldquo;Procedural layer&rdquo;.
</p>
</ul><p></p>
<p>
The <tt>eqv?</tt> procedure returns <tt>#f</tt> if one of the following holds:</p>
<p>
</p>
<ul>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are of different types
(section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.1">11.1</a>).</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are booleans for which the <tt>boolean=?</tt> procedure returns <tt>#f</tt>.</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are symbols for which the <tt>symbol=?</tt> procedure returns <tt>#f</tt>.</p>
<p>
</p>
<li><p>One of <i>obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> is an exact number object but the other is
an inexact number object.</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are rational number objects for which the <tt>=</tt> procedure
returns <tt>#f</tt>.</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> yield different results (in the sense of
<tt>eqv?</tt>) when passed as arguments to any other procedure
that can be defined as a finite composition of Scheme's
standard arithmetic procedures.</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are characters for which the <tt>char=?</tt>
procedure returns <tt>#f</tt>.</p>
<p>
</p>
<li><p>One of <i>obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> is the empty list, but the other is not.</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are objects such as pairs, vectors,
bytevectors (library
chapter&nbsp;on &ldquo;Bytevectors&rdquo;), strings,
records (library
chapter&nbsp;on &ldquo;Records&rdquo;), ports (library
section&nbsp;on &ldquo;Port I/O&rdquo;), or hashtables
(library chapter&nbsp;on &ldquo;Hashtables&rdquo;) that
refer to distinct locations.</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are pairs, vectors, strings, or
records, or hashtables, where the applying the same accessor (i.e.
  <tt>car</tt>, <tt>cdr</tt>, <tt>vector-ref</tt>, <tt>string-ref</tt>, or record
accessors) to both yields results for which <tt>eqv?</tt> returns
<tt>#f</tt>.</p>
<p>
</p>
<li><p><i>Obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> are procedures that would behave differently
(return different values or have different side effects) for some arguments.</p>
<p>
</p>
</ul><p></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The <tt>eqv?</tt> procedure returning <tt>#t</tt> when <i>obj<sub>1</sub></i> and
<i>obj<sub>2</sub></i> are number objects does not imply that <tt>=</tt> would also
return <tt>#t</tt> when called with <i>obj<sub>1</sub></i> and <i>obj<sub>2</sub></i> as
arguments.
</blockquote><p>
</p>

<tt>(eqv?&nbsp;'a&nbsp;'a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(eqv?&nbsp;'a&nbsp;'b)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(eqv?&nbsp;2&nbsp;2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(eqv?&nbsp;'()&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(eqv?&nbsp;100000000&nbsp;100000000)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(eqv?&nbsp;(cons&nbsp;1&nbsp;2)&nbsp;(cons&nbsp;1&nbsp;2))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(eqv?&nbsp;(lambda&nbsp;()&nbsp;1)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()&nbsp;2))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(eqv?&nbsp;#f&nbsp;'nil)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>
<p></tt></p>
<p>
The following examples illustrate cases in which the above rules do
not fully specify the behavior of <tt>eqv?</tt>.  All that can be said
about such cases is that the value returned by <tt>eqv?</tt> must be a
boolean.</p>
<p>
</p>

<tt>(let&nbsp;((p&nbsp;(lambda&nbsp;(x)&nbsp;x)))
<p class=nopadding>&nbsp;&nbsp;(eqv?&nbsp;p&nbsp;p))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eqv?&nbsp;&quot;&quot;&nbsp;&quot;&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eqv?&nbsp;'#()&nbsp;'#())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eqv?&nbsp;(lambda&nbsp;(x)&nbsp;x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(x)&nbsp;x))&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eqv?&nbsp;(lambda&nbsp;(x)&nbsp;x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(y)&nbsp;y))&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eqv?&nbsp;+nan.0&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<i>unspecified</i></p>
<p></tt></p>
<p>
The next set of examples shows the use of <tt>eqv?</tt> with procedures
that have local state.  Calls to <tt>gen-counter</tt> must return a
distinct procedure every time, since each procedure has its own
internal counter.  Calls to <tt>gen-loser</tt> return procedures that
behave equivalently when called.  However, <tt>eqv?</tt> may
not detect this equivalence.</p>
<p>
</p>

<tt>(define&nbsp;gen-counter
<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((n&nbsp;0))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()&nbsp;(set!&nbsp;n&nbsp;(+&nbsp;n&nbsp;1))&nbsp;n))))</p>

<p class=nopadding>(let&nbsp;((g&nbsp;(gen-counter)))</p>

<p class=nopadding>&nbsp;&nbsp;(eqv?&nbsp;g&nbsp;g))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eqv?&nbsp;(gen-counter)&nbsp;(gen-counter))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(define&nbsp;gen-loser</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((n&nbsp;0))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()&nbsp;(set!&nbsp;n&nbsp;(+&nbsp;n&nbsp;1))&nbsp;27))))</p>

<p class=nopadding>(let&nbsp;((g&nbsp;(gen-loser)))</p>

<p class=nopadding>&nbsp;&nbsp;(eqv?&nbsp;g&nbsp;g))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eqv?&nbsp;(gen-loser)&nbsp;(gen-loser))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding></p>

<p class=nopadding>(letrec&nbsp;((f&nbsp;(lambda&nbsp;()&nbsp;(if&nbsp;(eqv?&nbsp;f&nbsp;g)&nbsp;'both&nbsp;'f)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g&nbsp;(lambda&nbsp;()&nbsp;(if&nbsp;(eqv?&nbsp;f&nbsp;g)&nbsp;'both&nbsp;'g))))</p>

<p class=nopadding>&nbsp;&nbsp;(eqv?&nbsp;f&nbsp;g))&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding></p>

<p class=nopadding>(letrec&nbsp;((f&nbsp;(lambda&nbsp;()&nbsp;(if&nbsp;(eqv?&nbsp;f&nbsp;g)&nbsp;'f&nbsp;'both)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g&nbsp;(lambda&nbsp;()&nbsp;(if&nbsp;(eqv?&nbsp;f&nbsp;g)&nbsp;'g&nbsp;'both))))</p>

<p class=nopadding>&nbsp;&nbsp;(eqv?&nbsp;f&nbsp;g))&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>
<p></tt></p>
<p>
Implementations may
share structure between constants where appropriate.
Furthermore, a constant may be copied at any time by the implementation so
as to exist simultaneously in different sets of locations, as noted in
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.1">11.4.1</a>.
Thus the value of <tt>eqv?</tt> on constants is sometimes
implementation-dependent.</p>
<p>
</p>

<tt>(eqv?&nbsp;'(a)&nbsp;'(a))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i>
<p class=nopadding>(eqv?&nbsp;&quot;a&quot;&nbsp;&quot;a&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eqv?&nbsp;'(b)&nbsp;(cdr&nbsp;'(a&nbsp;b)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(let&nbsp;((x&nbsp;'(a)))</p>

<p class=nopadding>&nbsp;&nbsp;(eqv?&nbsp;x&nbsp;x))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_434"></a>eq?<i> <i>obj<sub>1</sub></i> <i>obj<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <tt>eq?</tt> predicate is similar to <tt>eqv?</tt> except that in some cases it is
capable of discerning distinctions finer than those detectable by
<tt>eqv?</tt>.</p>
<p>
The <tt>eq?</tt> and <tt>eqv?</tt> predicates are guaranteed to have the
same behavior on symbols, booleans, the empty list, pairs, procedures,
non-empty strings, bytevectors, and vectors, and records.  The
behavior of <tt>eq?</tt> on number objects and characters is
implementation-dependent, but it always returns either <tt>#t</tt> or
<tt>#f</tt>, and returns <tt>#t</tt> only when <tt>eqv?</tt> would also
return <tt>#t</tt>.  The <tt>eq?</tt> predicate may also behave differently
from <tt>eqv?</tt> on empty vectors, empty bytevectors, and empty strings.</p>
<p>
</p>

<tt>(eq?&nbsp;'a&nbsp;'a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(eq?&nbsp;'(a)&nbsp;'(a))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eq?&nbsp;(list&nbsp;'a)&nbsp;(list&nbsp;'a))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(eq?&nbsp;&quot;a&quot;&nbsp;&quot;a&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eq?&nbsp;&quot;&quot;&nbsp;&quot;&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eq?&nbsp;'()&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(eq?&nbsp;2&nbsp;2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eq?&nbsp;#<tt>\</tt>A&nbsp;#<tt>\</tt>A)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(eq?&nbsp;car&nbsp;car)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(let&nbsp;((n&nbsp;(+&nbsp;2&nbsp;3)))</p>

<p class=nopadding>&nbsp;&nbsp;(eq?&nbsp;n&nbsp;n))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(let&nbsp;((x&nbsp;'(a)))</p>

<p class=nopadding>&nbsp;&nbsp;(eq?&nbsp;x&nbsp;x))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(let&nbsp;((x&nbsp;'#()))</p>

<p class=nopadding>&nbsp;&nbsp;(eq?&nbsp;x&nbsp;x))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(let&nbsp;((p&nbsp;(lambda&nbsp;(x)&nbsp;x)))</p>

<p class=nopadding>&nbsp;&nbsp;(eq?&nbsp;p&nbsp;p))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>
<p></tt></p>
<p>
</p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_436"></a>equal?<i> <i>obj<sub>1</sub></i> <i>obj<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <tt>equal?</tt>  predicate returns <tt>#t</tt> if and only if the
(possibly infinite) unfoldings of its arguments into regular trees are
equal as ordered trees.</p>
<p>
The <tt>equal?</tt> predicate treats pairs and vectors
as nodes with outgoing edges, uses <tt>string=?</tt> to compare strings, uses <tt>bytevector=?</tt> to compare bytevectors (see library chapter&nbsp;on &ldquo;Bytevectors&rdquo;),
and uses <tt>eqv?</tt> to compare other nodes.</p>
<p>
</p>

<tt>(equal?&nbsp;'a&nbsp;'a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(equal?&nbsp;'(a)&nbsp;'(a))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(equal?&nbsp;'(a&nbsp;(b)&nbsp;c)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(a&nbsp;(b)&nbsp;c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(equal?&nbsp;&quot;abc&quot;&nbsp;&quot;abc&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(equal?&nbsp;2&nbsp;2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(equal?&nbsp;(make-vector&nbsp;5&nbsp;'a)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(make-vector&nbsp;5&nbsp;'a))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(equal?&nbsp;'#vu8(1&nbsp;2&nbsp;3&nbsp;4&nbsp;5)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(u8-list-&gt;bytevector</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(1&nbsp;2&nbsp;3&nbsp;4&nbsp;5))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(equal?&nbsp;(lambda&nbsp;(x)&nbsp;x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(y)&nbsp;y))&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding></p>

<p class=nopadding>(let*&nbsp;((x&nbsp;(list&nbsp;'a))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(y&nbsp;(list&nbsp;'a))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(z&nbsp;(list&nbsp;x&nbsp;y)))</p>

<p class=nopadding>&nbsp;&nbsp;(list&nbsp;(equal?&nbsp;z&nbsp;(list&nbsp;y&nbsp;x))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(equal?&nbsp;z&nbsp;(list&nbsp;x&nbsp;x))))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(<tt>#t</tt>&nbsp;<tt>#t</tt>)</p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The <tt>equal?</tt> procedure must always terminate, even if its
arguments contain cycles.
</blockquote><p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.6"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.6">11.6&nbsp;&nbsp;Procedure predicate</a></h2>
<p></p>
<p></p>
<div align=left><tt>(<a name="node_idx_438"></a>procedure?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if <i>obj</i> is a procedure, otherwise returns <tt>#f</tt>.</p>
<p>
</p>

<tt>(procedure?&nbsp;car)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(procedure?&nbsp;'car)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(procedure?&nbsp;(lambda&nbsp;(x)&nbsp;(*&nbsp;x&nbsp;x)))&nbsp;&nbsp;&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(procedure?&nbsp;'(lambda&nbsp;(x)&nbsp;(*&nbsp;x&nbsp;x)))&nbsp;&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.7"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7">11.7&nbsp;&nbsp;Arithmetic</a></h2>
<p></p>
<p>
The procedures described here implement arithmetic that is
generic over
the numerical tower described in chapter&nbsp;<a href="r6rs-Z-H-6.html#node_chap_3">3</a>.
The generic procedures described in this section
accept both exact and inexact number objects as arguments,
performing coercions and selecting the appropriate operations
as determined by the numeric subtypes of their arguments.</p>
<p>
Library chapter&nbsp;on &ldquo;Arithmetic&rdquo; describes
libraries that define other numerical procedures.</p>
<p>
</p>
<a name="node_sec_11.7.1"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7.1">11.7.1&nbsp;&nbsp;Propagation of exactness and inexactness</a></h3>
<p></p>
<p>
The procedures listed below must return the mathematically correct exact result
provided all their arguments are exact:</p>
<p>
</p>

<tt>+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
<p class=nopadding>max&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;min&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abs</p>

<p class=nopadding>numerator&nbsp;&nbsp;&nbsp;&nbsp;denominator&nbsp;&nbsp;gcd</p>

<p class=nopadding>lcm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;floor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ceiling</p>

<p class=nopadding>truncate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;round&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rationalize</p>

<p class=nopadding>real-part&nbsp;&nbsp;&nbsp;&nbsp;imag-part&nbsp;&nbsp;&nbsp;&nbsp;make-rectangular</p>
<p></tt></p>
<p>
The procedures listed below must return the correct exact result
provided all their arguments are exact, and no divisors are zero:</p>
<p>
</p>

<tt>/
<p class=nopadding>div&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mod&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;div-and-mod</p>

<p class=nopadding>div0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mod0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;div0-and-mod0</p>
<p></tt></p>
<p>
Moreover, the procedure <tt>expt</tt> must return the correct exact
result provided its first argument is an exact real number object and
its second argument is an exact integer object.</p>
<p>
The general rule is that the generic operations return the correct
exact result when all of their arguments are exact and the result is
mathematically well-defined, but return an inexact result when any
argument is inexact.  Exceptions to this rule include
<tt>sqrt</tt>, <tt>exp</tt>, <tt>log</tt>,
<tt>sin</tt>, <tt>cos</tt>, <tt>tan</tt>,
<tt>asin</tt>, <tt>acos</tt>, <tt>atan</tt>,
<tt>expt</tt>, <tt>make-polar</tt>, <tt>magnitude</tt>, and <tt>angle</tt>, which
may (but are not required to) return inexact results even when
given exact arguments, as indicated in the specification of these
procedures.</p>
<p>
One general exception to the rule above is that an implementation may
return an exact result despite inexact arguments if that exact result
would be the correct result for all possible substitutions of exact
arguments for the inexact ones.  An example is <tt>(* 1.0 0)</tt> which
may return either <tt>0</tt> (exact) or <tt>0.0</tt> (inexact).</p>
<p>
</p>
<a name="node_sec_11.7.2"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7.2">11.7.2&nbsp;&nbsp;Representability of infinities and NaNs</a></h3>
<p></p>
<p>
The specification of the numerical operations is written as though
infinities and NaNs are representable, and specifies many operations
with respect to these number objects in ways that are consistent with the
IEEE-754 standard for binary floating-point arithmetic.  
An implementation of Scheme may or may not represent infinities and
NaNs; however,
an implementation must raise a continuable exception with
condition type <tt>&amp;no-infinities</tt> or <tt>&amp;no-nans</tt> (respectively;
see library section&nbsp;on &ldquo;Flonums&rdquo;)
whenever it is unable to represent an infinity or NaN as specified. 
In this case, the continuation of the exception
handler is the continuation that otherwise would have received
the infinity or NaN value.  This requirement also applies to
conversions between number objects and external representations, including
the reading of program source code.</p>
<p>
</p>
<a name="node_sec_11.7.3"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7.3">11.7.3&nbsp;&nbsp;Semantics of common operations</a></h3>
<p>Some operations are the semantic basis for several arithmetic
procedures.  The behavior of these operations is described in this
section for later reference.</p>
<p>
</p>
<a name="node_sec_11.7.3.1"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7.3.1">11.7.3.1&nbsp;&nbsp;Integer division</a></h4>
<p></p>
<p>
Scheme's operations for performing integer
division rely on mathematical operations <em>d</em><em>i</em><em>v</em>,
<em>m</em><em>o</em><em>d</em>, <em>d</em><em>i</em><em>v</em><sub>0</sub>, and
<em>m</em><em>o</em><em>d</em><sub>0</sub>, that are defined as follows:</p>
<p>
<em>d</em><em>i</em><em>v</em>, <em>m</em><em>o</em><em>d</em>, <em>d</em><em>i</em><em>v</em><sub>0</sub>, and <em>m</em><em>o</em><em>d</em><sub>0</sub>
each accept two real numbers <em>x</em><sub>1</sub> and <em>x</em><sub>2</sub> as operands, where
<em>x</em><sub>2</sub> must be nonzero.</p>
<p>
<em>d</em><em>i</em><em>v</em> returns an integer, and <em>m</em><em>o</em><em>d</em> returns a real.
Their results are specified by
</p>
<a name="node_eqn_Temp_17"></a>
<div align=left><table width=100%>
<tr><td align=right>
<em>x</em><sub>1</sub>&nbsp;</td><td><table><tr><td align=center><em>d</em><em>i</em><em>v</em></td></tr></table></td><td>&nbsp;<em>x</em><sub>2</sub> </td><td align=center width=2%> = </td><td> <em>n</em><sub><em>d</em></sub></td></tr>
<tr><td align=right><em>x</em><sub>1</sub>&nbsp;</td><td><table><tr><td align=center><em>m</em><em>o</em><em>d</em></td></tr></table></td><td>&nbsp;<em>x</em><sub>2</sub> </td><td align=center width=2%> = </td><td> <em>x</em><sub><em>m</em></sub>
</td></tr>
</table></div><p>*
where
</p>
<div align=left><img src="r6rs-Z-G-2.gif" border="0" alt="[r6rs-Z-G-2.gif]"></div><p>
Examples:
</p>
<a name="node_eqn_Temp_18"></a>
<div align=left><table width=100%>
<tr><td align=right>
123&nbsp;</td><td><table><tr><td align=center><em>d</em><em>i</em><em>v</em></td></tr></table></td><td>&nbsp;10    </td><td align=center width=2%> = </td><td>  12</td></tr>
<tr><td align=right>123&nbsp;</td><td><table><tr><td align=center><em>m</em><em>o</em><em>d</em></td></tr></table></td><td>&nbsp;10    </td><td align=center width=2%> = </td><td>  3</td></tr>
<tr><td align=right>123&nbsp;</td><td><table><tr><td align=center><em>d</em><em>i</em><em>v</em></td></tr></table></td><td>&nbsp;</td><td><table><tr><td align=center></td><td><table><tr><td align=center>&minus;10</td></tr></table></td><td></td></tr></table></td><td>   </td><td align=center width=2%> = </td><td>  &minus;12</td></tr>
<tr><td align=right>123&nbsp;</td><td><table><tr><td align=center><em>m</em><em>o</em><em>d</em></td></tr></table></td><td>&nbsp;</td><td><table><tr><td align=center></td><td><table><tr><td align=center>&minus;10</td></tr></table></td><td></td></tr></table></td><td>   </td><td align=center width=2%> = </td><td>  3</td></tr>
<tr><td align=right>&minus;123&nbsp;</td><td><table><tr><td align=center><em>d</em><em>i</em><em>v</em></td></tr></table></td><td>&nbsp;10    </td><td align=center width=2%> = </td><td>  &minus;13</td></tr>
<tr><td align=right>&minus;123&nbsp;</td><td><table><tr><td align=center><em>m</em><em>o</em><em>d</em></td></tr></table></td><td>&nbsp;10    </td><td align=center width=2%> = </td><td>  7</td></tr>
<tr><td align=right>&minus;123&nbsp;</td><td><table><tr><td align=center><em>d</em><em>i</em><em>v</em></td></tr></table></td><td>&nbsp;</td><td><table><tr><td align=center></td><td><table><tr><td align=center>&minus;10</td></tr></table></td><td></td></tr></table></td><td>   </td><td align=center width=2%> = </td><td>  13</td></tr>
<tr><td align=right>&minus;123&nbsp;</td><td><table><tr><td align=center><em>m</em><em>o</em><em>d</em></td></tr></table></td><td>&nbsp;</td><td><table><tr><td align=center></td><td><table><tr><td align=center>&minus;10</td></tr></table></td><td></td></tr></table></td><td>   </td><td align=center width=2%> = </td><td>  7
</td></tr>
</table></div><p>*
<em>d</em><em>i</em><em>v</em><sub>0</sub> and <em>m</em><em>o</em><em>d</em><sub>0</sub> are like <em>d</em><em>i</em><em>v</em> and
<em>m</em><em>o</em><em>d</em>, except the result of <em>m</em><em>o</em><em>d</em><sub>0</sub> lies within a
half-open interval centered on zero.  The results are specified by
</p>
<a name="node_eqn_Temp_19"></a>
<div align=left><table width=100%>
<tr><td align=right>
<em>x</em><sub>1</sub>&nbsp;</td><td><table><tr><td align=center><em>d</em><em>i</em><em>v</em></td></tr></table></td><td><sub>0</sub>&nbsp;<em>x</em><sub>2</sub> </td><td align=center width=2%> = </td><td> <em>n</em><sub><em>d</em></sub></td></tr>
<tr><td align=right><em>x</em><sub>1</sub>&nbsp;</td><td><table><tr><td align=center><em>m</em><em>o</em><em>d</em></td></tr></table></td><td><sub>0</sub>&nbsp;<em>x</em><sub>2</sub> </td><td align=center width=2%> = </td><td> <em>x</em><sub><em>m</em></sub>
</td></tr>
</table></div><p>*
where:
</p>
<div align=left><img src="r6rs-Z-G-3.gif" border="0" alt="[r6rs-Z-G-3.gif]"></div><p>
Examples:
</p>
<a name="node_eqn_Temp_20"></a>
<div align=left><table width=100%>
<tr><td align=right>
123&nbsp;</td><td><table><tr><td align=center><em>d</em><em>i</em><em>v</em></td></tr></table></td><td><sub>0</sub>&nbsp;10    </td><td align=center width=2%> = </td><td>  12</td></tr>
<tr><td align=right>123&nbsp;</td><td><table><tr><td align=center><em>m</em><em>o</em><em>d</em></td></tr></table></td><td><sub>0</sub>&nbsp;10    </td><td align=center width=2%> = </td><td>  3</td></tr>
<tr><td align=right>123&nbsp;</td><td><table><tr><td align=center><em>d</em><em>i</em><em>v</em></td></tr></table></td><td><sub>0</sub>&nbsp;</td><td><table><tr><td align=center></td><td><table><tr><td align=center>&minus;10</td></tr></table></td><td></td></tr></table></td><td>   </td><td align=center width=2%> = </td><td>  &minus;12</td></tr>
<tr><td align=right>123&nbsp;</td><td><table><tr><td align=center><em>m</em><em>o</em><em>d</em></td></tr></table></td><td><sub>0</sub>&nbsp;</td><td><table><tr><td align=center></td><td><table><tr><td align=center>&minus;10</td></tr></table></td><td></td></tr></table></td><td>   </td><td align=center width=2%> = </td><td>  3</td></tr>
<tr><td align=right>&minus;123&nbsp;</td><td><table><tr><td align=center><em>d</em><em>i</em><em>v</em></td></tr></table></td><td><sub>0</sub>&nbsp;10    </td><td align=center width=2%> = </td><td>  &minus;12</td></tr>
<tr><td align=right>&minus;123&nbsp;</td><td><table><tr><td align=center><em>m</em><em>o</em><em>d</em></td></tr></table></td><td><sub>0</sub>&nbsp;10    </td><td align=center width=2%> = </td><td>  &minus;3</td></tr>
<tr><td align=right>&minus;123&nbsp;</td><td><table><tr><td align=center><em>d</em><em>i</em><em>v</em></td></tr></table></td><td><sub>0</sub>&nbsp;</td><td><table><tr><td align=center></td><td><table><tr><td align=center>&minus;10</td></tr></table></td><td></td></tr></table></td><td>   </td><td align=center width=2%> = </td><td>  12</td></tr>
<tr><td align=right>&minus;123&nbsp;</td><td><table><tr><td align=center><em>m</em><em>o</em><em>d</em></td></tr></table></td><td><sub>0</sub>&nbsp;</td><td><table><tr><td align=center></td><td><table><tr><td align=center>&minus;10</td></tr></table></td><td></td></tr></table></td><td>   </td><td align=center width=2%> = </td><td>  &minus;3
</td></tr>
</table></div><p>*</p>
<p>
</p>
<a name="node_sec_11.7.3.2"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7.3.2">11.7.3.2&nbsp;&nbsp;Transcendental functions</a></h4>
<p></p>
<p>
In general, the transcendental functions log, sin<sup>&minus;1</sup>
(arcsine), cos<sup>&minus;1</sup> (arccosine), and tan<sup>&minus;1</sup> are multiply
defined.  The value of log <em>z</em> is defined to be the one whose
imaginary part lies in the range from &minus;<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"> (inclusive if &minus;0.0 is
distinguished, exclusive otherwise) to <img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"> (inclusive).  log 0 is
undefined.</p>
<p>
The value of log <em>z</em> for non-real <em>z</em> is defined in terms of log on real numbers as </p>
<p>
</p>
<div align=left><img src="r6rs-Z-G-4.gif" border="0" alt="[r6rs-Z-G-4.gif]"></div><p>
where <em>a</em><em>n</em><em>g</em><em>l</em><em>e</em>&nbsp;<em>z</em> is the angle of <em>z</em>  =  <em>a</em> &middot;  <em>e</em><sup><em>i</em><em>b</em></sup> specified
as:
</p>
<div class=mathdisplay align=left><table><tr><td></td><td><table><tr><td align=center></td><td><table><tr><td align=center><em>a</em><em>n</em><em>g</em><em>l</em><em>e</em></td></tr></table></td><td>&nbsp;<em>z</em>  =  <em>b</em> + 2<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"> <em>n</em></td></tr></table></td><td></td></tr></table></div>
<p class=noindent>
with &minus;<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"> &le; <em>a</em><em>n</em><em>g</em><em>l</em><em>e</em>&nbsp;<em>z</em>&le; <img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"> and <em>a</em><em>n</em><em>g</em><em>l</em><em>e</em>&nbsp;<em>z</em>  = 
<em>b</em> + 2<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"> <em>n</em> for some integer <em>n</em>.</p>
<p>
With the one-argument version of log defined this way, the values
of the two-argument-version of log, sin<sup>&minus;1</sup> <em>z</em>, cos<sup>&minus;1</sup> <em>z</em>,
tan<sup>&minus;1</sup> <em>z</em>, and the two-argument version of tan<sup>&minus;1</sup> are
according to the following formul&aelig;:
</p>
<a name="node_eqn_Temp_21"></a>
<div align=left><table width=100%>
<tr><td align=right>
log <em>z</em>&nbsp;<em>b</em> </td><td align=center width=2%> = </td><td> (</td><td><table><tr><td align=center>log <em>z</em></td></tr></table></td><td>/</td><td><table><tr><td align=center>log <em>b</em></td></tr></table></td><td>)</td></tr>
<tr><td align=right>sin<sup>&minus;1</sup> <em>z</em> </td><td align=center width=2%> = </td><td> &minus;<em>i</em> log (<em>i</em> <em>z</em>  +  (1 &minus; <em>z</em><sup>2</sup>)<sup>1/2</sup>)</td></tr>
<tr><td align=right>cos<sup>&minus;1</sup> <em>z</em> </td><td align=center width=2%> = </td><td> <img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"> / 2 &minus; sin<sup>&minus;1</sup> <em>z</em></td></tr>
<tr><td align=right>tan<sup>&minus;1</sup> <em>z</em> </td><td align=center width=2%> = </td><td> (log (1  +  <em>i</em> <em>z</em>) &minus; log (1 &minus; <em>i</em> <em>z</em>)) / (2 <em>i</em>)</td></tr>
<tr><td align=right>tan<sup>&minus;1</sup> <em>x</em>&nbsp;<em>y</em> </td><td align=center width=2%> = </td><td> </td><td><table><tr><td align=center><em>a</em><em>n</em><em>g</em><em>l</em><em>e</em></td></tr></table></td><td>(<em>x</em> +  <em>y</em><em>i</em>)
</td></tr>
</table></div><p>*</p>
<p>
The range of tan<sup>&minus;1</sup> <em>x</em>&nbsp;<em>y</em> is as in the following table. The
asterisk (*) indicates that the entry applies to implementations that
distinguish minus zero.</p>
<p>
</p>
<div align=center><table><tr><td>

<table border=0><tr><td valign=top ></td><td valign=top ><em>y</em> condition </td><td valign=top ><em>x</em> condition </td><td valign=top >range of result <em>r</em></td></tr>
<tr><td valign=top ></td><td valign=top ><em>y</em>  =  0.0 </td><td valign=top ><em>x</em> &gt; 0.0 </td><td valign=top >0.0</td></tr>
<tr><td valign=top >&lowast; </td><td valign=top ><em>y</em>  =   + 0.0  </td><td valign=top ><em>x</em> &gt; 0.0 </td><td valign=top > + 0.0</td></tr>
<tr><td valign=top >&lowast; </td><td valign=top ><em>y</em>  =  &minus;0.0 </td><td valign=top ><em>x</em> &gt; 0.0 </td><td valign=top >&minus;0.0</td></tr>
<tr><td valign=top ></td><td valign=top ><em>y</em> &gt; 0.0 </td><td valign=top ><em>x</em> &gt; 0.0 </td><td valign=top >0.0 &lt; <em>r</em> &lt; (<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]">/2)</td></tr>
<tr><td valign=top ></td><td valign=top ><em>y</em> &gt; 0.0 </td><td valign=top ><em>x</em>  =  0.0 </td><td valign=top >(<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]">/2)</td></tr>
<tr><td valign=top ></td><td valign=top ><em>y</em> &gt; 0.0 </td><td valign=top ><em>x</em> &lt; 0.0 </td><td valign=top >(<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]">/2) &lt; <em>r</em> &lt; <img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"></td></tr>
<tr><td valign=top ></td><td valign=top ><em>y</em>  =  0.0 </td><td valign=top ><em>x</em> &lt; 0 </td><td valign=top ><img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"></td></tr>
<tr><td valign=top >&lowast; </td><td valign=top ><em>y</em>  =   + 0.0 </td><td valign=top ><em>x</em> &lt; 0.0 </td><td valign=top ><img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"></td></tr>
<tr><td valign=top >&lowast; </td><td valign=top ><em>y</em>  =  &minus;0.0 </td><td valign=top ><em>x</em> &lt; 0.0 </td><td valign=top >&minus;<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"></td></tr>
<tr><td valign=top ></td><td valign=top ><em>y</em> &lt; 0.0 </td><td valign=top ><em>x</em> &lt; 0.0 </td><td valign=top >&minus;<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]">&lt; <em>r</em>&lt; &minus;(<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]">/2)</td></tr>
<tr><td valign=top ></td><td valign=top ><em>y</em> &lt; 0.0 </td><td valign=top ><em>x</em>  =  0.0 </td><td valign=top >&minus;(<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]">/2)</td></tr>
<tr><td valign=top ></td><td valign=top ><em>y</em> &lt; 0.0 </td><td valign=top ><em>x</em> &gt; 0.0 </td><td valign=top >&minus;(<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]">/2) &lt; <em>r</em>&lt; 0.0</td></tr>
<tr><td valign=top ></td><td valign=top ><em>y</em>  =  0.0 </td><td valign=top ><em>x</em>  =  0.0 </td><td valign=top >undefined</td></tr>
<tr><td valign=top >&lowast;</td><td valign=top ><em>y</em>  =   + 0.0 </td><td valign=top ><em>x</em>  =   + 0.0 </td><td valign=top > + 0.0</td></tr>
<tr><td valign=top >&lowast;</td><td valign=top ><em>y</em>  =  &minus;0.0 </td><td valign=top ><em>x</em>  =   + 0.0</td><td valign=top >&minus;0.0</td></tr>
<tr><td valign=top >&lowast;</td><td valign=top ><em>y</em>  =   + 0.0 </td><td valign=top ><em>x</em>  =  &minus;0.0 </td><td valign=top ><img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"></td></tr>
<tr><td valign=top >&lowast;</td><td valign=top ><em>y</em>  =  &minus;0.0 </td><td valign=top ><em>x</em>  =  &minus;0.0 </td><td valign=top >&minus;<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"></td></tr>
<tr><td valign=top >&lowast;</td><td valign=top ><em>y</em>  =   + 0.0 </td><td valign=top ><em>x</em>  =  0 </td><td valign=top >(<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]">/2)</td></tr>
<tr><td valign=top >&lowast;</td><td valign=top ><em>y</em>  =  &minus;0.0 </td><td valign=top ><em>x</em>  =  0    </td><td valign=top >&minus;(<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]">/2)
</td></tr></table>
</td></tr></table></div>
<p>
</p>
<a name="node_sec_11.7.4"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7.4">11.7.4&nbsp;&nbsp;Numerical operations</a></h3>
<p></p>
<a name="node_sec_11.7.4.1"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7.4.1">11.7.4.1&nbsp;&nbsp;Numerical type predicates</a></h4>
<p></p>
<p></p>
<div align=left><tt>(<a name="node_idx_440"></a>number?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_442"></a>complex?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_444"></a>real?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_446"></a>rational?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_448"></a>integer?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These numerical type predicates can be applied to any kind of
argument.  They return <tt>#t</tt> if the object is a number object
of the named type, and <tt>#f</tt> otherwise.
In general, if a type predicate is true of a number object then all higher
type predicates are also true of that number object.  Consequently, if a type
predicate is false of a number object, then all lower type predicates are
also false of that number object.</p>
<p>
If <i>z</i> is a complex number object, then <tt>(real? <i>z</i>)</tt> is true if
and only if <tt>(zero? (imag-part <i>z</i>))</tt> and <tt>(exact?
(imag-part <i>z</i>))</tt> are both true.</p>
<p>
If <i>x</i> is a real number object, then <tt>(rational? <i>x</i>)</tt> is true if
and only if there exist exact integer objects <i>k<sub>1</sub></i> and <i>k<sub>2</sub></i> such that
<tt>(= <i>x</i> (/ <i>k<sub>1</sub></i> <i>k<sub>2</sub></i>))</tt> and <tt>(= (numerator
<i>x</i>) <i>k<sub>1</sub></i>)</tt> and <tt>(= (denominator <i>x</i>) <i>k<sub>2</sub></i>)</tt> are
all true.  Thus infinities and NaNs are not rational number objects.</p>
<p>
If <i>q</i> is a rational number objects, then <tt>(integer?
<i>q</i>)</tt> is true if and only if <tt>(= (denominator
<i>q</i>) 1)</tt> is true.  If <i>q</i> is not a rational number object,
then <tt>(integer? <i>q</i>)</tt> is <tt>#f</tt>.</p>
<p>
</p>

<tt>(complex?&nbsp;3+4i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(complex?&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real?&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real?&nbsp;-2.5+0.0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(real?&nbsp;-2.5+0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real?&nbsp;-2.5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real?&nbsp;<tt>#</tt>e1e10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(rational?&nbsp;6/10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(rational?&nbsp;6/3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(rational?&nbsp;2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(integer?&nbsp;3+0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(integer?&nbsp;3.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(integer?&nbsp;8/4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding></p>

<p class=nopadding>(number?&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(complex?&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real?&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(rational?&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(complex?&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real?&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(rational?&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(integer?&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
Except for <tt>number?</tt>, the behavior of these type predicates
on inexact number objects is
unreliable, because any inaccuracy may
affect the result.
</blockquote>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_450"></a>real-valued?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_452"></a>rational-valued?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_454"></a>integer-valued?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These numerical type predicates can be applied to any kind of
argument.  The <tt>real-valued?</tt> procedure
returns <tt>#t</tt> if the object is a number object and is equal in the
sense of <tt>=</tt> to some real number object, or if the object is a NaN, or a
complex number object whose real part is a NaN and whose imaginary
part is zero
in the sense of <tt>zero?</tt>.  The <tt>rational-valued?</tt> and <tt>integer-valued?</tt> procedures return <tt>#t</tt> if the object is a
number object and is equal in the sense of <tt>=</tt> to some object of the
named type, and otherwise they return <tt>#f</tt>.</p>
<p>
</p>

<tt>(real-valued?&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(real-valued?&nbsp;+nan.0+0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real-valued?&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real-valued?&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real-valued?&nbsp;-2.5+0.0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real-valued?&nbsp;-2.5+0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real-valued?&nbsp;-2.5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(real-valued?&nbsp;<tt>#</tt>e1e10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding></p>

<p class=nopadding>(rational-valued?&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(rational-valued?&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(rational-valued?&nbsp;6/10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(rational-valued?&nbsp;6/10+0.0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(rational-valued?&nbsp;6/10+0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(rational-valued?&nbsp;6/3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding></p>

<p class=nopadding>(integer-valued?&nbsp;3+0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(integer-valued?&nbsp;3+0.0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(integer-valued?&nbsp;3.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(integer-valued?&nbsp;3.0+0.0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(integer-valued?&nbsp;8/4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
These procedures test whether a given number object can be coerced
to the specified type without loss of numerical accuracy.
Specifically, the behavior of these predicates differs from the
behavior of <tt>real?</tt>, <tt>rational?</tt>, and <tt>integer?</tt> on
complex number objects whose imaginary part is inexact zero.
</blockquote><p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The behavior of these type predicates on inexact number objects is
unreliable, because any inaccuracy may
affect the result.
</blockquote>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_456"></a>exact?<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_458"></a>inexact?<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These numerical predicates provide tests for the exactness of a
quantity.  For any number object, precisely one of these predicates is
true.</p>
<p>
</p>

<tt>(exact?&nbsp;5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(inexact?&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>
<p></tt>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.7.4.2"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7.4.2">11.7.4.2&nbsp;&nbsp;Generic conversions</a></h4>
<p></p>
<p></p>
<div align=left><tt>(<a name="node_idx_460"></a>inexact<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_462"></a>exact<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <tt>inexact</tt> procedure returns an inexact representation of <i>z</i>.  If
inexact number objects of the appropriate type have bounded precision, then
the value returned is an inexact number object that is nearest to the
argument.  If an exact argument has no reasonably close inexact
equivalent, an exception with condition type
<tt>&amp;implementation-violation</tt> may be
raised.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
For a real number object whose magnitude is finite but so large that it has
no reasonable finite approximation as an inexact number, a
reasonably close inexact equivalent may be <tt>+inf.0</tt> or <tt>-inf.0</tt>.  Similarly, the inexact representation of a complex
number object whose components are finite may have infinite components.
</blockquote><p>
The <tt>exact</tt> procedure returns an exact representation of <i>z</i>.  The value
returned is the exact number object that is numerically closest to the
argument; in most cases, the result of this procedure should be
numerically equal to its argument.  If an inexact argument has no
reasonably close exact equivalent, an exception with condition type
<tt>&amp;implementation-violation</tt> may be
raised.</p>
<p>
These procedures implement the natural one-to-one correspondence
between exact and inexact integer objects throughout an
implementation-dependent range.</p>
<p>
The <tt>inexact</tt> and <tt>exact</tt> procedures are idempotent.
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.7.4.3"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7.4.3">11.7.4.3&nbsp;&nbsp;Arithmetic operations</a></h4>
<p></p>
<p></p>
<div align=left><tt>(<a name="node_idx_464"></a>=<i> <i>z<sub>1</sub></i> <i>z<sub>2</sub></i> <i>z<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_466"></a>&lt;<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i> <i>x<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_468"></a>&gt;<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i> <i>x<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_470"></a>&lt;=<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i> <i>x<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_472"></a>&gt;=<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i> <i>x<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These procedures return <tt>#t</tt> if their arguments are
(respectively): equal, monotonically increasing, monotonically
decreasing, monotonically nondecreasing, or monotonically
nonincreasing, and <tt>#f</tt> otherwise.</p>
<p>
</p>

<tt>(=&nbsp;+inf.0&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(=&nbsp;-inf.0&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(=&nbsp;-inf.0&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>
<p></tt></p>
<p>
For any real number object <i>x</i> that is neither infinite nor NaN:</p>
<p>
</p>

<tt>(&lt;&nbsp;-inf.0&nbsp;<i>x</i>&nbsp;+inf.0))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(&gt;&nbsp;+inf.0&nbsp;<i>x</i>&nbsp;-inf.0))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>
<p></tt></p>
<p>
For any number object <i>z</i>:
</p>

<tt>(=&nbsp;+nan.0&nbsp;<i>z</i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt><p></tt>
For any real number object <i>x</i>:
</p>

<tt>(&lt;&nbsp;+nan.0&nbsp;<i>x</i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt>
<p class=nopadding>(&gt;&nbsp;+nan.0&nbsp;<i>x</i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>
<p></tt></p>
<p>
These predicates must be transitive.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The traditional implementations of these predicates in Lisp-like
languages are not transitive.
</blockquote><p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
While it is possible to compare inexact number objects using these
predicates, the results may be unreliable because a small inaccuracy
may affect the result; this is especially true of <tt>=</tt> and <tt>zero?</tt> (below).<p>
When in doubt, consult a numerical analyst.
</p>
</blockquote>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_474"></a>zero?<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_476"></a>positive?<i> x</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_478"></a>negative?<i> x</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_480"></a>odd?<i> n</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_482"></a>even?<i> n</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_484"></a>finite?<i> x</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_486"></a>infinite?<i> x</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_488"></a>nan?<i> x</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These numerical predicates test a number object for a particular property,
returning <tt>#t</tt> or <tt>#f</tt>.  The <tt>zero?</tt>
procedure
tests if the number object is <tt>=</tt> to zero, <tt>positive?</tt> tests whether it is
greater than zero, <tt>negative?</tt> tests whether it is less than zero, <tt>odd?</tt> tests whether it is odd, <tt>even?</tt> tests whether it is even, <tt>finite?</tt> tests whether it is not an infinity and not a NaN, <tt>infinite?</tt> tests whether it is an infinity, <tt>nan?</tt> tests whether it is a
NaN.</p>
<p>
</p>

<tt>(zero?&nbsp;+0.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(zero?&nbsp;-0.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(zero?&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(positive?&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(negative?&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(positive?&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(negative?&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(finite?&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(finite?&nbsp;5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(finite?&nbsp;5.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(infinite?&nbsp;5.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(infinite?&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
As with the predicates above, the results may be unreliable because
a small inaccuracy may affect the result.
</blockquote>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_490"></a>max<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_492"></a>min<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These procedures return the maximum or minimum of their arguments.</p>
<p>
</p>

<tt>(max&nbsp;3&nbsp;4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;4
<p class=nopadding>(max&nbsp;3.9&nbsp;4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;4.0</p>
<p></tt></p>
<p>
For any real number object <i>x</i>:</p>
<p>
</p>

<tt>(max&nbsp;+inf.0&nbsp;<i>x</i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0
<p class=nopadding>(min&nbsp;-inf.0&nbsp;<i>x</i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-inf.0</p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
If any argument is inexact, then the result is also inexact (unless
the procedure can prove that the inaccuracy is not large enough to affect the
result, which is possible only in unusual implementations).  If <tt>min</tt> or
<tt>max</tt> is used to compare number objects of mixed exactness, and the numerical
value of the result cannot be represented as an inexact number object without loss of
accuracy, then the procedure may raise an exception with condition
type <tt>&amp;implementation-restriction</tt>.
</blockquote><p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_494"></a>+<i> <i>z<sub>1</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_496"></a>*<i> <i>z<sub>1</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These procedures return the sum or product of their arguments.</p>
<p>
</p>

<tt>(+&nbsp;3&nbsp;4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;7
<p class=nopadding>(+&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;3</p>

<p class=nopadding>(+)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0</p>

<p class=nopadding>(+&nbsp;+inf.0&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0</p>

<p class=nopadding>(+&nbsp;+inf.0&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+nan.0</p>

<p class=nopadding></p>

<p class=nopadding>(*&nbsp;4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;4</p>

<p class=nopadding>(*)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;1</p>

<p class=nopadding>(*&nbsp;5&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0</p>

<p class=nopadding>(*&nbsp;-5&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-inf.0</p>

<p class=nopadding>(*&nbsp;+inf.0&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0</p>

<p class=nopadding>(*&nbsp;+inf.0&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-inf.0</p>

<p class=nopadding>(*&nbsp;0&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0&nbsp;<i>or</i>&nbsp;+nan.0</p>

<p class=nopadding>(*&nbsp;0&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0&nbsp;<i>or</i>&nbsp;+nan.0</p>

<p class=nopadding>(*&nbsp;1.0&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0&nbsp;<i>or</i>&nbsp;0.0</p>
<p></tt></p>
<p>
For any real number object <i>x</i> that is neither infinite nor NaN:</p>
<p>
</p>

<tt>(+&nbsp;+inf.0&nbsp;<i>x</i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0
<p class=nopadding>(+&nbsp;-inf.0&nbsp;<i>x</i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-inf.0</p>
<p></tt></p>
<p>
For any real number object <i>x</i>:</p>
<p>
</p>

<tt>(+&nbsp;+nan.0&nbsp;<i>x</i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+nan.0<p></tt></p>
<p>
For any real number object <i>x</i> that is not an exact 0:</p>
<p>
</p>

<tt>(*&nbsp;+nan.0&nbsp;<i>x</i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+nan.0<p></tt></p>
<p>
If any of these procedures are applied to mixed non-rational real and
non-real complex arguments, they either raise an exception with
condition type <tt>&amp;implementation-restriction</tt> or return an
unspecified number object.</p>
<p>
Implementations that distinguish &minus;0.0 should adopt behavior
consistent with the following examples:</p>
<p>
</p>

<tt>(+&nbsp;0.0&nbsp;-0.0)&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0
<p class=nopadding>(+&nbsp;-0.0&nbsp;0.0)&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0</p>

<p class=nopadding>(+&nbsp;0.0&nbsp;0.0)&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0</p>

<p class=nopadding>(+&nbsp;-0.0&nbsp;-0.0)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;-0.0</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_498"></a>-<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_500"></a>-<i> <i>z<sub>1</sub></i> <i>z<sub>2</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
With two or more arguments, this procedures returns the difference of
its arguments, associating to the left.  With one argument, however,
it returns the additive inverse of its argument.</p>
<p>
</p>

<tt>(-&nbsp;3&nbsp;4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-1
<p class=nopadding>(-&nbsp;3&nbsp;4&nbsp;5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-6</p>

<p class=nopadding>(-&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-3</p>

<p class=nopadding>(-&nbsp;+inf.0&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+nan.0</p>
<p></tt></p>
<p>
If this procedure is applied to mixed non-rational real and
non-real complex arguments, it either raises an exception with
condition type <tt>&amp;implementation-restriction</tt> or returns an
unspecified number object.</p>
<p>
Implementations that distinguish &minus;0.0 should adopt behavior
consistent with the following examples:</p>
<p>
</p>

<tt>(-&nbsp;0.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;-0.0
<p class=nopadding>(-&nbsp;-0.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0</p>

<p class=nopadding>(-&nbsp;0.0&nbsp;-0.0)&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0</p>

<p class=nopadding>(-&nbsp;-0.0&nbsp;0.0)&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;-0.0</p>

<p class=nopadding>(-&nbsp;0.0&nbsp;0.0)&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0</p>

<p class=nopadding>(-&nbsp;-0.0&nbsp;-0.0)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_502"></a>/<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_504"></a>/<i> <i>z<sub>1</sub></i> <i>z<sub>2</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
If all of the arguments are exact, then the divisors must all
be nonzero.
With two or more arguments, this procedure returns the 
quotient of its arguments, associating to the left.  With one
argument, however, it returns the multiplicative inverse
of its argument.</p>
<p>
</p>

<tt>(/&nbsp;3&nbsp;4&nbsp;5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;3/20
<p class=nopadding>(/&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;1/3</p>

<p class=nopadding>(/&nbsp;0.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0</p>

<p class=nopadding>(/&nbsp;1.0&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0</p>

<p class=nopadding>(/&nbsp;-1&nbsp;0.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-inf.0</p>

<p class=nopadding>(/&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0.0</p>

<p class=nopadding>(/&nbsp;0&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<tt>&nbsp;&amp;assertion</tt>&nbsp;<i>exception</i></p>

<p class=nopadding>(/&nbsp;3&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<tt>&nbsp;&amp;assertion</tt>&nbsp;<i>exception</i></p>

<p class=nopadding>(/&nbsp;0&nbsp;3.5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0.0</p>

<p class=nopadding>(/&nbsp;0&nbsp;0.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+nan.0</p>

<p class=nopadding>(/&nbsp;0.0&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+nan.0</p>

<p class=nopadding>(/&nbsp;0.0&nbsp;0.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+nan.0</p>
<p></tt></p>
<p>
If this procedure is applied to mixed non-rational real and
non-real complex arguments, it either raises an exception with
condition type <tt>&amp;implementation-restriction</tt> or returns an
unspecified number object.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_506"></a>abs<i> x</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns the absolute value of its argument.</p>
<p>
</p>

<tt>(abs&nbsp;-7)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;7
<p class=nopadding>(abs&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0</p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_508"></a>div-and-mod<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_510"></a>div<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_512"></a>mod<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_514"></a>div0-and-mod0<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_516"></a>div0<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_518"></a>mod0<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These procedures implement number-theoretic integer division and
return the results of the corresponding mathematical operations
specified in section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.7.3.1">11.7.3.1</a>.  In each case, <i>x<sub>1</sub></i>
must be neither infinite nor a NaN, and <i>x<sub>2</sub></i> must be nonzero;
otherwise, an exception with condition type <tt>&amp;assertion</tt> is raised.</p>
<p>
</p>

<tt>(div&nbsp;<i>x<sub>1</sub></i>&nbsp;<i>x<sub>2</sub></i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<i>x<sub>1</sub></i>&nbsp;<em>d</em><em>i</em><em>v</em>&nbsp;<i>x<sub>2</sub></i>
<p class=nopadding>(mod&nbsp;<i>x<sub>1</sub></i>&nbsp;<i>x<sub>2</sub></i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<i>x<sub>1</sub></i>&nbsp;<em>m</em><em>o</em><em>d</em>&nbsp;<i>x<sub>2</sub></i></p>

<p class=nopadding>(div-and-mod&nbsp;<i>x<sub>1</sub></i>&nbsp;<i>x<sub>2</sub></i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<i>x<sub>1</sub></i>&nbsp;<em>d</em><em>i</em><em>v</em>&nbsp;<i>x<sub>2</sub></i>,&nbsp;<i>x<sub>1</sub></i>&nbsp;<em>m</em><em>o</em><em>d</em>&nbsp;<i>x<sub>2</sub></i><br>
;&nbsp;two&nbsp;return&nbsp;values</p>

<p class=nopadding>(div0&nbsp;<i>x<sub>1</sub></i>&nbsp;<i>x<sub>2</sub></i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<i>x<sub>1</sub></i>&nbsp;<em>d</em><em>i</em><em>v</em><sub>0</sub>&nbsp;<i>x<sub>2</sub></i></p>

<p class=nopadding>(mod0&nbsp;<i>x<sub>1</sub></i>&nbsp;<i>x<sub>2</sub></i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<i>x<sub>1</sub></i>&nbsp;<em>m</em><em>o</em><em>d</em><sub>0</sub>&nbsp;<i>x<sub>2</sub></i></p>

<p class=nopadding>(div0-and-mod0&nbsp;<i>x<sub>1</sub></i>&nbsp;<i>x<sub>2</sub></i>)&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<i>x<sub>1</sub></i>&nbsp;<em>d</em><em>i</em><em>v</em><sub>0</sub>&nbsp;<i>x<sub>2</sub></i>,&nbsp;<i>x<sub>1</sub></i>&nbsp;<em>m</em><em>o</em><em>d</em><sub>0</sub>&nbsp;<i>x<sub>2</sub></i><br>
;&nbsp;two&nbsp;return&nbsp;values</p>
<p></tt></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_520"></a>gcd<i> <i>n<sub>1</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_522"></a>lcm<i> <i>n<sub>1</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These procedures return the greatest common divisor or least common
multiple of their arguments.  The result is always non-negative.</p>
<p>
</p>

<tt>(gcd&nbsp;32&nbsp;-36)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;4
<p class=nopadding>(gcd)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0</p>

<p class=nopadding>(lcm&nbsp;32&nbsp;-36)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;288</p>

<p class=nopadding>(lcm&nbsp;32.0&nbsp;-36)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;288.0</p>

<p class=nopadding>(lcm)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;1</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_524"></a>numerator<i> q</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_526"></a>denominator<i> q</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These procedures return the numerator or denominator of their
argument; the result is computed as if the argument was represented as
a fraction in lowest terms.  The denominator is always positive.  The
denominator of 0 is defined to be 1.</p>
<p>
</p>

<tt>(numerator&nbsp;(/&nbsp;6&nbsp;4))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;3
<p class=nopadding>(denominator&nbsp;(/&nbsp;6&nbsp;4))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;2</p>

<p class=nopadding>(denominator</p>

<p class=nopadding>&nbsp;&nbsp;(inexact&nbsp;(/&nbsp;6&nbsp;4)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;2.0</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_528"></a>floor<i> x</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_530"></a>ceiling<i> x</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_532"></a>truncate<i> x</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_534"></a>round<i> x</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These procedures return inexact integer objects for inexact arguments that are
not infinities or NaNs, and exact integer objects for exact rational
arguments.  For such arguments, <tt>floor</tt> returns the largest
integer object not larger than <i>x</i>.  The <tt>ceiling</tt> procedure returns the smallest
integer object not smaller than <i>x</i>.  The <tt>truncate</tt> procedure returns the integer
object closest to <i>x</i> whose absolute value is not larger than the
absolute value of <i>x</i>.  The <tt>round</tt> procedure returns the
closest integer object to
<i>x</i>, rounding to even when <i>x</i> represents a number halfway between two
integers.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
If the argument to one of these procedures is inexact, then the result
is also inexact.  If an exact value is needed, the
result should be passed to the <tt>exact</tt> procedure.
</blockquote><p>
Although infinities and NaNs are not integer objects, these procedures return
an infinity when given an infinity as an argument, and a NaN when
given a NaN.</p>
<p>
</p>

<tt>(floor&nbsp;-4.3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-5.0
<p class=nopadding>(ceiling&nbsp;-4.3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-4.0</p>

<p class=nopadding>(truncate&nbsp;-4.3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-4.0</p>

<p class=nopadding>(round&nbsp;-4.3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-4.0</p>

<p class=nopadding></p>

<p class=nopadding>(floor&nbsp;3.5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;3.0</p>

<p class=nopadding>(ceiling&nbsp;3.5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;4.0</p>

<p class=nopadding>(truncate&nbsp;3.5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;3.0</p>

<p class=nopadding>(round&nbsp;3.5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;4.0</p>

<p class=nopadding></p>

<p class=nopadding>(round&nbsp;7/2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;4</p>

<p class=nopadding>(round&nbsp;7)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;7</p>

<p class=nopadding></p>

<p class=nopadding>(floor&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0</p>

<p class=nopadding>(ceiling&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-inf.0</p>

<p class=nopadding>(round&nbsp;+nan.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+nan.0</p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_536"></a>rationalize<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <tt>rationalize</tt> procedure returns the a number object
representing the <em>simplest</em> rational
number differing from <i>x<sub>1</sub></i> by no more than <i>x<sub>2</sub></i>.    A rational number <em>r</em><sub>1</sub> is
<em>simpler</em> <a name="node_idx_538"></a>than another rational number
<em>r</em><sub>2</sub> if <em>r</em><sub>1</sub>  =  <em>p</em><sub>1</sub>/<em>q</em><sub>1</sub> and <em>r</em><sub>2</sub>  =  <em>p</em><sub>2</sub>/<em>q</em><sub>2</sub> (in lowest terms) and |<em>p</em><sub>1</sub>|
&le; |<em>p</em><sub>2</sub>| and |<em>q</em><sub>1</sub>| &le; |<em>q</em><sub>2</sub>|.  Thus 3/5 is simpler than 4/7.
Although not all rationals are comparable in this ordering (consider 2/7
and 3/5) any interval contains a rational number that is simpler than
every other rational number in that interval (the simpler 2/5 lies
between 2/7 and 3/5).  Note that 0  =  0/1 is the simplest rational of
all.
</p>

<tt>(rationalize&nbsp;(exact&nbsp;.3)&nbsp;1/10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;1/3
<p class=nopadding>(rationalize&nbsp;.3&nbsp;1/10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#</tt>i1/3&nbsp;&nbsp;;&nbsp;approximately</p>

<p class=nopadding></p>

<p class=nopadding>(rationalize&nbsp;+inf.0&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0</p>

<p class=nopadding>(rationalize&nbsp;+inf.0&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+nan.0</p>

<p class=nopadding>(rationalize&nbsp;3&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0.0</p>
<p></tt>
The first two examples hold only in implementations whose inexact real
number objects have sufficient precision.</p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_540"></a>exp<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_542"></a>log<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_544"></a>log<i> <i>z<sub>1</sub></i> <i>z<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_546"></a>sin<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_548"></a>cos<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_550"></a>tan<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_552"></a>asin<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_554"></a>acos<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_556"></a>atan<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_558"></a>atan<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These procedures compute the usual transcendental functions.  The <tt>exp</tt> procedure computes the base-<em>e</em> exponential of <i>z</i>. 
The <tt>log</tt> procedure with a single argument computes the natural logarithm of
<i>z</i> (not the base-ten logarithm); <tt>(log <i>z<sub>1</sub></i>
<i>z<sub>2</sub></i>)</tt> computes the base-<i>z<sub>2</sub></i> logarithm of <i>z<sub>1</sub></i>.
The <tt>asin</tt>, <tt>acos</tt>, and <tt>atan</tt> procedures compute arcsine,
arccosine, and arctangent, respectively.  The two-argument variant of
<tt>atan</tt> computes <tt>(angle (make-rectangular <i>x<sub>2</sub></i>
<i>x<sub>1</sub></i>))</tt>.</p>
<p>
See section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.7.3.2">11.7.3.2</a> for the underlying
mathematical operations. These procedures may return inexact results
even when given exact arguments.</p>
<p>
</p>

<tt>(exp&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;+inf.0
<p class=nopadding>(exp&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0</p>

<p class=nopadding>(log&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;+inf.0</p>

<p class=nopadding>(log&nbsp;0.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;-inf.0</p>

<p class=nopadding>(log&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<tt>&nbsp;&amp;assertion</tt>&nbsp;<i>exception</i></p>

<p class=nopadding>(log&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;+inf.0+3.141592653589793i<br>
&nbsp;;&nbsp;approximately</p>

<p class=nopadding>(atan&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;-1.5707963267948965&nbsp;;&nbsp;approximately</p>

<p class=nopadding>(atan&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;1.5707963267948965&nbsp;;&nbsp;approximately</p>

<p class=nopadding>(log&nbsp;-1.0+0.0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0+3.141592653589793i&nbsp;;&nbsp;approximately</p>

<p class=nopadding>(log&nbsp;-1.0-0.0i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0-3.141592653589793i&nbsp;;&nbsp;approximately<br>
;&nbsp;if&nbsp;-0.0&nbsp;is&nbsp;distinguished</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_560"></a>sqrt<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns the principal square root of <i>z</i>.  For rational <i>z</i>,
the result has either positive real part, or zero real part and
non-negative imaginary part.  With log defined as in
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.7.3.2">11.7.3.2</a>, the value of <tt>(sqrt
<i>z</i>)</tt> could be expressed as <em>e</em><sup>(log <em>z</em>/2)</sup>.</p>
<p>
The <tt>sqrt</tt> procedure may return an inexact result even when given an exact
argument.</p>
<p>
</p>

<tt>(sqrt&nbsp;-5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0.0+2.23606797749979i&nbsp;;&nbsp;approximately
<p class=nopadding>(sqrt&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0</p>

<p class=nopadding>(sqrt&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0i</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_562"></a>exact-integer-sqrt<i> k</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <tt>exact-integer-sqrt</tt> procedure returns two non-negative exact
integer objects <em>s</em> and <em>r</em> where <i>k</i>  =  <em>s</em><sup>2</sup>  + 
<em>r</em> and <i>k</i> &lt; (<em>s</em> + 1)<sup>2</sup>.</p>
<p>
</p>

<tt>(exact-integer-sqrt&nbsp;4)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;2&nbsp;0<br>
;&nbsp;two&nbsp;return&nbsp;values
<p class=nopadding>(exact-integer-sqrt&nbsp;5)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;2&nbsp;1<br>
;&nbsp;two&nbsp;return&nbsp;values</p>

<p class=nopadding></p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_564"></a>expt<i> <i>z<sub>1</sub></i> <i>z<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <i>z<sub>1</sub></i> raised to the power <i>z<sub>2</sub></i>.  For nonzero <i>z<sub>1</sub></i>,
this is <em>e</em><sup><em>z</em><sub>2</sub> log <em>z</em><sub>1</sub></sup>.
0.0<sup><em>z</em></sup> is 1.0 if <i>z</i>  =  0.0, and 0.0 if <tt>(real-part <i>z</i>)</tt> is positive.  For other cases in which
the first argument is zero, either an exception is raised with
condition type <tt>&amp;implementation-restriction</tt>, or an unspecified
number object is returned.</p>
<p>
For an exact real number object <i>z<sub>1</sub></i> and an exact
integer object <i>z<sub>2</sub></i>, <tt>(expt <i>z<sub>1</sub></i>
<i>z<sub>2</sub></i>)</tt> must return an exact result.  For all other
values of <i>z<sub>1</sub></i> and <i>z<sub>2</sub></i>, <tt>(expt <i>z<sub>1</sub></i>
<i>z<sub>2</sub></i>)</tt> may return an inexact result, even when both
<i>z<sub>1</sub></i> and <i>z<sub>2</sub></i> are exact.</p>
<p>
</p>

<tt>(expt&nbsp;5&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;125
<p class=nopadding>(expt&nbsp;5&nbsp;-3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;1/125</p>

<p class=nopadding>(expt&nbsp;5&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;1</p>

<p class=nopadding>(expt&nbsp;0&nbsp;5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0</p>

<p class=nopadding>(expt&nbsp;0&nbsp;5+.0000312i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0</p>

<p class=nopadding>(expt&nbsp;0&nbsp;-5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(expt&nbsp;0&nbsp;-5+.0000312i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>(expt&nbsp;0&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;1</p>

<p class=nopadding>(expt&nbsp;0.0&nbsp;0.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;1.0</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_566"></a>make-rectangular<i> <i>x<sub>1</sub></i> <i>x<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_568"></a>make-polar<i> <i>x<sub>3</sub></i> <i>x<sub>4</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_570"></a>real-part<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_572"></a>imag-part<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_574"></a>magnitude<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_576"></a>angle<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Suppose <em>a</em><sub>1</sub>, <em>a</em><sub>2</sub>, <em>a</em><sub>3</sub>, and <em>a</em><sub>4</sub> are real
numbers, and <em>c</em> is a complex number such that the
following holds:
</p>
<div align=left><img src="r6rs-Z-G-5.gif" border="0" alt="[r6rs-Z-G-5.gif]"></div><p></p>
<p>
Then, if <i>x<sub>1</sub></i>, <i>x<sub>2</sub></i>, <i>x<sub>3</sub></i>, and <i>x<sub>4</sub></i> are number
objects representing <em>a</em><sub>1</sub>, <em>a</em><sub>2</sub>, <em>a</em><sub>3</sub>, and <em>a</em><sub>4</sub>, respectively,
<tt>(make-rectangular <i>x<sub>1</sub></i> <i>x<sub>2</sub></i>)</tt> returns <em>c</em>, and <tt>(make-polar <i>x<sub>3</sub></i> <i>x<sub>4</sub></i>)</tt> returns <em>c</em>.
</p>

<tt>(make-rectangular&nbsp;1.1&nbsp;2.2)&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;1.1+2.2i&nbsp;;&nbsp;approximately
<p class=nopadding>(make-polar&nbsp;1.1&nbsp;2.2)&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;1.1@2.2&nbsp;;&nbsp;approximately</p>

<p class=nopadding></p>
<p></tt>
Conversely, if &minus;<img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]"> &le; <em>a</em><sub>4</sub> &le; <img src="r6rs-Z-G-D-3.gif" border="0" alt="[r6rs-Z-G-D-3.gif]">, and if <em>z</em> is a number object
representing <em>c</em>, then <tt>(real-part <i>z</i>)</tt> returns <em>a</em><sub>1</sub> <tt>(imag-part <i>z</i>)</tt> returns <em>a</em><sub>2</sub>, <tt>(magnitude <i>z</i>)</tt>
returns <em>a</em><sub>3</sub>, and <tt>(angle <i>z</i>)</tt> returns <em>a</em><sub>4</sub>.</p>
<p>
</p>

<tt>(real-part&nbsp;1.1+2.2i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;1.1&nbsp;;&nbsp;approximately
<p class=nopadding>(imag-part&nbsp;1.1+2.2i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;2.2i&nbsp;;&nbsp;approximately</p>

<p class=nopadding>(magnitude&nbsp;1.1@2.2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;1.1&nbsp;;&nbsp;approximately</p>

<p class=nopadding>(angle&nbsp;1.1@2.2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;2.2&nbsp;;&nbsp;approximately</p>

<p class=nopadding></p>

<p class=nopadding>(angle&nbsp;-1.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;3.141592653589793&nbsp;;&nbsp;approximately</p>

<p class=nopadding>(angle&nbsp;-1.0+0.0i)&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;3.141592653589793&nbsp;;&nbsp;approximately</p>

<p class=nopadding>(angle&nbsp;-1.0-0.0i)&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;-3.141592653589793&nbsp;;&nbsp;approximately<br>
;&nbsp;if&nbsp;-0.0&nbsp;is&nbsp;distinguished</p>

<p class=nopadding>(angle&nbsp;+inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;0.0</p>

<p class=nopadding>(angle&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;3.141592653589793&nbsp;;&nbsp;approximately</p>
<p></tt></p>
<p>
Moreover, suppose <i>x<sub>1</sub></i>, <i>x<sub>2</sub></i> are such that either <i>x<sub>1</sub></i>
or <i>x<sub>2</sub></i> is an infinity, then
</p>

<tt>(make-rectangular&nbsp;<i>x<sub>1</sub></i>&nbsp;<i>x<sub>2</sub></i>)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<i>z</i>
<p class=nopadding>(magnitude&nbsp;<i>z</i>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;+inf.0</p>
<p></tt>
</p>
<p></p>
<p>
The <tt>make-polar</tt>, <tt>magnitude</tt>, and
<tt>angle</tt> procedures may return inexact results even when given exact
arguments.</p>
<p>
</p>

<tt>(angle&nbsp;-1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;3.141592653589793&nbsp;;&nbsp;approximately
<p class=nopadding></p>
<p></tt>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.7.4.4"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.7.4.4">11.7.4.4&nbsp;&nbsp;Numerical Input and Output</a></h4>
<p></p>
<p></p>
<div align=left><tt>(<a name="node_idx_578"></a>number-&gt;string<i> z</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_580"></a>number-&gt;string<i> z radix</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_582"></a>number-&gt;string<i> z radix precision</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>Radix</i> must be an exact integer object, either 2, 8, 10, or 16.  If
omitted, <i>radix</i> defaults to 10.  If a <i>precision</i> is
specified, then <i>z</i> must be an inexact complex number object,
<i>precision</i> must be an exact positive integer object, and <i>radix</i>
must be 10.  The <tt>number-&gt;string</tt> procedure takes a number object and a
radix and returns as a string an external representation of the given
number object in the given radix such that
</p>

<tt>(let&nbsp;((number&nbsp;<i>z</i>)&nbsp;(radix&nbsp;<i>radix</i>))
<p class=nopadding>&nbsp;&nbsp;(eqv?&nbsp;(string-&gt;number</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(number-&gt;string&nbsp;number&nbsp;radix)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;radix)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number))</p>
<p></tt>
is true.  If no possible result makes this expression
true, an exception with condition type
<tt>&amp;implementation-restriction</tt> is raised.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The error case can occur only when <i>z</i> is not a complex number object
or is a complex number object with a non-rational real or imaginary part.
</blockquote><p>
If a <i>precision</i> is specified, then the representations of the
inexact real components of the result, unless they are infinite or
NaN, specify an explicit &lt;mantissa width&gt; <i>p</i>, and <i>p</i> is the
least <i>p</i> &ge; <i>precision</i> for which the above expression is
true.</p>
<p>
If <i>z</i> is inexact, the radix is 10, and the above expression and
condition can be satisfied by a result that contains a decimal point,
then the result contains a decimal point and is expressed using the
minimum number of digits (exclusive of exponent, trailing zeroes, and
mantissa width) needed to make the above expression and condition
true&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_4">4</a>,&nbsp;<a href="r6rs-Z-H-21.html#node_bib_7">7</a>]; otherwise the format of the result
is unspecified.</p>
<p>
The result returned by <tt>number-&gt;string</tt> never contains an explicit
radix prefix.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_584"></a>string-&gt;number<i> string</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_586"></a>string-&gt;number<i> string radix</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a number object with maximally precise representation expressed by the
given <i>string</i>.  <i>Radix</i> must be an exact integer object, either 2, 8, 10,
or 16.  If supplied, <i>radix</i> is a default radix that may be overridden
by an explicit radix prefix in <i>string</i> (e.g., <tt>&quot;#o177&quot;</tt>).  If <i>radix</i>
is not supplied, then the default radix is 10.  If <i>string</i> is not
a syntactically valid notation for a number object or a notation for a
rational number object with a zero denominator, then <tt>string-&gt;number</tt>
returns <tt>#f</tt>.
</p>

<tt>(string-&gt;number&nbsp;&quot;100&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;100
<p class=nopadding>(string-&gt;number&nbsp;&quot;100&quot;&nbsp;16)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;256</p>

<p class=nopadding>(string-&gt;number&nbsp;&quot;1e2&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;100.0</p>

<p class=nopadding>(string-&gt;number&nbsp;&quot;0/0&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(string-&gt;number&nbsp;&quot;+inf.0&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+inf.0</p>

<p class=nopadding>(string-&gt;number&nbsp;&quot;-inf.0&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-inf.0</p>

<p class=nopadding>(string-&gt;number&nbsp;&quot;+nan.0&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;+nan.0</p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The <tt>string-&gt;number</tt> procedure always returns a number object or
<tt>#f</tt>; it never raises an exception.
</blockquote>
<p></p>
<p>
</p>
<a name="node_sec_11.8"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.8">11.8&nbsp;&nbsp;Booleans</a></h2>
<p></p>
<p>
The standard boolean objects for true and false have external representations
<tt>#t</tt> and <tt>#f</tt>.<a name="node_idx_588"></a><a name="node_idx_590"></a>However, of all
objects, only <tt>#f</tt> counts as false in
conditional expressions.  See section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.7">5.7</a>.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
Programmers accustomed to other dialects of Lisp should be aware that
Scheme distinguishes both <tt>#f</tt> and the empty list <a name="node_idx_592"></a>from each other and from the symbol <tt>nil</tt>.
</blockquote><p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_594"></a>not<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if <i>obj</i> is <tt>#f</tt>, and returns
<tt>#f</tt> otherwise.</p>
<p>
</p>

<tt>(not&nbsp;<tt>#t</tt>)&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt>
<p class=nopadding>(not&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(not&nbsp;(list&nbsp;3))&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(not&nbsp;<tt>#f</tt>)&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(not&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(not&nbsp;(list))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(not&nbsp;'nil)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_596"></a>boolean?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if <i>obj</i> is either <tt>#t</tt> or
<tt>#f</tt> and returns <tt>#f</tt> otherwise.</p>
<p>
</p>

<tt>(boolean?&nbsp;<tt>#f</tt>)&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(boolean?&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(boolean?&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>
<p></tt></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_598"></a>boolean=?<i> <i>bool<sub>1</sub></i> <i>bool<sub>2</sub></i> <i>bool<sub>3</sub></i>
<tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if the booleans are the same.
</p>
<p></p>
<p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.9"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.9">11.9&nbsp;&nbsp;Pairs and lists</a></h2>
<p></p>
<p>
A <a name="node_idx_600"></a><em>pair</em> is a
compound structure with two fields called the car and cdr fields (for
historical reasons).  Pairs are created by the procedure <tt>cons</tt>.
The car and cdr fields are accessed by the procedures <tt>car</tt> and
<tt>cdr</tt>.</p>
<p>
Pairs are used primarily to represent lists.  A list can
be defined recursively as either the empty list<a name="node_idx_602"></a>or a pair whose
cdr is a list.  More precisely, the set of lists is defined as the smallest
set <i>X</i> such that</p>
<p>
</p>
<ul>
<li><p>The empty list is in <i>X</i>.
</p>
<li><p>If <i>list</i> is in <i>X</i>, then any pair whose cdr field contains
<i>list</i> is also in <i>X</i>.
</p>
</ul><p></p>
<p>
The objects in the car fields of successive pairs of a list are the
elements of the list.  For example, a two-element list is a pair whose car
is the first element and whose cdr is a pair whose car is the second element
and whose cdr is the empty list.  The length of a list is the number of
elements, which is the same as the number of pairs.</p>
<p>
The empty list<a name="node_idx_604"></a>is a special object of its own type.
It is not a pair.  It has no elements and its length is zero.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The above definitions imply that all lists have finite length and are
terminated by the empty list.
</blockquote><p>
A chain of pairs not ending in the empty list is called an
<a name="node_idx_606"></a><em>improper list</em>.  Note that an improper list is not a list.
The list and dotted notations can be combined to represent
improper lists:</p>
<p>
</p>

<tt>(a&nbsp;b&nbsp;c&nbsp;.&nbsp;d)<p></tt></p>
<p>
is equivalent to</p>
<p>
</p>

<tt>(a&nbsp;.&nbsp;(b&nbsp;.&nbsp;(c&nbsp;.&nbsp;d)))<p></tt></p>
<p>
Whether a given pair is a list depends upon what is stored in the cdr
field.</p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_608"></a>pair?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if <i>obj</i> is a pair, and otherwise
returns <tt>#f</tt>.</p>
<p>
</p>

<tt>(pair?&nbsp;'(a&nbsp;.&nbsp;b))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(pair?&nbsp;'(a&nbsp;b&nbsp;c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(pair?&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(pair?&nbsp;'#(a&nbsp;b))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_610"></a>cons<i> <i>obj<sub>1</sub></i> <i>obj<sub>2</sub></i></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a newly allocated pair whose car is <i>obj<sub>1</sub></i> and whose cdr is
<i>obj<sub>2</sub></i>.  The pair is guaranteed to be different (in the sense of
<tt>eqv?</tt>) from every existing object.</p>
<p>
</p>

<tt>(cons&nbsp;'a&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(a)
<p class=nopadding>(cons&nbsp;'(a)&nbsp;'(b&nbsp;c&nbsp;d))&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;((a)&nbsp;b&nbsp;c&nbsp;d)</p>

<p class=nopadding>(cons&nbsp;&quot;a&quot;&nbsp;'(b&nbsp;c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(&quot;a&quot;&nbsp;b&nbsp;c)</p>

<p class=nopadding>(cons&nbsp;'a&nbsp;3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(a&nbsp;.&nbsp;3)</p>

<p class=nopadding>(cons&nbsp;'(a&nbsp;b)&nbsp;'c)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;((a&nbsp;b)&nbsp;.&nbsp;c)</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_612"></a>car<i> pair</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns the contents of the car field of <i>pair</i>.</p>
<p>
</p>

<tt>(car&nbsp;'(a&nbsp;b&nbsp;c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;a
<p class=nopadding>(car&nbsp;'((a)&nbsp;b&nbsp;c&nbsp;d))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(a)</p>

<p class=nopadding>(car&nbsp;'(1&nbsp;.&nbsp;2))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;1</p>

<p class=nopadding>(car&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<tt>&nbsp;&amp;assertion</tt>&nbsp;<i>exception</i></p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_614"></a>cdr<i> pair</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns the contents of the cdr field of <i>pair</i>.</p>
<p>
</p>

<tt>(cdr&nbsp;'((a)&nbsp;b&nbsp;c&nbsp;d))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(b&nbsp;c&nbsp;d)
<p class=nopadding>(cdr&nbsp;'(1&nbsp;.&nbsp;2))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;2</p>

<p class=nopadding>(cdr&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<tt>&nbsp;&amp;assertion</tt>&nbsp;<i>exception</i></p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_616"></a>caar<i> pair</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_618"></a>cadr<i> pair</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<img src="r6rs-Z-G-D-1.gif" border="0" alt="[r6rs-Z-G-D-1.gif]"> <div align=left><tt>(<a name="node_idx_620"></a>cdddar<i> pair</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_622"></a>cddddr<i> pair</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These procedures are compositions of <tt>car</tt> and <tt>cdr</tt>, where
for example <tt>caddr</tt> could be defined by</p>
<p>
</p>

<tt>(define&nbsp;caddr&nbsp;(lambda&nbsp;(x)&nbsp;(car&nbsp;(cdr&nbsp;(cdr&nbsp;x))))).<p></tt></p>
<p>
Arbitrary compositions, up to four deep, are provided.  There are
twenty-eight of these procedures in all.</p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_624"></a>null?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if <i>obj</i> is the empty list<a name="node_idx_626"></a>,
<tt>#f</tt>otherwise.</p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_628"></a>list?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if <i>obj</i> is a list, <tt>#f</tt> otherwise.
By definition, all lists are chains of pairs that have finite length and are terminated by
the empty list.</p>
<p>
</p>

<tt>(list?&nbsp;'(a&nbsp;b&nbsp;c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(list?&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(list?&nbsp;'(a&nbsp;.&nbsp;b))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_630"></a>list<i> <i>obj</i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a newly allocated list of its arguments.</p>
<p>
</p>

<tt>(list&nbsp;'a&nbsp;(+&nbsp;3&nbsp;4)&nbsp;'c)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(a&nbsp;7&nbsp;c)
<p class=nopadding>(list)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;()</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_632"></a>length<i> list</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns the length of <i>list</i>.</p>
<p>
</p>

<tt>(length&nbsp;'(a&nbsp;b&nbsp;c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;3
<p class=nopadding>(length&nbsp;'(a&nbsp;(b)&nbsp;(c&nbsp;d&nbsp;e)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;3</p>

<p class=nopadding>(length&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;0</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_634"></a>append<i> list <tt>...</tt> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a possibly improper list consisting of the elements of the first <i>list</i>
followed by the elements of the other <i>list</i>s, with <i>obj</i> as
the cdr of the final pair.
An improper list results if <i>obj</i> is not a
list.</p>
<p>
</p>

<tt>(append&nbsp;'(x)&nbsp;'(y))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(x&nbsp;y)
<p class=nopadding>(append&nbsp;'(a)&nbsp;'(b&nbsp;c&nbsp;d))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(a&nbsp;b&nbsp;c&nbsp;d)</p>

<p class=nopadding>(append&nbsp;'(a&nbsp;(b))&nbsp;'((c)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(a&nbsp;(b)&nbsp;(c))</p>

<p class=nopadding>(append&nbsp;'(a&nbsp;b)&nbsp;'(c&nbsp;.&nbsp;d))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(a&nbsp;b&nbsp;c&nbsp;.&nbsp;d)</p>

<p class=nopadding>(append&nbsp;'()&nbsp;'a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;a</p>
<p></tt></p>
<p>
If <tt>append</tt> constructs a nonempty chain of pairs, it is always
newly allocated.  If no pairs are allocated, <i>obj</i> is returned.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_636"></a>reverse<i> list</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a newly allocated list consisting of the elements of <i>list</i>
in reverse order.</p>
<p>
</p>

<tt>(reverse&nbsp;'(a&nbsp;b&nbsp;c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(c&nbsp;b&nbsp;a)
<p class=nopadding>(reverse&nbsp;'(a&nbsp;(b&nbsp;c)&nbsp;d&nbsp;(e&nbsp;(f))))&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;((e&nbsp;(f))&nbsp;d&nbsp;(b&nbsp;c)&nbsp;a)</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_638"></a>list-tail<i> list k</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>List</i> should be a list of size at least <i>k</i>.
The <tt>list-tail</tt> procedure returns the subchain of pairs of <i>list</i>
obtained by omitting the first <i>k</i> elements.</p>
<p>
</p>

<tt>(list-tail&nbsp;'(a&nbsp;b&nbsp;c&nbsp;d)&nbsp;2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(c&nbsp;d)<p></tt></p>
<p>
<em>Implementation responsibilities: </em>The implementation must check that <i>list</i> is a chain of
pairs whose length is at least <i>k</i>.  It should not check that it is a chain
of pairs beyond this length.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_640"></a>list-ref<i> list k</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>List</i> must be a list whose length is at least <i>k</i> + 1.
The <tt>list-tail</tt> procedure returns the <i>k</i>th element of <i>list</i>.</p>
<p>
</p>

<tt>(list-ref&nbsp;'(a&nbsp;b&nbsp;c&nbsp;d)&nbsp;2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;c<p></tt></p>
<p>
<em>Implementation responsibilities: </em>The implementation must check that <i>list</i> is a chain of
pairs whose length is at least <i>k</i> + 1.  It should not check that it is a list
of pairs beyond this length.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_642"></a>map<i> proc <i>list<sub>1</sub></i> <i>list<sub>2</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <i>list</i>s should all have the same length.  <i>Proc</i>
should accept as many arguments as there are
<i>list</i>s and return a single value.  <i>Proc</i> should not mutate
any of the <i>list</i>s.</p>
<p>
The <tt>map</tt> procedure applies <i>proc</i> element-wise to the elements of the
<i>list</i>s and returns a list of the results, in order.
<i>Proc</i> is always called in the same dynamic environment 
as <tt>map</tt> itself.
The order in which <i>proc</i> is applied to the elements of the
<i>list</i>s is unspecified.
If multiple returns occur from <tt>map</tt>, the 
values returned by earlier returns are not mutated.</p>
<p>
</p>

<tt>(map&nbsp;cadr&nbsp;'((a&nbsp;b)&nbsp;(d&nbsp;e)&nbsp;(g&nbsp;h)))&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(b&nbsp;e&nbsp;h)
<p class=nopadding></p>

<p class=nopadding>(map&nbsp;(lambda&nbsp;(n)&nbsp;(expt&nbsp;n&nbsp;n))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(1&nbsp;2&nbsp;3&nbsp;4&nbsp;5))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(1&nbsp;4&nbsp;27&nbsp;256&nbsp;3125)</p>

<p class=nopadding></p>

<p class=nopadding>(map&nbsp;+&nbsp;'(1&nbsp;2&nbsp;3)&nbsp;'(4&nbsp;5&nbsp;6))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(5&nbsp;7&nbsp;9)</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;((count&nbsp;0))</p>

<p class=nopadding>&nbsp;&nbsp;(map&nbsp;(lambda&nbsp;(ignored)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;count&nbsp;(+&nbsp;count&nbsp;1))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(a&nbsp;b)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(1&nbsp;2)&nbsp;<i>or</i>&nbsp;(2&nbsp;1)</p>
<p></tt></p>
<p>
<em>Implementation responsibilities: </em>The implementation should check that the <i>list</i>s all
have the same length.  The implementation must check the restrictions
on <i>proc</i> to the extent performed by applying it as described.  An
implementation may check whether <i>proc</i> is an appropriate argument
before applying it.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_644"></a>for-each<i> proc <i>list<sub>1</sub></i> <i>list<sub>2</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <i>list</i>s should all have the same length.  <i>Proc</i>
should accept as many arguments as there are
<i>list</i>s.  <i>Proc</i> should not mutate
any of the <i>list</i>s.</p>
<p>
The <tt>for-each</tt> procedure applies <i>proc</i>
element-wise to the elements of the
<i>list</i>s for its side effects,  in order from the first elements to the
last.
<i>Proc</i> is always called in the same dynamic environment 
as <tt>for-each</tt> itself.
The return values of <tt>for-each</tt> are unspecified.</p>
<p>
</p>

<tt>(let&nbsp;((v&nbsp;(make-vector&nbsp;5)))
<p class=nopadding>&nbsp;&nbsp;(for-each&nbsp;(lambda&nbsp;(i)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(vector-set!&nbsp;v&nbsp;i&nbsp;(*&nbsp;i&nbsp;i)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(0&nbsp;1&nbsp;2&nbsp;3&nbsp;4))</p>

<p class=nopadding>&nbsp;&nbsp;v)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;#(0&nbsp;1&nbsp;4&nbsp;9&nbsp;16)</p>

<p class=nopadding></p>

<p class=nopadding>(for-each&nbsp;(lambda&nbsp;(x)&nbsp;x)&nbsp;'(1&nbsp;2&nbsp;3&nbsp;4))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<em>unspecified</em></p>

<p class=nopadding></p>

<p class=nopadding>(for-each&nbsp;even?&nbsp;'())&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<em>unspecified</em></p>
<p></tt></p>
<p>
<em>Implementation responsibilities: </em>The implementation should check that the <i>list</i>s all
have the same length.  The implementation must check the restrictions
on <i>proc</i> to the extent performed by applying it as described.
An implementation may check whether <i>proc</i> is an appropriate argument
before applying it.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
Implementations of <tt>for-each</tt> may or may not tail-call
<i>proc</i> on the last elements.
</blockquote><p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.10"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.10">11.10&nbsp;&nbsp;Symbols</a></h2>
<p></p>
<p>
Symbols are objects whose usefulness rests on the fact that two
symbols are identical (in the sense of <tt>eq?</tt>, <tt>eqv?</tt> and <tt>equal?</tt>) if and only if their
names are spelled the same way. 
A symbol literal is formed using <tt>quote</tt>.</p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_646"></a>symbol?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if <i>obj</i> is a symbol, otherwise returns <tt>#f</tt>.</p>
<p>
</p>

<tt>(symbol?&nbsp;'foo)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt>
<p class=nopadding>(symbol?&nbsp;(car&nbsp;'(a&nbsp;b)))&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(symbol?&nbsp;&quot;bar&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(symbol?&nbsp;'nil)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(symbol?&nbsp;'())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding>(symbol?&nbsp;<tt>#f</tt>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_648"></a>symbol-&gt;string<i> symbol</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns the name of <i>symbol</i> as an immutable string.  </p>
<p>
</p>

<tt>(symbol-&gt;string&nbsp;'flying-fish)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;&quot;flying-fish&quot;</p>

<p class=nopadding>(symbol-&gt;string&nbsp;'Martin)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;&quot;Martin&quot;</p>

<p class=nopadding>(symbol-&gt;string</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;(string-&gt;symbol&nbsp;&quot;Malvina&quot;))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;&quot;Malvina&quot;</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_650"></a>symbol=?<i> <i>symbol<sub>1</sub></i> <i>symbol<sub>2</sub></i> <i>symbol<sub>3</sub></i>
<tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if the symbols are the same, i.e., if their names
are spelled the same.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_652"></a>string-&gt;symbol<i> string</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns the symbol whose name is <i>string</i>. </p>
<p>
</p>

<tt>(eq?&nbsp;'mISSISSIppi&nbsp;'mississippi)&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt>
<p class=nopadding>(string-&gt;symbol&nbsp;&quot;mISSISSIppi&quot;)&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;the&nbsp;symbol&nbsp;with&nbsp;name&nbsp;&quot;mISSISSIppi&quot;</p>

<p class=nopadding>(eq?&nbsp;'bitBlt&nbsp;(string-&gt;symbol&nbsp;&quot;bitBlt&quot;))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(eq?&nbsp;'JollyWog</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string-&gt;symbol</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(symbol-&gt;string&nbsp;'JollyWog)))&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(string=?&nbsp;&quot;K.&nbsp;Harper,&nbsp;M.D.&quot;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(symbol-&gt;string</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string-&gt;symbol&nbsp;&quot;K.&nbsp;Harper,&nbsp;M.D.&quot;)))&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.11"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.11">11.11&nbsp;&nbsp;Characters</a></h2>
<p></p>
<p>
<a name="node_idx_654"></a><a name="node_idx_656"></a></p>
<p>
<a name="node_idx_658"></a><em>Characters</em> are objects that represent Unicode scalar
values&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_27">27</a>].</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
Unicode defines a standard mapping between sequences of
<i>Unicode scalar values</i><a name="node_idx_660"></a><a name="node_idx_662"></a>(integers in the range 0 to
#x10FFFF, excluding the range #xD800 to #xDFFF) in the latest
version of the standard and human-readable &ldquo;characters&rdquo;. More
precisely, Unicode distinguishes between glyphs, which are printed
for humans to read, and characters, which are abstract entities that
map to glyphs (sometimes in a way that's sensitive to surrounding
characters).  Furthermore, different sequences of scalar values
sometimes correspond to the same character.  The relationships among
scalar, characters, and glyphs are subtle and complex.<p>
Despite this complexity, most things that a literate human would
call a &ldquo;character&rdquo; can be represented by a single Unicode scalar
value (although several sequences of Unicode scalar values may
represent that same character). For example, Roman letters, Cyrillic
letters, Hebrew consonants, and most Chinese characters fall into
this category.</p>
<p>
Unicode scalar values exclude the range #xD800 to #xDFFF, which
are part of the range of Unicode <i>code points</i><a name="node_idx_664"></a>.  However, the Unicode code points in this range,
the so-called <i>surrogates</i><a name="node_idx_666"></a>, are an
artifact of the UTF-16 encoding, and can only appear in specific
Unicode encodings, and even then only in pairs that encode scalar
values.  Consequently, all characters represent code points, but the
surrogate code points do not have representations as characters.
</p>
</blockquote><p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_668"></a>char?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if <i>obj</i> is a character, otherwise returns <tt>#f</tt>.</p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_670"></a>char-&gt;integer<i> char</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_672"></a>integer-&gt;char<i> 
<p class=noindent><em>s</em><em>v</em></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure</p>
&nbsp;</div>
<p>
<i>Sv</i> must be a Unicode scalar value, i.e., a non-negative exact
integer object in [0, #<em>x</em>D7FF] &cup;
[#<em>x</em>E000, #<em>x</em>10FFFF].</p>
<p>
Given a character, <tt>char-&gt;integer</tt> returns its Unicode scalar value
as an exact integer object.  
For a Unicode scalar value <i>sv</i>, <tt>integer-&gt;char</tt>
returns its associated character.</p>
<p>
</p>

<tt>(integer-&gt;char&nbsp;32)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#</tt><tt>\</tt>space
<p class=nopadding>(char-&gt;integer&nbsp;(integer-&gt;char&nbsp;5000))</p>

<p class=nopadding><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;5000</p>

<p class=nopadding>(integer-&gt;char&nbsp;<tt>#</tt><tt>\</tt>xD800)&nbsp;&nbsp;<tt>&nbsp;&amp;assertion</tt>&nbsp;<i>exception</i></p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_674"></a>char=?<i> <i>char<sub>1</sub></i> <i>char<sub>2</sub></i> <i>char<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_676"></a>char&lt;?<i> <i>char<sub>1</sub></i> <i>char<sub>2</sub></i> <i>char<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_678"></a>char&gt;?<i> <i>char<sub>1</sub></i> <i>char<sub>2</sub></i> <i>char<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_680"></a>char&lt;=?<i> <i>char<sub>1</sub></i> <i>char<sub>2</sub></i> <i>char<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_682"></a>char&gt;=?<i> <i>char<sub>1</sub></i> <i>char<sub>2</sub></i> <i>char<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>

These procedures impose a total ordering on the set of characters
according to their Unicode scalar values.</p>
<p>
</p>

<tt>(char&lt;?&nbsp;<tt>#</tt><tt>\</tt>z&nbsp;<tt>#</tt><tt>\</tt>&szlig;)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#t</tt>
<p class=nopadding>(char&lt;?&nbsp;<tt>#</tt><tt>\</tt>z&nbsp;<tt>#</tt><tt>\</tt>Z)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#f</tt></p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.12"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.12">11.12&nbsp;&nbsp;Strings</a></h2>
<p></p>
<p>
Strings are sequences of characters.  </p>
<p>
The <em>length</em> of a string is the number of characters that it
contains.  This number is fixed when the
string is created.  The <a name="node_idx_684"></a><em>valid indices</em> of a string are the
integers less than the length of the string.  The first
character of a string has index 0, the second has index 1, and so on.</p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_686"></a>string?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if <i>obj</i> is a string, otherwise returns <tt>#f</tt>.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_688"></a>make-string<i> k</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_690"></a>make-string<i> k char</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a newly allocated string of
length <i>k</i>.  If <i>char</i> is given, then all elements of the string
are initialized to <i>char</i>, otherwise the contents of the
<i>string</i> are unspecified.</p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_692"></a>string<i> char <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a newly allocated string composed of the arguments.</p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_694"></a>string-length<i> string</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns the number of characters in the given <i>string</i> as an exact
integer object.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_696"></a>string-ref<i> string k</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>K</i> must be a valid index of <i>string</i>.
The <tt>string-ref</tt> procedure returns character </p>

<p class=noindent><em>k</em> of <i>string</i> using zero-origin indexing.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
Implementors should make <tt>string-ref</tt> run in constant
time.
</blockquote>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_698"></a>string=?<i> <i>string<sub>1</sub></i> <i>string<sub>2</sub></i> <i>string<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if the strings are the same length and contain the same
characters in the same positions.  Otherwise, the <tt>string=?</tt>
procedure returns <tt>#f</tt>.</p>
<p>
</p>

<tt>(string=?&nbsp;&quot;Stra&szlig;e&quot;&nbsp;&quot;Strasse&quot;)&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#f</tt><p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_700"></a>string&lt;?<i> <i>string<sub>1</sub></i> <i>string<sub>2</sub></i> <i>string<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_702"></a>string&gt;?<i> <i>string<sub>1</sub></i> <i>string<sub>2</sub></i> <i>string<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_704"></a>string&lt;=?<i> <i>string<sub>1</sub></i> <i>string<sub>2</sub></i> <i>string<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_706"></a>string&gt;=?<i> <i>string<sub>1</sub></i> <i>string<sub>2</sub></i> <i>string<sub>3</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
These procedures are the lexicographic extensions to strings of the
corresponding orderings on characters.  For example, <tt>string&lt;?</tt> is
the lexicographic ordering on strings induced by the ordering
<tt>char&lt;?</tt> on characters.  If two strings differ in length but
are the same up to the length of the shorter string, the shorter string
is considered to be lexicographically less than the longer string.</p>
<p>
</p>

<tt>(string&lt;?&nbsp;&quot;z&quot;&nbsp;&quot;&szlig;&quot;)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#t</tt>
<p class=nopadding>(string&lt;?&nbsp;&quot;z&quot;&nbsp;&quot;zz&quot;)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#t</tt></p>

<p class=nopadding>(string&lt;?&nbsp;&quot;z&quot;&nbsp;&quot;Z&quot;)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#f</tt></p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_708"></a>substring<i> string start end</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>String</i> must be a string, and <i>start</i> and <i>end</i>
must be exact integer objects satisfying
</p>
<div class=mathdisplay align=left><table><tr><td></td><td><table><tr><td align=center>0 &le; </td><td><table><tr><td align=center><i></td><td><table><tr><td align=center></td><td><table><tr><td align=center>start</td></tr></table></td><td></td></tr></table></td><td></i></td></tr></table></td><td> &le; </td><td><table><tr><td align=center><i></td><td><table><tr><td align=center></td><td><table><tr><td align=center>end</td></tr></table></td><td></td></tr></table></td><td></i></td></tr></table></td><td> &le; </td><td><table><tr><td align=center><tt>(string-length <i>string</i>).</tt></td></tr></table></td><td></td></tr></table></td><td></td></tr></table></div>
<p class=noindent>
The <tt>substring</tt> procedure returns a newly allocated string formed from the characters of
<i>string</i> beginning with index <i>start</i> (inclusive) and ending with index
<i>end</i> (exclusive).
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_710"></a>string-append<i> <i>string</i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a newly allocated string whose characters form the concatenation of the
given strings.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_712"></a>string-&gt;list<i> string</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_714"></a>list-&gt;string<i> list</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>List</i> must be a list of characters.
The <tt>string-&gt;list</tt> procedure returns a newly allocated list of the
characters that make up the given string.  The <tt>list-&gt;string</tt> procedure
returns a newly allocated string formed from the characters in 
<i>list</i>. The <tt>string-&gt;list</tt>
and <tt>list-&gt;string</tt> procedures are
inverses so far as <tt>equal?</tt> is concerned.  
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_716"></a>string-for-each<i> proc <i>string<sub>1</sub></i> <i>string<sub>2</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <i>string</i>s must all have the same length.  <i>Proc</i>
should accept as many arguments as there are <i>string</i>s.
The <tt>string-for-each</tt> procedure applies <i>proc</i>
element-wise to the characters of the
<i>string</i>s for its side effects,  in order from the first characters to the
last.
<i>Proc</i> is always called in the same dynamic environment 
as <tt>string-for-each</tt> itself.
The return values of <tt>string-for-each</tt> are unspecified.</p>
<p>
Analogous to <tt>for-each</tt>.</p>
<p>
<em>Implementation responsibilities: </em>The implementation must check the restrictions
on <i>proc</i> to the extent performed by applying it as described.
An
implementation may check whether <i>proc</i> is an appropriate argument
before applying it.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_718"></a>string-copy<i> string</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a newly allocated copy of the given <i>string</i>.</p>
<p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.13"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.13">11.13&nbsp;&nbsp;Vectors</a></h2>
<p></p>
<p>
Vectors are heterogeneous structures whose elements are indexed
by integers.  A vector typically occupies less space than a list
of the same length, and the average time needed to access a randomly
chosen element is typically less for the vector than for the list.</p>
<p>
The <em>length</em> of a vector is the number of elements that it
contains.  This number is a non-negative integer that is fixed when the
vector is created.
The <em>valid indices</em><a name="node_idx_720"></a>of a
vector are the exact non-negative integer objects less than the length of the
vector.  The first element in a vector is indexed by zero, and the last
element is indexed by one less than the length of the vector.</p>
<p>
Like list constants, vector constants must be quoted:</p>
<p>
</p>

<tt>'#(0&nbsp;(2&nbsp;2&nbsp;2&nbsp;2)&nbsp;&quot;Anna&quot;)&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;#(0&nbsp;(2&nbsp;2&nbsp;2&nbsp;2)&nbsp;&quot;Anna&quot;)<p></tt></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_722"></a>vector?<i> obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns <tt>#t</tt> if <i>obj</i> is a vector.  Otherwise the procedure
returns <tt>#f</tt>.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_724"></a>make-vector<i> k</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_726"></a>make-vector<i> k fill</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a newly allocated vector of <i>k</i> elements.  If a second
argument is given, then each element is initialized to <i>fill</i>.
Otherwise the initial contents of each element is unspecified.</p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_728"></a>vector<i> obj <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns a newly allocated vector whose elements contain the given
arguments.  Analogous to <tt>list</tt>.</p>
<p>
</p>

<tt>(vector&nbsp;'a&nbsp;'b&nbsp;'c)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;#(a&nbsp;b&nbsp;c)<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_730"></a>vector-length<i> vector</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Returns the number of elements in <i>vector</i> as an exact integer object.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_732"></a>vector-ref<i> vector k</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>K</i> must be a valid index of <i>vector</i>.
The <tt>vector-ref</tt> procedure returns the contents of element </p>

<p class=noindent><em>k</em> of
<i>vector</i>.</p>
<p>
</p>

<tt>(vector-ref&nbsp;'#(1&nbsp;1&nbsp;2&nbsp;3&nbsp;5&nbsp;8&nbsp;13&nbsp;21)&nbsp;5)&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;8<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_734"></a>vector-set!<i> vector k obj</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>K</i> must be a valid index of <i>vector</i>.
The <tt>vector-set!</tt> procedure stores <i>obj</i> in element </p>

<p class=noindent><em>k</em> of
<i>vector</i>, and returns unspecified values.</p>
<p>
Passing an immutable vector to <tt>vector-set!</tt> should cause an exception
with condition type <tt>&amp;assertion</tt> to be raised.</p>
<p>
</p>

<tt>(let&nbsp;((vec&nbsp;(vector&nbsp;0&nbsp;'(2&nbsp;2&nbsp;2&nbsp;2)&nbsp;&quot;Anna&quot;)))
<p class=nopadding>&nbsp;&nbsp;(vector-set!&nbsp;vec&nbsp;1&nbsp;'(&quot;Sue&quot;&nbsp;&quot;Sue&quot;))</p>

<p class=nopadding>&nbsp;&nbsp;vec)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;#(0&nbsp;(&quot;Sue&quot;&nbsp;&quot;Sue&quot;)&nbsp;&quot;Anna&quot;)</p>

<p class=nopadding></p>

<p class=nopadding>(vector-set!&nbsp;'#(0&nbsp;1&nbsp;2)&nbsp;1&nbsp;&quot;doe&quot;)&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i></p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;constant&nbsp;vector</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;should&nbsp;raise&nbsp;<tt>&nbsp;&amp;assertion</tt>&nbsp;<i>exception</i></p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_736"></a>vector-&gt;list<i> vector</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_738"></a>list-&gt;vector<i> list</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <tt>vector-&gt;list</tt> procedure returns a newly allocated list of the objects contained
in the elements of <i>vector</i>.  The <tt>list-&gt;vector</tt> procedure returns a newly
created vector initialized to the elements of the list <i>list</i>.</p>
<p>
</p>

<tt>(vector-&gt;list&nbsp;'#(dah&nbsp;dah&nbsp;didah))&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(dah&nbsp;dah&nbsp;didah)
<p class=nopadding>(list-&gt;vector&nbsp;'(dididit&nbsp;dah))&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;#(dididit&nbsp;dah)</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_740"></a>vector-fill!<i> vector fill</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Stores <i>fill</i> in every element of <i>vector</i>
and returns unspecified values.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_742"></a>vector-map<i> proc <i>vector<sub>1</sub></i> <i>vector<sub>2</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <i>vector</i>s must all have the same length.  <i>Proc</i>
should accept as many arguments as there are <i>vector</i>s and return a
single value.</p>
<p>
The <tt>vector-map</tt> procedure applies <i>proc</i> element-wise to the elements of the
<i>vector</i>s and returns a vector of the results, in order.
<i>Proc</i> is always called in the same dynamic environment 
as <tt>vector-map</tt> itself.
The order in which <i>proc</i> is applied to the elements of the
<i>vector</i>s is unspecified.
If multiple returns occur from <tt>vector-map</tt>, the return
values returned by earlier returns are not mutated.</p>
<p>
Analogous to <tt>map</tt>.</p>
<p>
<em>Implementation responsibilities: </em>The implementation must check the restrictions
on <i>proc</i> to the extent performed by applying it as described.
An
implementation may check whether <i>proc</i> is an appropriate argument
before applying it.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_744"></a>vector-for-each<i> proc <i>vector<sub>1</sub></i> <i>vector<sub>2</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
The <i>vector</i>s must all have the same length.  <i>Proc</i>
should accept as many arguments as there are <i>vector</i>s.
The <tt>vector-for-each</tt> procedure applies <i>proc</i>
element-wise to the elements of the
<i>vector</i>s for its side effects,  in order from the first elements to the
last.
<i>Proc</i> is always called in the same dynamic environment 
as <tt>vector-for-each</tt> itself.
The return values of <tt>vector-for-each</tt> are unspecified.</p>
<p>
Analogous to <tt>for-each</tt>.</p>
<p>
<em>Implementation responsibilities: </em>The implementation must check the restrictions
on <i>proc</i> to the extent performed by applying it as described.
An
implementation may check whether <i>proc</i> is an appropriate argument
before applying it.
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.14"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.14">11.14&nbsp;&nbsp;Errors and violations</a></h2>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_746"></a>error<i> who message <i>irritant<sub>1</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_748"></a>assertion-violation<i> who message <i>irritant<sub>1</sub></i> <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>Who</i> must be a string or a symbol or <tt>#f</tt>.
<i>Message</i> must be a string.
The <i>irritant</i>s are arbitrary objects.</p>
<p>
These procedures raise an exception.  The <tt>error</tt>
procedure should be called when an error has occurred, typically caused by
something that has gone wrong in the interaction of the program with the
external world or the user.  The <tt>assertion-violation</tt> procedure
should be called when an invalid call to a procedure was made, either passing an
invalid number of arguments, or passing an argument that it is not
specified to handle.</p>
<p>
The <i>who</i> argument should describe the procedure or operation that
detected the exception.  The <i>message</i> argument should describe
the exceptional situation.  The <i>irritant</i>s should be the arguments
to the operation that detected the operation.</p>
<p>
The condition object provided with the exception (see
library chapter&nbsp;on &ldquo;Exceptions
and conditions&rdquo;) has the following condition types:
</p>
<ul>
<li><p>If <i>who</i> is not <tt>#f</tt>, the condition has condition type
<tt>&amp;who</tt>, with <i>who</i> as the value of its field.  In
that case, <i>who</i> should be the name of the procedure or entity that
detected the exception.  If it is <tt>#f</tt>, the condition does not
have condition type <tt>&amp;who</tt>.
</p>
<li><p>The condition has condition type <tt>&amp;message</tt>, with
<i>message</i> as the value of its field.
</p>
<li><p>The condition has condition type <tt>&amp;irritants</tt>, and its
field has as its value a list of the <i>irritant</i>s.
</p>
</ul><p>
Moreover, the condition created by <tt>error</tt> has condition type 
<tt>&amp;error</tt>, and the condition created by <tt>assertion-violation</tt> has
condition type <tt>&amp;assertion</tt>.</p>
<p>
</p>

<tt>(define&nbsp;(fac&nbsp;n)
<p class=nopadding>&nbsp;&nbsp;(if&nbsp;(not&nbsp;(integer-valued?&nbsp;n))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assertion-violation</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fac&nbsp;&quot;non-integral&nbsp;argument&quot;&nbsp;n))</p>

<p class=nopadding>&nbsp;&nbsp;(if&nbsp;(negative?&nbsp;n)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assertion-violation</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fac&nbsp;&quot;negative&nbsp;argument&quot;&nbsp;n))</p>

<p class=nopadding>&nbsp;&nbsp;(letrec</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((loop&nbsp;(lambda&nbsp;(n&nbsp;r)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(zero?&nbsp;n)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(loop&nbsp;(-&nbsp;n&nbsp;1)&nbsp;(*&nbsp;r&nbsp;n))))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(loop&nbsp;n&nbsp;1)))</p>

<p class=nopadding></p>

<p class=nopadding>(fac&nbsp;5)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;120</p>

<p class=nopadding>(fac&nbsp;4.5)&nbsp;&nbsp;<tt>&nbsp;&amp;assertion</tt>&nbsp;<i>exception</i></p>

<p class=nopadding>(fac&nbsp;-3)&nbsp;&nbsp;<tt>&nbsp;&amp;assertion</tt>&nbsp;<i>exception</i></p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_750"></a>assert<i> &lt;expression&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
An <tt>assert</tt> form is evaluated by evaluating &lt;expression&gt;.
If &lt;expression&gt; returns a true value, that value is returned
from the <tt>assert</tt> expression.  If &lt;expression&gt; returns
<tt>#f</tt>, an exception with condition types <tt>&amp;assertion</tt> and
<tt>&amp;message</tt> is raised.  The message provided in the condition
object is implementation-dependent.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
Implementations should exploit the fact that
<tt>assert</tt> is syntax to provide as much information as possible
about the location of the assertion failure.
</blockquote>
<p></p>
<p>
</p>
<a name="node_sec_11.15"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.15">11.15&nbsp;&nbsp;Control features</a></h2>
<p>
</p>
<p>
This chapter describes various primitive procedures which control the
flow of program execution in special ways.</p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_752"></a>apply<i> proc <i>arg<sub>1</sub></i> <tt>...</tt> rest-args</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>Rest-args</i> must be a list.
<i>Proc</i> should accept <em>n</em> arguments, where <em>n</em> is
number of <i>arg</i>s plus the length of <i>rest-args</i>.
The <tt>apply</tt> procedure calls <i>proc</i> with the elements of the list
<tt>(append (list <i>arg<sub>1</sub></i> <tt>...</tt>) <i>rest-args</i>)</tt> as the actual
arguments.</p>
<p>
If a call to <tt>apply</tt> occurs in a tail context, the call
to <i>proc</i> is also in a tail context.</p>
<p>
</p>

<tt>(apply&nbsp;+&nbsp;(list&nbsp;3&nbsp;4))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;7
<p class=nopadding></p>

<p class=nopadding>(define&nbsp;compose</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(f&nbsp;g)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;args</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(f&nbsp;(apply&nbsp;g&nbsp;args)))))</p>

<p class=nopadding></p>

<p class=nopadding>((compose&nbsp;sqrt&nbsp;*)&nbsp;12&nbsp;75)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;30</p>
<p></tt>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_754"></a>call-with-current-continuation<i> proc</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(<a name="node_idx_756"></a>call/cc<i> proc</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
 <i>Proc</i> should accept one
argument. The procedure <tt>call-with-current-continuation</tt> 
(which is the same as the procedure <tt>call/cc</tt>) packages
the current continuation as an &ldquo;escape
procedure&rdquo;<a name="node_idx_758"></a>and passes it as an argument to
<i>proc</i>.  The escape procedure is a Scheme procedure that, if it is
later called, will abandon whatever continuation is in effect at that later
time and will instead reinstate the continuation that was in effect
when the escape procedure was created.  Calling the escape procedure
may cause the invocation of <i>before</i> and <i>after</i> procedures installed using
<tt>dynamic-wind</tt>.</p>
<p>
The escape procedure accepts the same number of arguments as the
continuation of the original call to <tt>call-with-current-continuation</tt>.</p>
<p>
The escape procedure that is passed to <i>proc</i> has
unlimited extent just like any other procedure in Scheme.  It may be stored
in variables or data structures and may be called as many times as desired.</p>
<p>
If a call to <tt>call-with-current-continuation</tt> occurs in a tail
context, the call to <i>proc</i> is also in a tail context.</p>
<p>
The following examples show only some ways in which
<tt>call-with-current-continuation</tt> is used.  If all real uses were as
simple as these examples, there would be no need for a procedure with
the power of <tt>call-with-current-continuation</tt>.</p>
<p>
</p>

<tt>(call-with-current-continuation
<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(exit)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(for-each&nbsp;(lambda&nbsp;(x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(negative?&nbsp;x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(exit&nbsp;x)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(54&nbsp;0&nbsp;37&nbsp;-3&nbsp;245&nbsp;19))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;<tt>#t</tt>))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-3</p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;list-length</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(obj)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(call-with-current-continuation</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(return)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(letrec&nbsp;((r</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(obj)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond&nbsp;((null?&nbsp;obj)&nbsp;0)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((pair?&nbsp;obj)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;(r&nbsp;(cdr&nbsp;obj))&nbsp;1))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(else&nbsp;(return&nbsp;<tt>#f</tt>))))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r&nbsp;obj))))))</p>

<p class=nopadding></p>

<p class=nopadding>(list-length&nbsp;'(1&nbsp;2&nbsp;3&nbsp;4))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;4</p>

<p class=nopadding></p>

<p class=nopadding>(list-length&nbsp;'(a&nbsp;b&nbsp;.&nbsp;c))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#f</tt></p>

<p class=nopadding></p>

<p class=nopadding>(call-with-current-continuation&nbsp;procedure?)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<tt>#t</tt></p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
Calling an escape procedure reenters the dynamic extent of the call
to <tt>call-with-current-continuation</tt>, and thus restores its
dynamic environment; see section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.12">5.12</a>.
</blockquote><p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_760"></a>values<i> obj <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
Delivers all of its arguments to its continuation.
The <tt>values</tt> procedure might be defined as follows:
</p>

<tt>(define&nbsp;(values&nbsp;.&nbsp;things)
<p class=nopadding>&nbsp;&nbsp;(call-with-current-continuation&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(cont)&nbsp;(apply&nbsp;cont&nbsp;things))))</p>
<p></tt></p>
<p>
The continuations of all non-final expressions within a sequence of
expressions, such as in <tt>lambda</tt>, <tt>begin</tt>, <tt>let</tt>, <tt>let*</tt>, <tt>letrec</tt>, <tt>letrec*</tt>, <tt>let-values</tt>, <tt>let*-values</tt>, <tt>case</tt>, and <tt>cond</tt> forms, usually take an
arbitrary number of values.</p>
<p>
Except for these and the continuations created by <tt>call-with-values</tt>, <tt>let-values</tt>, and <tt>let*-values</tt>,
continuations implicitly accepting a single value, such as the
continuations of &lt;operator&gt; and &lt;operand&gt;s of procedure
calls or the &lt;test&gt; expressions in conditionals, take exactly
one value.  The effect of passing an inappropriate number of values to
such a continuation is undefined.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_762"></a>call-with-values<i> producer consumer</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>Producer</i> must be a procedure and should accept zero
arguments.  <i>Consumer</i> must be a procedure and should accept as many
values as <i>producer</i> returns.
The <tt>call-with-values</tt> procedure calls <i>producer</i> with no arguments and
a continuation that, when passed some values, calls the
<i>consumer</i> procedure with those values as arguments.
The continuation for the call to <i>consumer</i> is the
continuation of the call to <tt>call-with-values</tt>.</p>
<p>
</p>

<tt>(call-with-values&nbsp;(lambda&nbsp;()&nbsp;(values&nbsp;4&nbsp;5))
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(a&nbsp;b)&nbsp;b))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;5</p>

<p class=nopadding></p>

<p class=nopadding>(call-with-values&nbsp;*&nbsp;-)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;-1</p>
<p></tt></p>
<p>
If a call to <tt>call-with-values</tt> occurs in a tail context, the call
to <i>consumer</i> is also in a tail context.</p>
<p>
<em>Implementation responsibilities: </em>After <i>producer</i> returns, the implementation must check
that <i>consumer</i> accepts as many values as <i>consumer</i> has
returned.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_764"></a>dynamic-wind<i> before thunk after</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
<i>Before</i>, <i>thunk</i>, and <i>after</i> must be procedures,
and each should accept zero arguments.  These procedures may return
any number of values.  The <tt>dynamic-wind</tt> procedure calls
<i>thunk</i> without arguments, returning the results of this call.
Moreover, <tt>dynamic-wind</tt> calls <i>before</i> without arguments
whenever the dynamic extent of the call to <i>thunk</i> is entered, and
<i>after</i> without arguments whenever the dynamic extent of the call
to <i>thunk</i> is exited.  Thus, in the absence of calls to escape
procedures created by <tt>call-with-current-continuation</tt>, <tt>dynamic-wind</tt> calls <i>before</i>, <i>thunk</i>, and <i>after</i>, in
that order.</p>
<p>
While the calls to <i>before</i> and <i>after</i> are not considered to be
within the dynamic extent of the call to <i>thunk</i>, calls to the <i>before</i>
and <i>after</i> procedures of any other calls to <tt>dynamic-wind</tt> that occur
within the dynamic extent of the call to <i>thunk</i> are considered to be
within the dynamic extent of the call to <i>thunk</i>.</p>
<p>
More precisely, an escape procedure transfers control out of the
dynamic extent of a set of zero or more active <tt>dynamic-wind</tt>
calls <em>x</em> <tt>...</tt> and transfer control into the dynamic extent
of a set of zero or more active <tt>dynamic-wind</tt> calls
<em>y</em> <tt>...</tt>.  
It leaves the dynamic extent of the most recent <em>x</em> and calls without
arguments the corresponding <i>after</i> procedure.
If the <i>after</i> procedure returns, the escape procedure proceeds to
the next most recent <em>x</em>, and so on.
Once each <em>x</em> has been handled in this manner,
the escape procedure calls without arguments the <i>before</i> procedure
corresponding to the least recent <em>y</em>.
If the <i>before</i> procedure returns, the escape procedure reenters the
dynamic extent of the least recent <em>y</em> and proceeds with the next least
recent <em>y</em>, and so on.
Once each <em>y</em> has been handled in this manner, control is transferred to
the continuation packaged in the escape procedure.</p>
<p>
<em>Implementation responsibilities: </em>The implementation must check the restrictions on
<i>thunk</i> and <i>after</i> only if they are actually called.</p>
<p>
</p>

<tt>(let&nbsp;((path&nbsp;'())
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(c&nbsp;#f))</p>

<p class=nopadding>&nbsp;&nbsp;(let&nbsp;((add&nbsp;(lambda&nbsp;(s)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;path&nbsp;(cons&nbsp;s&nbsp;path)))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(dynamic-wind</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()&nbsp;(add&nbsp;'connect))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(add&nbsp;(call-with-current-continuation</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(c0)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;c&nbsp;c0)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'talk1))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()&nbsp;(add&nbsp;'disconnect)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(&lt;&nbsp;(length&nbsp;path)&nbsp;4)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(c&nbsp;'talk2)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(reverse&nbsp;path))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(connect&nbsp;talk1&nbsp;disconnect</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connect&nbsp;talk2&nbsp;disconnect)</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;((n&nbsp;0))</p>

<p class=nopadding>&nbsp;&nbsp;(call-with-current-continuation</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(k)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(dynamic-wind</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;n&nbsp;(+&nbsp;n&nbsp;1))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(k))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;n&nbsp;(+&nbsp;n&nbsp;2)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;n&nbsp;(+&nbsp;n&nbsp;4))))))</p>

<p class=nopadding>&nbsp;&nbsp;n)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;1</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;((n&nbsp;0))</p>

<p class=nopadding>&nbsp;&nbsp;(call-with-current-continuation</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(k)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(dynamic-wind</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(dynamic-wind</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;n&nbsp;(+&nbsp;n&nbsp;1))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(k))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;n&nbsp;(+&nbsp;n&nbsp;2))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(k))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;n&nbsp;(+&nbsp;n&nbsp;4))))))</p>

<p class=nopadding>&nbsp;&nbsp;n)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;7</p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
Entering a dynamic extent restores its dynamic environment; see
section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.12">5.12</a>.
</blockquote>
<p></p>
<p>
</p>
<a name="node_sec_11.16"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.16">11.16&nbsp;&nbsp;Iteration</a></h2>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_766"></a>let<i> &lt;variable&gt; &lt;bindings&gt; &lt;body&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>

&ldquo;Named <tt>let</tt>&rdquo; is a variant on the syntax of <tt>let</tt> that provides
a general looping construct and may also be used to express
recursion.
It has the same syntax and semantics as ordinary <tt>let</tt>
except that &lt;variable&gt; is bound within &lt;body&gt; to a procedure
whose parameters are the bound variables and whose body is
&lt;body&gt;.  Thus the execution of &lt;body&gt; may be repeated by
invoking the procedure named by &lt;variable&gt;.</p>
<p>
</p>

<tt>(let&nbsp;loop&nbsp;((numbers&nbsp;'(3&nbsp;-2&nbsp;1&nbsp;6&nbsp;-5))
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(nonneg&nbsp;'())</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(neg&nbsp;'()))</p>

<p class=nopadding>&nbsp;&nbsp;(cond&nbsp;((null?&nbsp;numbers)&nbsp;(list&nbsp;nonneg&nbsp;neg))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((&gt;=&nbsp;(car&nbsp;numbers)&nbsp;0)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(loop&nbsp;(cdr&nbsp;numbers)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;(car&nbsp;numbers)&nbsp;nonneg)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;neg))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((&lt;&nbsp;(car&nbsp;numbers)&nbsp;0)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(loop&nbsp;(cdr&nbsp;numbers)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nonneg</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;(car&nbsp;numbers)&nbsp;neg)))))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;((6&nbsp;1&nbsp;3)&nbsp;(-5&nbsp;-2))</p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.17"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.17">11.17&nbsp;&nbsp;Quasiquotation</a></h2>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_768"></a>quasiquote<i> &lt;qq template&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>

<a name="node_idx_770"></a><div align=left><tt>unquote</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>auxiliary syntax&nbsp;</div>

<a name="node_idx_772"></a><div align=left><tt>unquote-splicing</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>auxiliary syntax&nbsp;</div>
<p>
&ldquo;Backquote&rdquo; or &ldquo;quasiquote&rdquo;<a name="node_idx_774"></a>expressions are useful
for constructing a list or vector structure when some but not all of the
desired structure is known in advance.  </p>
<p>
<em>Syntax: </em>&lt;Qq template&gt; should be as specified by the grammar at
the end of this entry.</p>
<p>
<em>Semantics: </em>If no
<tt>unquote</tt> or <tt>unquote-splicing</tt> forms
appear within the &lt;qq template&gt;, the result of
evaluating
<tt>(quasiquote &lt;qq template&gt;)</tt> is equivalent to the result of evaluating
<tt>(quote &lt;qq template&gt;)</tt>.</p>
<p>
If an <tt>(unquote &lt;expression&gt; <tt>...</tt>)</tt> form appears inside a
&lt;qq template&gt;, however, the &lt;expression&gt;s are evaluated
(&ldquo;unquoted&rdquo;) and their results are inserted into the structure instead
of the <tt>unquote</tt> form.</p>
<p>
If an <tt>(unquote-splicing &lt;expression&gt; <tt>...</tt>)</tt> form
appears inside a &lt;qq template&gt;, then the &lt;expression&gt;s must
evaluate to lists; the opening and closing parentheses of the lists are
then &ldquo;stripped away&rdquo; and the elements of the lists are inserted in
place of the <tt>unquote-splicing</tt> form.</p>
<p>
Any <tt>unquote-splicing</tt> or multi-operand <tt>unquote</tt> form must
appear only within a list or vector &lt;qq template&gt;.</p>
<p>
As noted in section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.3.5">4.3.5</a>,
<tt>(quasiquote &lt;qq template&gt;)</tt> may be abbreviated
<tt>`</tt>&lt;qq template&gt;,
<tt>(unquote &lt;expression&gt;)</tt> may be abbreviated
<tt>,</tt>&lt;expression&gt;, and
<tt>(unquote-splicing &lt;expression&gt;)</tt> may be abbreviated
<tt>,</tt><tt>@</tt>&lt;expression&gt;.</p>
<p>
</p>

<tt>`(list&nbsp;,(+&nbsp;1&nbsp;2)&nbsp;4)&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(list&nbsp;3&nbsp;4)
<p class=nopadding>(let&nbsp;((name&nbsp;'a))&nbsp;`(list&nbsp;,name&nbsp;',name))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(list&nbsp;a&nbsp;(quote&nbsp;a))</p>

<p class=nopadding>`(a&nbsp;,(+&nbsp;1&nbsp;2)&nbsp;,@(map&nbsp;abs&nbsp;'(4&nbsp;-5&nbsp;6))&nbsp;b)&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(a&nbsp;3&nbsp;4&nbsp;5&nbsp;6&nbsp;b)</p>

<p class=nopadding>`((<tt>&nbsp;foo</tt>&nbsp;,(-&nbsp;10&nbsp;3))&nbsp;,@(cdr&nbsp;'(c))&nbsp;.&nbsp;,(car&nbsp;'(cons)))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;((foo&nbsp;7)&nbsp;.&nbsp;cons)</p>

<p class=nopadding>`#(10&nbsp;5&nbsp;,(sqrt&nbsp;4)&nbsp;,@(map&nbsp;sqrt&nbsp;'(16&nbsp;9))&nbsp;8)&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;#(10&nbsp;5&nbsp;2&nbsp;4&nbsp;3&nbsp;8)</p>

<p class=nopadding>(let&nbsp;((name&nbsp;'foo))</p>

<p class=nopadding>&nbsp;&nbsp;`((unquote&nbsp;name&nbsp;name&nbsp;name)))<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(foo&nbsp;foo&nbsp;foo)</p>

<p class=nopadding>(let&nbsp;((name&nbsp;'(foo)))</p>

<p class=nopadding>&nbsp;&nbsp;`((unquote-splicing&nbsp;name&nbsp;name&nbsp;name)))<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(foo&nbsp;foo&nbsp;foo)</p>

<p class=nopadding>(let&nbsp;((q&nbsp;'((append&nbsp;x&nbsp;y)&nbsp;(sqrt&nbsp;9))))</p>

<p class=nopadding>&nbsp;&nbsp;``(foo&nbsp;,,@q))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;`(foo</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(unquote&nbsp;(append&nbsp;x&nbsp;y)&nbsp;(sqrt&nbsp;9)))</p>

<p class=nopadding>(let&nbsp;((x&nbsp;'(2&nbsp;3))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(y&nbsp;'(4&nbsp;5)))</p>

<p class=nopadding>&nbsp;&nbsp;`(foo&nbsp;(unquote&nbsp;(append&nbsp;x&nbsp;y)&nbsp;(sqrt&nbsp;9))))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(foo&nbsp;(2&nbsp;3&nbsp;4&nbsp;5)&nbsp;3)</p>
<p></tt></p>
<p>
Quasiquote forms may be nested.  Substitutions are made only for
unquoted components appearing at the same nesting level
as the outermost <tt>quasiquote</tt>.  The nesting level increases by one inside
each successive quasiquotation, and decreases by one inside each
unquotation.</p>
<p>
</p>

<tt>`(a&nbsp;`(b&nbsp;,(+&nbsp;1&nbsp;2)&nbsp;,(foo&nbsp;,(+&nbsp;1&nbsp;3)&nbsp;d)&nbsp;e)&nbsp;f)&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(a&nbsp;`(b&nbsp;,(+&nbsp;1&nbsp;2)&nbsp;,(foo&nbsp;4&nbsp;d)&nbsp;e)&nbsp;f)
<p class=nopadding>(let&nbsp;((name1&nbsp;'x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(name2&nbsp;'y))</p>

<p class=nopadding>&nbsp;&nbsp;`(a&nbsp;`(b&nbsp;,,name1&nbsp;,',name2&nbsp;d)&nbsp;e))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;(a&nbsp;`(b&nbsp;,x&nbsp;,'y&nbsp;d)&nbsp;e)</p>
<p></tt></p>
<p>
A <tt>quasiquote</tt> expression may return either fresh, mutable objects
or literal structure for any structure that is constructed at run time
during the evaluation of the expression.  Portions that do not need to
be rebuilt are always literal.  Thus,
</p>

<tt>(let&nbsp;((a&nbsp;3))&nbsp;`((1&nbsp;2)&nbsp;,a&nbsp;,4&nbsp;,'five&nbsp;6))<p></tt>
may be equivalent to either of the following expressions:
</p>

<tt>'((1&nbsp;2)&nbsp;3&nbsp;4&nbsp;five&nbsp;6)
<p class=nopadding>(let&nbsp;((a&nbsp;3))&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;(cons&nbsp;'(1&nbsp;2)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;a&nbsp;(cons&nbsp;4&nbsp;(cons&nbsp;'five&nbsp;'(6))))))</p>
<p></tt>
However, it is not equivalent to this expression:
</p>

<tt>(let&nbsp;((a&nbsp;3))&nbsp;(list&nbsp;(list&nbsp;1&nbsp;2)&nbsp;a&nbsp;4&nbsp;'five&nbsp;6))
<p class=nopadding></p>
<p></tt>
It is a syntax violation if any of the identifiers
<tt>quasiquote</tt>, <tt>unquote</tt>, or <tt>unquote-splicing</tt> appear in
positions within a &lt;qq template&gt; otherwise than as described above.</p>
<p>
The following grammar for quasiquote expressions is not context-free.
It is presented as a recipe for generating an infinite number of
production rules.  Imagine a copy of the following rules for <em>D</em>  =  1, 2,
3, <tt>...</tt>.  <em>D</em> keeps track of the nesting depth.</p>
<p>
</p>
<tt>&lt;qq template&gt; &rarr; &lt;qq template 1&gt;
<p class=nopadding>&lt;qq template 0&gt; &rarr; &lt;expression&gt;</p>

<p class=nopadding>&lt;quasiquotation <em>D</em>&gt; &rarr; (quasiquote &lt;qq template <em>D</em>&gt;)</p>

<p class=nopadding>&lt;qq template <em>D</em>&gt; &rarr; &lt;lexeme datum&gt;</p>

<p class=nopadding><span style="margin-left: 2em">&zwnj;</span>    &#x2223; &lt;list qq template <em>D</em>&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;    &#x2223; &lt;vector qq template <em>D</em>&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;    &#x2223; &lt;unquotation <em>D</em>&gt;</p>

<p class=nopadding>&lt;list qq template <em>D</em>&gt; &rarr; (&lt;qq template or splice <em>D</em>&gt;*)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;    &#x2223; (&lt;qq template or splice <em>D</em>&gt;<sup>+</sup> . &lt;qq template <em>D</em>&gt;)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;    &#x2223; &lt;quasiquotation <em>D</em> + 1&gt;</p>

<p class=nopadding>&lt;vector qq template <em>D</em>&gt; &rarr; #(&lt;qq template or splice <em>D</em>&gt;*)</p>

<p class=nopadding>&lt;unquotation <em>D</em>&gt; &rarr; (unquote &lt;qq template <em>D</em>&minus;1&gt;)</p>

<p class=nopadding>&lt;qq template or splice <em>D</em>&gt; &rarr; &lt;qq template <em>D</em>&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;    &#x2223; &lt;splicing unquotation <em>D</em>&gt;</p>

<p class=nopadding>&lt;splicing unquotation <em>D</em>&gt; &rarr;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (unquote-splicing &lt;qq template <em>D</em>&minus;1&gt;*)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;    &#x2223; (unquote &lt;qq template <em>D</em>&minus;1&gt;*) </p>
</tt><p>
In &lt;quasiquotation&gt;s, a &lt;list qq template <em>D</em>&gt; can sometimes
be confused with either an &lt;unquotation <em>D</em>&gt; or a &lt;splicing
unquotation <em>D</em>&gt;.  The interpretation as an
&lt;unquotation&gt; or &lt;splicing
unquotation <em>D</em>&gt; takes precedence.</p>
<p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.18"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.18">11.18&nbsp;&nbsp;Binding constructs for syntactic keywords</a></h2>
<p></p>
<p>
The <tt>let-syntax</tt> and <tt>letrec-syntax</tt> forms 
bind keywords.
Like a <tt>begin</tt> form, a <tt>let-syntax</tt> or <tt>letrec-syntax</tt> form
may appear in a definition context, in which case it is treated as a
definition, and the forms in the body must also be
definitions.
A <tt>let-syntax</tt> or <tt>letrec-syntax</tt> form may also appear in an
expression context, in which case the forms within their bodies must be
expressions.</p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_776"></a>let-syntax<i> &lt;bindings&gt; &lt;form&gt; <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>&lt;Bindings&gt; must have the form
</p>

<tt>((&lt;keyword&gt;&nbsp;&lt;expression&gt;)&nbsp;<tt>...</tt>)<p></tt>
Each &lt;keyword&gt; is an identifier,
and each &lt;expression&gt; is 
an expression that evaluates, at macro-expansion
time, to a <i>transformer</i><a name="node_idx_778"></a><a name="node_idx_780"></a>.
Transformers may be created by <tt>syntax-rules</tt> or <tt>identifier-syntax</tt>
(see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.19">11.19</a>) or by one of the other mechanisms
described in library chapter&nbsp;on &ldquo;<tt>syntax-case</tt>&rdquo;.  It is a
syntax violation for &lt;keyword&gt; to appear more than once in the list of keywords
being bound.</p>
<p>
<em>Semantics: </em>The &lt;form&gt;s are expanded in the syntactic environment
obtained by extending the syntactic environment of the
<tt>let-syntax</tt> form with macros whose keywords are
the &lt;keyword&gt;s, bound to the specified transformers.
Each binding of a &lt;keyword&gt; has the &lt;form&gt;s as its region.</p>
<p>
The &lt;form&gt;s of a <tt>let-syntax</tt>
form are treated, whether in definition or expression context, as if
wrapped in an implicit <tt>begin</tt>; see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.7">11.4.7</a>.
Thus definitions in the result of expanding the &lt;form&gt;s have
the same region as any definition appearing in place of the <tt>let-syntax</tt> form would have.</p>
<p>
<em>Implementation responsibilities: </em>The implementation should detect if the value of
&lt;expression&gt; cannot possibly be a transformer.</p>
<p>
</p>

<tt>(let-syntax&nbsp;((when&nbsp;(syntax-rules&nbsp;()
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((when&nbsp;test&nbsp;stmt1&nbsp;stmt2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;test</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(begin&nbsp;stmt1</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stmt2&nbsp;...))))))</p>

<p class=nopadding>&nbsp;&nbsp;(let&nbsp;((if&nbsp;<tt>#t</tt>))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(when&nbsp;if&nbsp;(set!&nbsp;if&nbsp;'now))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;if))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;now</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;((x&nbsp;'outer))</p>

<p class=nopadding>&nbsp;&nbsp;(let-syntax&nbsp;((m&nbsp;(syntax-rules&nbsp;()&nbsp;((m)&nbsp;x))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((x&nbsp;'inner))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(m))))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;outer</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;(let-syntax</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((def&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((def&nbsp;stuff&nbsp;...)&nbsp;(define&nbsp;stuff&nbsp;...)))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(def&nbsp;foo&nbsp;42))</p>

<p class=nopadding>&nbsp;&nbsp;foo)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;42</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;(let-syntax&nbsp;())</p>

<p class=nopadding>&nbsp;&nbsp;5)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;5</p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_782"></a>letrec-syntax<i> &lt;bindings&gt; &lt;form&gt; <tt>...</tt></i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;</div>
<p>
<em>Syntax: </em>Same as for <tt>let-syntax</tt>.</p>
<p>
<em>Semantics: </em>The &lt;form&gt;s are
expanded in the syntactic environment obtained by
extending the syntactic environment of the <tt>letrec-syntax</tt>
form with macros whose keywords are the
&lt;keyword&gt;s, bound to the specified transformers.
Each binding of a &lt;keyword&gt; has the &lt;bindings&gt;
as well as the &lt;form&gt;s within its region,
so the transformers can
transcribe forms into uses of the macros
introduced by the <tt>letrec-syntax</tt> form.</p>
<p>
The &lt;form&gt;s of a <tt>letrec-syntax</tt>
form are treated, whether in definition or expression context, as if
wrapped in an implicit <tt>begin</tt>; see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.7">11.4.7</a>.
Thus definitions in the result of expanding the &lt;form&gt;s have
the same region as any definition appearing in place of the <tt>letrec-syntax</tt> form would have.</p>
<p>
<em>Implementation responsibilities: </em>The implementation should detect if the value of
&lt;expression&gt; cannot possibly be a transformer.</p>
<p>
</p>

<tt>(letrec-syntax
<p class=nopadding>&nbsp;&nbsp;((my-or&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((my-or)&nbsp;<tt>#f</tt>)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((my-or&nbsp;e)&nbsp;e)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((my-or&nbsp;e1&nbsp;e2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((temp&nbsp;e1))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;temp</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(my-or&nbsp;e2&nbsp;...)))))))</p>

<p class=nopadding>&nbsp;&nbsp;(let&nbsp;((x&nbsp;<tt>#f</tt>)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(y&nbsp;7)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(temp&nbsp;8)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;odd?)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;even?))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(my-or&nbsp;x</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;temp)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;y)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;7</p>
<p></tt></p>
<p>
The following example highlights how <tt>let-syntax</tt>
and <tt>letrec-syntax</tt> differ.</p>
<p>
</p>

<tt>(let&nbsp;((f&nbsp;(lambda&nbsp;(x)&nbsp;(+&nbsp;x&nbsp;1))))
<p class=nopadding>&nbsp;&nbsp;(let-syntax&nbsp;((f&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((f&nbsp;x)&nbsp;x)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((g&nbsp;x)&nbsp;(f&nbsp;x)))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(list&nbsp;(f&nbsp;1)&nbsp;(g&nbsp;1))))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(1&nbsp;2)</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;((f&nbsp;(lambda&nbsp;(x)&nbsp;(+&nbsp;x&nbsp;1))))</p>

<p class=nopadding>&nbsp;&nbsp;(letrec-syntax&nbsp;((f&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((f&nbsp;x)&nbsp;x)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((g&nbsp;x)&nbsp;(f&nbsp;x)))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(list&nbsp;(f&nbsp;1)&nbsp;(g&nbsp;1))))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(1&nbsp;1)</p>
<p></tt></p>
<p>
The two expressions are identical except that the <tt>let-syntax</tt> form
in the first expression is a <tt>letrec-syntax</tt> form in the second.
In the first expression, the <tt>f</tt> occurring in <tt>g</tt> refers to
the <tt>let</tt>-bound variable <tt>f</tt>, whereas in the second it refers
to the keyword <tt>f</tt> whose binding is established by the
<tt>letrec-syntax</tt> form.
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.19"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.19">11.19&nbsp;&nbsp;Macro transformers</a></h2>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(syntax-rules (&lt;literal&gt; <tt>...</tt>) &lt;syntax rule&gt; <tt>...</tt>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;(<tt>expand</tt>)&nbsp;</div>

<div align=left><tt>_</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>auxiliary syntax (<tt>expand)</tt>&nbsp;</div>

<a name="node_idx_784"></a><div align=left><tt>...</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>auxiliary syntax (<tt>expand)</tt>&nbsp;</div>

<a name="node_idx_786"></a><a name="node_idx_788"></a><p>
<em>Syntax: </em>Each &lt;literal&gt; must be an identifier.
Each &lt;syntax rule&gt; must have the following form:</p>
<p>
</p>

<tt>(&lt;srpattern&gt;&nbsp;&lt;template&gt;)<p></tt></p>
<p>
An &lt;srpattern&gt; is a restricted form of &lt;pattern&gt;,
namely, a nonempty &lt;pattern&gt; in one of four parenthesized forms below
whose first subform is an identifier or an underscore <tt>_</tt><a name="node_idx_790"></a>.
A &lt;pattern&gt; is an identifier, constant, or one of the following.</p>
<p>
</p>

<tt>(&lt;pattern&gt;&nbsp;<tt>...</tt>)
<p class=nopadding>(&lt;pattern&gt;&nbsp;&lt;pattern&gt;&nbsp;<tt>...</tt>&nbsp;.&nbsp;&lt;pattern&gt;)</p>

<p class=nopadding>(&lt;pattern&gt;&nbsp;<tt>...</tt>&nbsp;&lt;pattern&gt;&nbsp;&lt;ellipsis&gt;&nbsp;&lt;pattern&gt;&nbsp;<tt>...</tt>)</p>

<p class=nopadding>(&lt;pattern&gt;&nbsp;<tt>...</tt>&nbsp;&lt;pattern&gt;&nbsp;&lt;ellipsis&gt;&nbsp;&lt;pattern&gt;&nbsp;<tt>...</tt>&nbsp;.&nbsp;&lt;pattern&gt;)</p>

<p class=nopadding>#(&lt;pattern&gt;&nbsp;<tt>...</tt>)</p>

<p class=nopadding>#(&lt;pattern&gt;&nbsp;<tt>...</tt>&nbsp;&lt;pattern&gt;&nbsp;&lt;ellipsis&gt;&nbsp;&lt;pattern&gt;&nbsp;<tt>...</tt>)</p>
<p></tt></p>
<p>
An &lt;ellipsis&gt; is the identifier &ldquo;<tt>...</tt>&rdquo; (three periods).<a name="node_idx_792"></a></p>
<p>
A &lt;template&gt; is a pattern variable, an identifier that
is not a pattern
variable, a pattern datum, or one of the following.</p>
<p>
</p>

<tt>(&lt;subtemplate&gt;&nbsp;<tt>...</tt>)
<p class=nopadding>(&lt;subtemplate&gt;&nbsp;<tt>...</tt>&nbsp;.&nbsp;&lt;template&gt;)</p>

<p class=nopadding>#(&lt;subtemplate&gt;&nbsp;<tt>...</tt>)</p>
<p></tt></p>
<p>
A &lt;subtemplate&gt; is a &lt;template&gt; followed by zero or more ellipses.</p>
<p>
<em>Semantics: </em>An instance of <tt>syntax-rules</tt> evaluates, at
macro-expansion time, to a new macro
transformer by specifying a sequence of hygienic rewrite rules.  A use
of a macro whose keyword is associated with a transformer specified by
<tt>syntax-rules</tt> is matched against the patterns contained in the
&lt;syntax rule&gt;s, beginning with the leftmost &lt;syntax rule&gt;.
When a match is found, the macro use is transcribed hygienically
according to the template.  It is a syntax violation when no match is found.</p>
<p>
An identifier appearing within a &lt;pattern&gt; may be an underscore
(&nbsp;<tt>_</tt>&nbsp;), a literal identifier listed in the list of literals
<tt>(&lt;literal&gt; <tt>...</tt>)</tt>, or an ellipsis (&nbsp;<tt>...</tt>&nbsp;).
All other identifiers appearing within a &lt;pattern&gt; are
<i>pattern variables<a name="node_idx_794"></a></i>.
It is a syntax violation if an ellipsis or underscore appears in <tt>(&lt;literal&gt; <tt>...</tt>)</tt>.</p>
<p>
While the first subform of &lt;srpattern&gt; may be an identifier, the
identifier is not involved in the matching and
is not considered a pattern variable or literal identifier.</p>
<p>
Pattern variables match arbitrary input subforms and
are used to refer to elements of the input.
It is a syntax violation if the same pattern variable appears more than once in a
&lt;pattern&gt;.</p>
<p>
Underscores also match arbitrary input subforms but are not pattern variables
and so cannot be used to refer to those elements.
Multiple underscores may appear in a &lt;pattern&gt;.</p>
<p>
A literal identifier matches an input subform if and only if the input
subform is an identifier and either both its occurrence in the input
expression and its occurrence in the list of literals have the same
lexical binding, or the two identifiers have the same name and both have
no lexical binding.</p>
<p>
A subpattern followed by an ellipsis can match zero or more elements of
the input.</p>
<p>
More formally, an input form <em>F</em> matches a pattern <em>P</em> if and only if
one of the following holds:</p>
<p>
</p>
<ul>
<li><p><em>P</em> is an underscore (&nbsp;<tt>_</tt>&nbsp;).</p>
<p>
</p>
<li><p><em>P</em> is a pattern variable.</p>
<p>
</p>
<li><p><em>P</em> is a literal identifier
and <em>F</em> is an identifier such that both <em>P</em> and <em>F</em> would refer to the
same binding if both were to appear in the output of the macro outside
of any bindings inserted into the output of the macro.
(If neither of two like-named identifiers refers to any binding, i.e., both
are undefined, they are considered to refer to the same binding.)</p>
<p>
</p>
<li><p><em>P</em> is of the form
<tt>(<em>P</em><sub>1</sub> <tt>...</tt> <em>P</em><sub><em>n</em></sub>)</tt>
and <em>F</em> is a list of <em>n</em> elements that match <em>P</em><sub>1</sub> through
<em>P</em><sub><em>n</em></sub>.</p>
<p>
</p>
<li><p><em>P</em> is of the form
<tt>(<em>P</em><sub>1</sub> <tt>...</tt> <em>P</em><sub><em>n</em></sub> . <em>P</em><sub><em>x</em></sub>)</tt>
and <em>F</em> is a list or improper list of <em>n</em> or more elements
whose first <em>n</em> elements match <em>P</em><sub>1</sub> through <em>P</em><sub><em>n</em></sub>
and
whose <em>n</em>th cdr matches <em>P</em><sub><em>x</em></sub>.</p>
<p>
</p>
<li><p><em>P</em> is of the form
<tt>(<em>P</em><sub>1</sub> <tt>...</tt> <em>P</em><sub><em>k</em></sub> <em>P</em><sub><em>e</em></sub> &lt;ellipsis&gt; <em>P</em><sub><em>m</em>+1</sub> <tt>...</tt> <em>P</em><sub><em>n</em></sub>)</tt>,
where &lt;ellipsis&gt; is the identifier <tt>...</tt>
and <em>F</em> is a list of <em>n</em>
elements whose first <em>k</em> elements match <em>P</em><sub>1</sub> through <em>P</em><sub><em>k</em></sub>,
whose next <em>m</em>&minus;<em>k</em> elements each match <em>P</em><sub><em>e</em></sub>,
and
whose remaining <em>n</em>&minus;<em>m</em> elements match <em>P</em><sub><em>m</em>+1</sub> through <em>P</em><sub><em>n</em></sub>.</p>
<p>
</p>
<li><p><em>P</em> is of the form
<tt>(<em>P</em><sub>1</sub> <tt>...</tt> <em>P</em><sub><em>k</em></sub> <em>P</em><sub><em>e</em></sub> &lt;ellipsis&gt; <em>P</em><sub><em>m</em>+1</sub> <tt>...</tt> <em>P</em><sub><em>n</em></sub> . <em>P</em><sub><em>x</em></sub>)</tt>,
where &lt;ellipsis&gt; is the identifier <tt>...</tt>
and <em>F</em> is a list or improper list of <em>n</em>
elements whose first <em>k</em> elements match <em>P</em><sub>1</sub> through <em>P</em><sub><em>k</em></sub>,
whose next <em>m</em>&minus;<em>k</em> elements each match <em>P</em><sub><em>e</em></sub>,
whose next <em>n</em>&minus;<em>m</em> elements match <em>P</em><sub><em>m</em>+1</sub> through <em>P</em><sub><em>n</em></sub>,
and 
whose <em>n</em>th and final cdr matches <em>P</em><sub><em>x</em></sub>.</p>
<p>
</p>
<li><p><em>P</em> is of the form
<tt>#(<em>P</em><sub>1</sub> <tt>...</tt> <em>P</em><sub><em>n</em></sub>)</tt>
and <em>F</em> is a vector of <em>n</em> elements that match <em>P</em><sub>1</sub> through
<em>P</em><sub><em>n</em></sub>.</p>
<p>
</p>
<li><p><em>P</em> is of the form
<tt>#(<em>P</em><sub>1</sub> <tt>...</tt> <em>P</em><sub><em>k</em></sub> <em>P</em><sub><em>e</em></sub> &lt;ellipsis&gt; <em>P</em><sub><em>m</em>+1</sub> <tt>...</tt> <em>P</em><sub><em>n</em></sub>)</tt>,
where &lt;ellipsis&gt; is the identifier <tt>...</tt>
and <em>F</em> is a vector of <em>n</em> or more elements
whose first <em>k</em> elements match <em>P</em><sub>1</sub> through <em>P</em><sub><em>k</em></sub>,
whose next <em>m</em>&minus;<em>k</em> elements each match <em>P</em><sub><em>e</em></sub>,
and
whose remaining <em>n</em>&minus;<em>m</em> elements match <em>P</em><sub><em>m</em>+1</sub> through <em>P</em><sub><em>n</em></sub>.</p>
<p>
</p>
<li><p><em>P</em> is a pattern datum (any nonlist, nonvector, nonsymbol
datum) and <em>F</em> is equal to <em>P</em> in the sense of the
<tt>equal?</tt> procedure.
</p>
</ul><p></p>
<p>
When a macro use is transcribed according to the template of the
matching &lt;syntax rule&gt;, pattern variables that occur in the
template are replaced by the subforms they match in the input.</p>
<p>
Pattern data and identifiers that are not pattern variables
or ellipses are copied into the output.
A subtemplate followed by an ellipsis expands
into zero or more occurrences of the subtemplate.
Pattern variables that occur in subpatterns followed by one or more
ellipses may occur only in subtemplates that are
followed by (at least) as many ellipses.
These pattern variables are replaced in the output by the input
subforms to which they are bound, distributed as specified.
If a pattern variable is followed by more ellipses in the subtemplate
than in the associated subpattern, the input form is replicated as
necessary.
The subtemplate must contain at least one pattern variable from a
subpattern followed by an ellipsis, and for at least one such pattern
variable, the subtemplate must be followed by exactly as many ellipses as
the subpattern in which the pattern variable appears.
(Otherwise, the expander would not be able to determine how many times the
subform should be repeated in the output.)
It is a syntax violation if the constraints of this paragraph are not met.</p>
<p>
A template of the form
<tt>(&lt;ellipsis&gt; &lt;template&gt;)</tt> is identical to &lt;template&gt;, except that
ellipses within the template have no special meaning.
That is, any ellipses contained within &lt;template&gt; are
treated as ordinary identifiers.
In particular, the template <tt>(... ...)</tt> produces a single
ellipsis, <tt>...</tt>.
This allows syntactic abstractions to expand into forms containing
ellipses.</p>
<p>
</p>

<tt>(define-syntax&nbsp;be-like-begin
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((be-like-begin&nbsp;name)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(define-syntax&nbsp;name</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((name&nbsp;expr&nbsp;(...&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(begin&nbsp;expr&nbsp;(...&nbsp;...))))))))</p>

<p class=nopadding></p>

<p class=nopadding>(be-like-begin&nbsp;sequence)</p>

<p class=nopadding>(sequence&nbsp;1&nbsp;2&nbsp;3&nbsp;4)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;4</p>
<p></tt></p>
<p>
As an example for hygienic use of auxiliary identifier,
if <tt>let</tt> and <tt>cond</tt> are defined as in
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.16">11.16</a> and appendix&nbsp;<a href="r6rs-Z-H-16.html#node_chap_B">B</a> then they
are hygienic (as required) and the following is not an error.</p>
<p>
</p>

<tt>(let&nbsp;((=&gt;&nbsp;<tt>#f</tt>))
<p class=nopadding>&nbsp;&nbsp;(cond&nbsp;(<tt>#t</tt>&nbsp;=&gt;&nbsp;'ok)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;ok</p>
<p></tt></p>
<p>
The macro transformer for <tt>cond</tt> recognizes <tt>=&gt;</tt>
as a local variable, and hence an expression, and not as the
identifier <tt>=&gt;</tt>, which the macro transformer treats
as a syntactic keyword.  Thus the example expands into</p>
<p>
</p>

<tt>(let&nbsp;((=&gt;&nbsp;<tt>#f</tt>))
<p class=nopadding>&nbsp;&nbsp;(if&nbsp;<tt>#t</tt>&nbsp;(begin&nbsp;=&gt;&nbsp;'ok)))</p>
<p></tt></p>
<p>
instead of</p>
<p>
</p>

<tt>(let&nbsp;((=&gt;&nbsp;<tt>#f</tt>))
<p class=nopadding>&nbsp;&nbsp;(let&nbsp;((temp&nbsp;<tt>#t</tt>))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;temp&nbsp;('ok&nbsp;temp))))</p>
<p></tt></p>
<p>
which would result in an assertion violation.
</p>
<p></p>
<p>
</p>
<p></p>
<div align=left><tt>(<a name="node_idx_796"></a>identifier-syntax<i> &lt;template&gt;</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;(<tt>expand</tt>)&nbsp;</div>

<div align=left><tt>(identifier-syntax</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>syntax&nbsp;(<tt>expand</tt>)&nbsp;</div>
<br>
<tt>(&lt;id<sub>1</sub>&gt;&nbsp;&lt;template<sub>1</sub>&gt;)<br>

((set!&nbsp;&lt;id<sub>2</sub>&gt;&nbsp;&lt;pattern&gt;)<br>

&lt;template<sub>2</sub>&gt;))<br>

<div align=left><tt>set!</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>auxiliary&nbsp;syntax&nbsp;(<tt>&nbsp;expand)</tt>&nbsp;</div>
</tt><p>
<em>Syntax: </em>The &lt;id&gt;s must be identifiers.  The &lt;template&gt;s
must be as for <tt>syntax-rules</tt>.</p>
<p>
<em>Semantics: </em>When a keyword is bound to a transformer produced by the first form of
<tt>identifier-syntax</tt>, references to the keyword within the scope
of the binding are replaced by &lt;template&gt;.</p>
<p>
</p>

<tt>(define&nbsp;p&nbsp;(cons&nbsp;4&nbsp;5))
<p class=nopadding>(define-syntax&nbsp;p.car&nbsp;(identifier-syntax&nbsp;(car&nbsp;p)))</p>

<p class=nopadding>p.car&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;4</p>

<p class=nopadding>(set!&nbsp;p.car&nbsp;15)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>&nbsp;&amp;syntax</tt>&nbsp;<i>exception</i></p>
<p></tt></p>
<p>
The second, more general, form of <tt>identifier-syntax</tt> permits
the transformer to determine what happens when <tt>set!</tt> is used.
In this case, uses of the identifier by itself are replaced by
&lt;template<sub>1</sub>&gt;, and uses of <tt>set!</tt> with the identifier are
replaced by &lt;template<sub>2</sub>&gt;.</p>
<p>
</p>

<tt>(define&nbsp;p&nbsp;(cons&nbsp;4&nbsp;5))
<p class=nopadding>(define-syntax&nbsp;p.car</p>

<p class=nopadding>&nbsp;&nbsp;(identifier-syntax</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(_&nbsp;(car&nbsp;p))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((set!&nbsp;_&nbsp;e)&nbsp;(set-car!&nbsp;p&nbsp;e))))</p>

<p class=nopadding>(set!&nbsp;p.car&nbsp;15)</p>

<p class=nopadding>p.car&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;15</p>

<p class=nopadding>p&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(15&nbsp;5)</p>
<p></tt></p>
<p>
</p>
<p></p>
<p>
</p>
<a name="node_sec_11.20"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_11.20">11.20&nbsp;&nbsp;Tail calls and tail contexts</a></h2>
<p></p>
<p>
A <em>tail call</em><a name="node_idx_798"></a>is a procedure call that occurs
in a <em>tail context</em>.  Tail contexts are defined inductively.  Note
that a tail context is always determined with respect to a particular lambda
expression.</p>
<p>
</p>
<ul>
<li><p>The last expression within the body of a lambda expression,
shown as &lt;tail expression&gt; below, occurs in a tail context.
</p>

<tt>(la&#x304;mbda&nbsp;&lt;formals&gt;
<p class=nopadding>&nbsp;&nbsp;&lt;definition&gt;*&nbsp;</p>

<p class=nopadding>&nbsp;&nbsp;&lt;expression&gt;*&nbsp;&lt;tail&nbsp;expression&gt;)</p>
<p></tt>
</p>
<li><p>If one of the following expressions is in a tail context,
then the subexpressions shown as &lt;tail expression&gt; are in a tail context.
These were derived from specifications of the syntax of the forms described in
this chapter by replacing some occurrences of &lt;expression&gt;
with &lt;tail expression&gt;.  Only those rules that contain tail contexts
are shown here.
</p>

<tt>(if&nbsp;&lt;expression&gt;&nbsp;&lt;tail&nbsp;expression&gt;&nbsp;&lt;tail&nbsp;expression&gt;)
<p class=nopadding>(if&nbsp;&lt;expression&gt;&nbsp;&lt;tail&nbsp;expression&gt;)</p>

<p class=nopadding></p>

<p class=nopadding>(cond&nbsp;&lt;cond&nbsp;clause&gt;<sup>+</sup>)</p>

<p class=nopadding>(cond&nbsp;&lt;cond&nbsp;clause&gt;*&nbsp;(else&nbsp;&lt;tail&nbsp;sequence&gt;))</p>

<p class=nopadding></p>

<p class=nopadding>(ca&#x304;se&nbsp;&lt;expression&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&lt;case&nbsp;clause&gt;<sup>+</sup>)</p>

<p class=nopadding>(ca&#x304;se&nbsp;&lt;expression&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&lt;case&nbsp;clause&gt;*</p>

<p class=nopadding>&nbsp;&nbsp;(else&nbsp;&lt;tail&nbsp;sequence&gt;))</p>

<p class=nopadding></p>

<p class=nopadding>(and&nbsp;&lt;expression&gt;*&nbsp;&lt;tail&nbsp;expression&gt;)</p>

<p class=nopadding>(or&nbsp;&lt;expression&gt;*&nbsp;&lt;tail&nbsp;expression&gt;)</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;&lt;bindings&gt;&nbsp;&lt;tail&nbsp;body&gt;)</p>

<p class=nopadding>(let&nbsp;&lt;variable&gt;&nbsp;&lt;bindings&gt;&nbsp;&lt;tail&nbsp;body&gt;)</p>

<p class=nopadding>(let*&nbsp;&lt;bindings&gt;&nbsp;&lt;tail&nbsp;body&gt;)</p>

<p class=nopadding>(letrec*&nbsp;&lt;bindings&gt;&nbsp;&lt;tail&nbsp;body&gt;)</p>

<p class=nopadding>(letrec&nbsp;&lt;bindings&gt;&nbsp;&lt;tail&nbsp;body&gt;)</p>

<p class=nopadding>(let-values&nbsp;&lt;mv-bindings&gt;&nbsp;&lt;tail&nbsp;body&gt;)</p>

<p class=nopadding>(let*-values&nbsp;&lt;mv-bindings&gt;&nbsp;&lt;tail&nbsp;body&gt;)</p>

<p class=nopadding></p>

<p class=nopadding>(let-syntax&nbsp;&lt;bindings&gt;&nbsp;&lt;tail&nbsp;body&gt;)</p>

<p class=nopadding>(letrec-syntax&nbsp;&lt;bindings&gt;&nbsp;&lt;tail&nbsp;body&gt;)</p>

<p class=nopadding></p>

<p class=nopadding>(begin&nbsp;&lt;tail&nbsp;sequence&gt;)</p>
<p></tt>
A &lt;cond clause&gt; is 
</p>

<tt>(&lt;test&gt;&nbsp;&lt;tail&nbsp;sequence&gt;),<p></tt>
a &lt;case clause&gt; is
</p>

<tt>((&lt;datum&gt;*)&nbsp;&lt;tail&nbsp;sequence&gt;),<p></tt>
a &lt;tail body&gt; is
</p>

<tt>&lt;definition&gt;*&nbsp;&lt;tail&nbsp;sequence&gt;,<p></tt>
and a &lt;tail sequence&gt; is
</p>

<tt>&lt;expression&gt;*&nbsp;&lt;tail&nbsp;expression&gt;.<p></tt></p>
<p>
</p>
<li><p>If a <tt>cond</tt> expression is in a tail context, and has a clause of
the form <tt>(&lt;expression<sub>1</sub>&gt; =&gt; &lt;expression<sub>2</sub>&gt;)</tt>
then the (implied) call to
the procedure that results from the evaluation of &lt;expression<sub>2</sub>&gt; is in a
tail context.  &lt;Expression<sub>2</sub>&gt; itself is not in a tail context.</p>
<p>
</p>
</ul><p></p>
<p>
Certain built-in procedures must also perform tail calls.
The first argument passed to <tt>apply</tt> and to
<tt>call-with-current-continuation</tt>, and the second argument passed to
<tt>call-with-values</tt>, must be called via a tail call.</p>
<p>
In the following example the only tail call is the call to <tt>f</tt>.
None of the calls to <tt>g</tt> or <tt>h</tt> are tail calls.  The reference to
<tt>x</tt> is in a tail context, but it is not a call and thus is not a
tail call.
</p>

<tt>(lambda&nbsp;()
<p class=nopadding>&nbsp;&nbsp;(if&nbsp;(g)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((x&nbsp;(h)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(and&nbsp;(g)&nbsp;(f))))</p>
<p></tt></p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
Implementations may
recognize that some non-tail calls, such as the call to <tt>h</tt>
above, can be evaluated as though they were tail calls.
In the example above, the <tt>let</tt> expression could be compiled
as a tail call to <tt>h</tt>. (The possibility of <tt>h</tt> returning
an unexpected number of values can be ignored, because in that
case the effect of the <tt>let</tt> is explicitly unspecified and
implementation-dependent.)
</blockquote><p>
</p>
<p>
    </p>
<p>

</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-13.html">previous</a></span><span>, <a href="r6rs-Z-H-15.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_A"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_A">Appendix A</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_A">Formal semantics</a></h1>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
</p>
<p>
This appendix presents a non-normative, formal, operational semantics for Scheme, that is based on an earlier semantics&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_18">18</a>]. It does not cover the entire language. The notable missing features are the macro system, I/O, and the numerical tower. The precise list of features included is given in section&nbsp;<a href="r6rs-Z-H-15.html#node_sec_A.2">A.2</a>.</p>
<p>
The core of the specification is a single-step term rewriting relation that indicates how an (abstract) machine behaves. In general, the report is not a complete specification, giving implementations freedom to behave differently, typically to allow optimizations. This underspecification shows up in two ways in the semantics. </p>
<p>
The first is reduction rules that reduce to special &ldquo;<b>unknown:</b> <i>string</i>&rdquo; states (where the string provides a description of the unknown state). The intention is that rules that reduce to such states can be replaced with arbitrary reduction rules. The precise specification of how to replace those rules is given in section&nbsp;<a href="r6rs-Z-H-15.html#node_sec_A.12">A.12</a>.</p>
<p>
The other is that the single-step relation relates one program to
multiple different programs, each corresponding to a legal transition
that an abstract machine might take. Accordingly we use the transitive
closure of the single step relation &rarr;<sup>*</sup> to define the
semantics, <img src="r6rs-Z-G-D-11.gif" border="0" alt="[r6rs-Z-G-D-11.gif]">, as a function from programs (<img src="r6rs-Z-G-D-10.gif" border="0" alt="[r6rs-Z-G-D-10.gif]">)
to sets of observable results (<img src="r6rs-Z-G-D-12.gif" border="0" alt="[r6rs-Z-G-D-12.gif]">):
</p>
<div align=center><table><tr><td>

<table border=0><tr><td valign=top ><img src="r6rs-Z-G-D-11.gif" border="0" alt="[r6rs-Z-G-D-11.gif]"> : <img src="r6rs-Z-G-D-10.gif" border="0" alt="[r6rs-Z-G-D-10.gif]"> ---&rarr; 2<sup><img src="r6rs-Z-G-D-12.gif" border="0" alt="[r6rs-Z-G-D-12.gif]"></sup> </td></tr>
<tr><td valign=top ><img src="r6rs-Z-G-D-11.gif" border="0" alt="[r6rs-Z-G-D-11.gif]">(<img src="r6rs-Z-G-D-10.gif" border="0" alt="[r6rs-Z-G-D-10.gif]">)  =  { <img src="r6rs-Z-G-D-15.gif" border="0" alt="[r6rs-Z-G-D-15.gif]">(<img src="r6rs-Z-G-D-14.gif" border="0" alt="[r6rs-Z-G-D-14.gif]">) &#x2223; <img src="r6rs-Z-G-D-10.gif" border="0" alt="[r6rs-Z-G-D-10.gif]"> &rarr;<sup>*</sup> <img src="r6rs-Z-G-D-14.gif" border="0" alt="[r6rs-Z-G-D-14.gif]"> }
</td></tr></table>
</td></tr></table></div>

where the function <img src="r6rs-Z-G-D-15.gif" border="0" alt="[r6rs-Z-G-D-15.gif]"> turns an answer (<img src="r6rs-Z-G-D-14.gif" border="0" alt="[r6rs-Z-G-D-14.gif]">) from the semantics into an observable result. Roughly, <img src="r6rs-Z-G-D-15.gif" border="0" alt="[r6rs-Z-G-D-15.gif]"> is the identity function on simple base values, and returns a special tag for more complex values, like procedure and pairs.<p>
So, an implementation conforms to the semantics if, for every program <img src="r6rs-Z-G-D-10.gif" border="0" alt="[r6rs-Z-G-D-10.gif]">, the implementation produces one of the results in <img src="r6rs-Z-G-D-11.gif" border="0" alt="[r6rs-Z-G-D-11.gif]">(<img src="r6rs-Z-G-D-10.gif" border="0" alt="[r6rs-Z-G-D-10.gif]">) or, if the implementation loops forever, then there is an infinite reduction sequence starting at <img src="r6rs-Z-G-D-10.gif" border="0" alt="[r6rs-Z-G-D-10.gif]">, assuming that the reduction relation &rarr; has been adjusted to replace the <b>unknown:</b> states.</p>
<p>
The precise definitions of <img src="r6rs-Z-G-D-10.gif" border="0" alt="[r6rs-Z-G-D-10.gif]">, <img src="r6rs-Z-G-D-14.gif" border="0" alt="[r6rs-Z-G-D-14.gif]">, <img src="r6rs-Z-G-D-12.gif" border="0" alt="[r6rs-Z-G-D-12.gif]">, and <img src="r6rs-Z-G-D-15.gif" border="0" alt="[r6rs-Z-G-D-15.gif]"> are also given in section&nbsp;<a href="r6rs-Z-H-15.html#node_sec_A.2">A.2</a>.</p>
<p>
To help understand the semantics and how it behaves, we have
implemented it in PLT Redex. The implementation is available at the
report's website: <a href="http://www.r6rs.org/">http://www.r6rs.org/</a>. All of the reduction
rules and the metafunctions shown in the figures in this semantics
were generated automatically from the source code.</p>
<p>
</p>
<a name="node_sec_A.1"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.1">A.1&nbsp;&nbsp;Background</a></h2>
<p>We assume the reader has a basic familiarity with context-sensitive
reduction semantics. Readers unfamiliar with this system may wish to
consult Felleisen and Flatt's monograph&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_10">10</a>] or Wright
and Felleisen&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_29">29</a>] for a thorough introduction,
including the relevant technical background, or an introduction to PLT
Redex&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_19">19</a>] for a somewhat lighter one.</p>
<p>
As a rough guide, we define the operational semantics of a language
via a relation on program terms, where the relation corresponds to a
single step of an abstract machine. The relation is defined using
evaluation contexts, namely terms with a distinguished place in them,
called <em>holes</em><a name="node_idx_800"></a>, where the next step of evaluation
occurs. We say that a term <em>e</em> decomposes into an evaluation
context <em>E</em> and another term <em>e</em>&prime; if <em>e</em> is the
same as <em>E</em> but with the hole replaced by <em>e</em>&prime;. We write
<em>E</em>[<em>e</em>&prime;] to indicate the term obtained by replacing the hole in
<em>E</em> with <em>e</em>&prime;.</p>
<p>
For example, assuming that we have defined a grammar containing
non-terminals for evaluation contexts (<em>E</em>), expressions
(<em>e</em>), variables (<em>x</em>), and values (<em>v</em>), we
would write:
</p>
<div align=left><img src="r6rs-Z-G-6.gif" border="0" alt="[r6rs-Z-G-6.gif]"></div><p>
to define the &beta;<sub><em>v</em></sub> rewriting rule (as a part of the &rarr;
single step relation). We use the names of the non-terminals (possibly
with subscripts) in a rewriting rule to restrict the application of
the rule, so it applies only when some term produced by that grammar
appears in the corresponding position in the term. If the same
non-terminal with an identical subscript appears multiple times, the
rule only applies when the corresponding terms are structurally
identical (nonterminals without subscripts are not constrained to
match each other). Thus, the occurrence of <em>E</em><sub>1</sub> on both the
left-hand and right-hand side of the rule above means that the context
of the application expression does not change when using this rule.
The ellipses are a form of Kleene star, meaning that zero or more
occurrences of terms matching the pattern proceeding the ellipsis may
appear in place of the the ellipsis and the pattern preceding it. We
use the notation { <em>x</em><sub>1</sub> <tt>&middot;&middot;&middot;</tt> &#x21a6; <em>v</em><sub>1</sub> <tt>&middot;&middot;&middot;</tt> } <em>e</em><sub>1</sub> for
capture-avoiding substitution; in this case it means that each
<em>x</em><sub>1</sub> is replaced with the corresponding <em>v</em><sub>1</sub> in
<em>e</em><sub>1</sub>. Finally, we write side-conditions in parentheses beside
a rule; the side-condition in the above rule indicates that the number
of <em>x</em><sub>1</sub>s must be the same as the number of <em>v</em><sub>1</sub>s.
Sometimes we use equality in the side-conditions; when we do it merely
means simple term equality, i.e., the two terms must have the
same syntactic shape.</p>
<p>
</p>
<p>
Making the evaluation context <em>E</em> explicit in the rule allows
us to define relations that manipulate their context. As a simple
example, we can add another rule that signals a violation when a
procedure is applied to the wrong number of arguments by discarding
the evaluation context on the right-hand side of a rule:
</p>
<div align=left><img src="r6rs-Z-G-7.gif" border="0" alt="[r6rs-Z-G-7.gif]"></div><p>
Later we take advantage of the explicit evaluation context in more
sophisticated ways.</p>
<p>
</p>
<a name="node_sec_A.2"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.2">A.2&nbsp;&nbsp;Grammar</a></h2>
<p></p>
<p>


</p>
<a name="node_fig_Temp_22"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<div align=left><img src="r6rs-Z-G-8.gif" border="0" alt="[r6rs-Z-G-8.gif]"></div></td></tr><tr><td>
<p>
</p>
</td></tr></table></div>


</td></tr>
<tr><td align=left><b>Figure 1:</b>&nbsp;&nbsp;Grammar for programs and observables</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
</p>
<p>
The values (<em>v</em>) are divided into four categories:
</p>
<ul>
<li><p>Non-procedures (<i>nonproc</i>) include pair pointers
(<tt>pp</tt>), the empty list (<tt>null</tt>), symbols, self-quoting values
(<i>sqv</i>), and conditions. Conditions represent
the report's condition values, but here just contain a message and
are otherwise inert.
</p>
<li><p>User procedures (<tt>(</tt><tt>lambda</tt> <i>f</i> <i>e</i> <i>e</i> <tt>&middot;&middot;&middot;</tt><tt>)</tt>) include multi-arity lambda expressions and lambda expressions with dotted parameter lists,
</p>
<li><p>Primitive procedures (<i>pproc</i>) include</p>
<p>
</p>
<ul>
<li><p>arithmetic procedures
(<i>aproc</i>): <tt>+</tt>, <tt>-</tt>, <tt>/</tt>, and <tt>*</tt>, 
</p>
<li><p>procedures of one
argument (<i>proc1</i>): <tt>null?</tt>, <tt>pair?</tt>, <tt>car</tt>, <tt>cdr</tt>,
<tt>call/cc</tt>, <tt>procedure?</tt>, <tt>condition?</tt>, <tt>unspecified?</tt>, <tt>raise</tt>, and <tt>raise-continuable</tt>, 
</p>
<li><p>procedures of
two arguments (<i>proc2</i>): <tt>cons</tt>, <tt>set-car!</tt>, <tt>set-cdr!</tt>, <tt>eqv?</tt>,
and <tt>call-with-values</tt>, 
</p>
<li><p>as well as <tt>list</tt>, <tt>dynamic-wind</tt>,
<tt>apply</tt>, <tt>values</tt>, and <tt>with-exception-handler</tt>.
</p>
</ul><p>
</p>
<li><p>Finally, continuations are represented as <tt>throw</tt> expressions
whose body consists of the context where the continuation was
grabbed.
</p>
</ul><p>
The next three set of non-terminals in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_22">1</a> represent pairs (<i>pp</i>), which are divided into immutable pairs (<i>ip</i>) and mutable pairs (<i>mp</i>). The final set of non-terminals in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_22">1</a>, <i>sym</i>,
<i>x</i>, and <em>n</em> represent symbols, variables, and
numbers respectively. The non-terminals <i>ip</i>, <i>mp</i>, and <i>sym</i> are all assumed to all be disjoint. Additionally, the variables <em>x</em> are assumed not to include any keywords or primitive operations, so any program variables whose names coincide with them must be renamed before the semantics can give the meaning of that program.</p>
<p>

</p>
<a name="node_fig_Temp_23"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p>
</p>
<div align=center><table><tr><td>

<div align=left><img src="r6rs-Z-G-9.gif" border="0" alt="[r6rs-Z-G-9.gif]"></div></td></tr><tr><td>
<p>
</p>
</td></tr></table></div>


</td></tr>
<tr><td align=left><b>Figure 2:</b>&nbsp;&nbsp;Grammar for evaluation contexts</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p>
</p>
<p>
</p>
<p>
The set of non-terminals for evaluation contexts is shown in
figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_23">2</a>. The <i>P</i> non-terminal controls where
evaluation happens in a program that does not contain any quoted data.
The <em>E</em> and <em>F</em> evaluation contexts are for expressions.  They are factored in
that manner so that the <i>PG</i>, <i>G</i>, and <i>H</i> evaluation contexts can
re-use <i>F</i> and have fine-grained control over the context to support
exceptions and <tt>dynamic-wind</tt>. The starred and circled variants,
<em>E</em><sup>&2605;</sup>, <em>E</em><sup>&#x25cb;</sup>, <em>F</em><sup>&2605;</sup>, and <em>F</em><sup>&#x25cb;</sup> dictate where a single value is
promoted to multiple values and where multiple values are demoted to a
single value. The <i>U</i> context is used to manage the report's underspecification of the results of <tt>set!</tt>, <tt>set-car!</tt>, and <tt>set-cdr!</tt> (see section&nbsp;<a href="r6rs-Z-H-15.html#node_sec_A.12">A.12</a> for details). Finally, the <i>S</i> context is where quoted expressions can be simplified. The precise use of the evaluation contexts is explained along with the relevant rules.</p>
<p>
To convert the answers (<img src="r6rs-Z-G-D-14.gif" border="0" alt="[r6rs-Z-G-D-14.gif]">)  of the semantics into observable results, we use these two functions:
</p>
<div align=left><img src="r6rs-Z-G-10.gif" border="0" alt="[r6rs-Z-G-10.gif]"></div><p>

</p>
<div align=left><img src="r6rs-Z-G-11.gif" border="0" alt="[r6rs-Z-G-11.gif]"></div><p>

They eliminate the store, and replace complex values with simple tags that indicate only the kind of value that was produced or, if no values were produced, indicates that either an uncaught exception was raised, or that the program reached a state that is not specified by the semantics.</p>
<p>
</p>
<a name="node_sec_A.3"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.3">A.3&nbsp;&nbsp;Quote</a></h2>
<p></p>
<p>

</p>
<a name="node_fig_Temp_24"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<div align=left><img src="r6rs-Z-G-12.gif" border="0" alt="[r6rs-Z-G-12.gif]"></div></td></tr><tr><td>
<p>
</p>
</td></tr><tr><td>
<p>
</p>
<div align=left><img src="r6rs-Z-G-13.gif" border="0" alt="[r6rs-Z-G-13.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 3:</b>&nbsp;&nbsp;Quote</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
The first reduction rules that apply to any program is the 
rules in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_24">3</a> that eliminate quoted expressions. 
The first two rules erase the quote for quoted expressions that do not introduce any pairs.
The last two rules lift quoted datums to the top of the expression so
they are evaluated only once, and turn the datums into calls to either <tt>cons</tt> or <tt>consi</tt>, via the metafunctions <img src="r6rs-Z-G-D-17.gif" border="0" alt="[r6rs-Z-G-D-17.gif]"><sub><em>i</em></sub> and <img src="r6rs-Z-G-D-17.gif" border="0" alt="[r6rs-Z-G-D-17.gif]"><sub><em>m</em></sub>.</p>
<p>
Note that the left-hand side of the [6qcons] and [6qconsi] rules are identical, meaning that if one rule applies to a term, so does the other rule. 
Accordingly, a quoted expression may be lifted out into a sequence of <tt>cons</tt> expressions, which create mutable pairs, or into a sequence of <tt>consi</tt> expressions, which create immutable pairs (see section&nbsp;<a href="r6rs-Z-H-15.html#node_sec_A.7">A.7</a> for the rules on how that happens).</p>
<p>
These rules apply before any other because of the contexts in which they, and all of the other rules, apply. In particular, these rule applies in the
<i>S</i> context. Figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_23">2</a> shows that the
<i>S</i> context allows this reduction to apply in
any subexpression of an <i>e</i>, as long as all of the
subexpressions to the left have no quoted expressions in them,
although expressions to the right may have quoted expressions.
Accordingly, this rule applies once for each quoted expression in the
program, moving out to the beginning of the program.
The rest of the rules apply in contexts that do not contain any quoted
expressions, ensuring that these rules convert all quoted data
into lists before those rules apply.</p>
<p>
Although the identifier <i>qp</i> does not have a subscript, the semantics of PLT Redex's &ldquo;fresh&rdquo; declaration takes special care to ensures that the <i>qp</i> on the right-hand side of the rule is indeed the same as the one in the side-condition.</p>
<p>
</p>
<p>
</p>
<a name="node_sec_A.4"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.4">A.4&nbsp;&nbsp;Multiple values</a></h2>
<p>The basic strategy for multiple values is to add a rule that demotes
(<tt> <em>v</em><em>a</em><em>l</em><em>u</em><em>e</em><em>s</em></tt>&nbsp;<em>v</em>) to <em>v</em> and another rule that promotes
<em>v</em> to (<tt> <em>v</em><em>a</em><em>l</em><em>u</em><em>e</em><em>s</em></tt>&nbsp;<em>v</em>). If we allowed these rules to apply
in an arbitrary evaluation context, however, we would get infinite
reduction sequences of endless alternation between promotion and
demotion. So, the semantics allows demotion only in a context
expecting a single value and allows promotion only in a context
expecting multiple values. We obtain this behavior with a small
extension to the Felleisen-Hieb framework (also present in the
operational model for R<sup>5</sup>RS&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_17">17</a>]).
We extend the notation so that
holes have names (written with a subscript), and the context-matching
syntax may also demand a hole of a particular name (also written with
a subscript, for instance <em>E</em>[<em>e</em>]<sub>&2605;</sub>).  The extension
allows us to give different names to the holes in which multiple
values are expected and those in which single values are expected, and
structure the grammar of contexts accordingly.</p>
<p>
To exploit this extension, we use three kinds of holes in the
evaluation context grammar in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_23">2</a>. The
ordinary hole [&nbsp;] appears where the usual kinds of
evaluation can occur. The hole [&nbsp;]<sub>&2605;</sub> appears in contexts that
allow multiple values and [&nbsp;]<sub>&#x25cb;</sub> appears in
contexts that expect a single value. Accordingly, the rule
[6promote] only applies in [&nbsp;]<sub>&2605;</sub> contexts, and 
[6demote] only applies in [&nbsp;]<sub>&#x25cb;</sub> contexts.</p>
<p>
To see how the evaluation contexts are organized to ensure that
promotion and demotion occur in the right places, consider the <i>F</i>,
<em>F</em><sup>&2605;</sup> and <em>F</em><sup>&#x25cb;</sup> evaluation contexts. The <em>F</em><sup>&2605;</sup> and <em>F</em><sup>&#x25cb;</sup>
evaluation contexts are just the same as <i>F</i>, except that they allow
promotion to multiple values and demotion to a single value,
respectively. So, the <i>F</i> evaluation context, rather than being
defined in terms of itself, exploits <em>F</em><sup>&2605;</sup> and <em>F</em><sup>&#x25cb;</sup> to dictate
where promotion and demotion can occur. For example, <i>F</i> can be
<tt>(</tt><tt> <em>i</em><em>f</em></tt>&nbsp;<em>F</em><sup>&#x25cb;</sup>&nbsp;<em>e</em>&nbsp;<em>e</em><tt>)</tt> meaning that demotion from
<tt>(</tt><tt> <em>v</em><em>a</em><em>l</em><em>u</em><em>e</em><em>s</em></tt>&nbsp;<em>v</em><tt>)</tt> to
<em>v</em> can occur in the test of an <tt>if</tt> expression.
Similarly, <em>F</em> can be <tt>(</tt><tt> <em>b</em><em>e</em><em>g</em><em>i</em><em>n</em></tt>&nbsp;<em>F</em><sup>&2605;</sup>&nbsp;<em>e</em>&nbsp;<em>e</em>&nbsp;<tt>&middot;&middot;&middot;</tt><tt>)</tt> meaning that
<em>v</em> can be promoted to <tt>(</tt><tt> <em>v</em><em>a</em><em>l</em><em>u</em><em>e</em><em>s</em></tt>&nbsp;<em>v</em><tt>)</tt> in the first subexpression of a <tt>begin</tt>.</p>
<p>
In general, the promotion and demotion rules simplify the definitions
of the other rules. For instance, the rule for <tt>if</tt> does not
need to consider multiple values in its first subexpression.
Similarly, the rule for <tt>begin</tt> does not need to consider the
case of a single value as its first subexpression.</p>
<p>
</p>
<p>

</p>
<a name="node_fig_Temp_25"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<a name="node_idx_802"></a><a name="node_idx_804"></a><a name="node_idx_806"></a><a name="node_idx_808"></a><a name="node_idx_810"></a><div align=left><img src="r6rs-Z-G-14.gif" border="0" alt="[r6rs-Z-G-14.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 4:</b>&nbsp;&nbsp;Multiple values and call-with-values</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
The other two rules in
figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_25">4</a> handle
<tt>call-with-values</tt>. The evaluation contexts for
<tt>call-with-values</tt> (in the <em>F</em> non-terminal) allow
evaluation in the body of a procedure that has been passed as the first
argument to <tt>call-with-values</tt>, as long as the second argument
has been reduced to a value. Once evaluation inside that procedure
completes, it will produce multiple values (since it is an <em>F</em><sup>&2605;</sup>
position), and the entire <tt>call-with-values</tt> expression reduces
to an application of its second argument to those values, via the rule
[6cwvd]. Finally, in the
case that the first argument to <tt>call-with-values</tt> is a value,
but is not of the form <tt>(</tt><tt> <em>l</em><em>a</em><em>m</em><em>b</em><em>d</em><em>a</em></tt>&nbsp;<tt>()</tt>&nbsp;<em>e</em><tt>)</tt>, the rule
[6cwvw] wraps it in a thunk to trigger evaluation.</p>
<p>
</p>
<p>
</p>
<a name="node_sec_A.5"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.5">A.5&nbsp;&nbsp;Exceptions</a></h2>
<p>
</p>
<a name="node_fig_Temp_26"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<a name="node_idx_812"></a><a name="node_idx_814"></a><a name="node_idx_816"></a><a name="node_idx_818"></a><a name="node_idx_820"></a><a name="node_idx_822"></a><a name="node_idx_824"></a><a name="node_idx_826"></a><a name="node_idx_828"></a><div align=left><img src="r6rs-Z-G-15.gif" border="0" alt="[r6rs-Z-G-15.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 5:</b>&nbsp;&nbsp;Exceptions</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
The workhorses for the exception system are </p>
<div class=mathdisplay align=left><table><tr><td></td><td><table><tr><td align=center><tt></td><td><table><tr><td align=center></td><td><table><tr><td align=center>(</td></tr></table></td><td></td></tr></table></td><td></tt></td><td><table><tr><td align=center><tt> <em>h</em><em>a</em><em>n</em><em>d</em><em>l</em><em>e</em><em>r</em><em>s</em></tt></td></tr></table></td><td>&nbsp;</td><td><table><tr><td align=center><i></td><td><table><tr><td align=center></td><td><table><tr><td align=center>proc</td></tr></table></td><td></td></tr></table></td><td></i></td></tr></table></td><td>&nbsp;<tt>&middot;&middot;&middot;</tt></td><td><table><tr><td align=center></td></tr></table></td><td>&nbsp;</td><td><table><tr><td align=center><i></td><td><table><tr><td align=center></td><td><table><tr><td align=center>e</td></tr></table></td><td></td></tr></table></td><td></i></td></tr></table></td><td><tt></td><td><table><tr><td align=center></td><td><table><tr><td align=center>)</td></tr></table></td><td></td></tr></table></td><td></tt></td></tr></table></td><td></td></tr></table></div>
<p class=noindent> expressions and the <i>G</i> and <i>PG</i> evaluation contexts (shown in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_23">2</a>). 
The <tt>handlers</tt> expression records the
active exception handlers (<i>proc</i> <tt>&middot;&middot;&middot;</tt>) in some expression (<i>e</i>). The
intention is that only the nearest enclosing <tt>handlers</tt> expression
is relevant to raised exceptions, and the <em>G</em> and <i>PG</i> evaluation
contexts help achieve that goal. They are just like their counterparts
<i>E</i> and <i>P</i>, except that <tt>handlers</tt> expressions cannot occur on the
path to the hole, and the exception system rules take advantage of
that context to find the closest enclosing handler.</p>
<p>
To see how the contexts work together with <tt>handler</tt>
expressions, consider the left-hand side of the [6xunee]
rule in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_26">5</a>.
It matches expressions that have a call to <tt>raise</tt> or
<tt>raise-continuable</tt> (the non-terminal <i>raise*</i> matches
both exception-raising procedures) in a <i>PG</i>
evaluation context. Since the <i>PG</i> context does not contain any
<tt>handlers</tt> expressions, this exception cannot be caught, so
this expression reduces to a final state indicating the uncaught
exception. The rule [6xuneh] also signals an uncaught
exception, but it covers the case where a <tt>handlers</tt> expression
has exhausted all of the handlers available to it. The rule applies to
expressions that have a <tt>handlers</tt> expression (with no
exception handlers) in an arbitrary evaluation context where a call to
one of the exception-raising functions is nested in the
<tt>handlers</tt> expression. The use of the <i>G</i> evaluation
context ensures that there are no other <tt>handler</tt> expressions
between this one and the raise.</p>
<p>
The next two rules cover call to the procedure <tt>with-exception-handler</tt>.
The [6xwh1] rule applies when there are no <tt>handler</tt>
expressions. It constructs a new one and applies <i>v</i><sub>2</sub> as a
thunk in the <tt>handler</tt> body. If there already is a handler
expression, the [6xwhn] applies. It collects the current
handlers and adds the new one into a new <tt>handlers</tt> expression
and, as with the previous rule, invokes the second argument to
<tt>with-exception-handlers</tt>.</p>
<p>
The next two rules cover exceptions that are raised in the context of
a <tt>handlers</tt> expression. If a continuable exception is raised,
[6xrc] applies. It takes the most recently installed
handler from the nearest enclosing <tt>handlers</tt> expression and
applies it to the argument to <tt>raise-continuable</tt>, but in a
context where the exception handlers do not include that latest
handler. The [6xr] rule behaves similarly, except it
raises a new exception if the handler returns. The new exception is
created with the <tt>make-cond</tt> special form.</p>
<p>
</p>
<p>
The <tt>make-cond</tt> special form is a stand-in for the report's
conditions. It does not evaluate its argument (note its absence from
the <em>E</em> grammar in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_23">2</a>). That argument
is just a literal string describing the context in which the exception
was raised. The only operation on conditions is <tt>condition?</tt>,
whose semantics are given by the two rules [6ct] and
[6cf].</p>
<p>
Finally, the rule [6xdone] drops a <tt>handlers</tt> expression
when its body is fully evaluated, and the rule [6weherr]
raises an exception when <tt>with-exception-handler</tt> is supplied with
incorrect arguments.</p>
<p>
</p>
<a name="node_sec_A.6"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.6">A.6&nbsp;&nbsp;Arithmetic and basic forms</a></h2>
<p>
</p>
<a name="node_fig_Temp_27"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<a name="node_idx_830"></a><a name="node_idx_832"></a><a name="node_idx_834"></a><a name="node_idx_836"></a><a name="node_idx_838"></a><a name="node_idx_840"></a><a name="node_idx_842"></a><a name="node_idx_844"></a><a name="node_idx_846"></a><a name="node_idx_848"></a><a name="node_idx_850"></a><div align=left><img src="r6rs-Z-G-16.gif" border="0" alt="[r6rs-Z-G-16.gif]"></div></td></tr><tr><td>
<p>

<a name="node_idx_852"></a><a name="node_idx_854"></a><a name="node_idx_856"></a><a name="node_idx_858"></a><a name="node_idx_860"></a><a name="node_idx_862"></a><a name="node_idx_864"></a><a name="node_idx_866"></a></p>
<div align=left><img src="r6rs-Z-G-17.gif" border="0" alt="[r6rs-Z-G-17.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 6:</b>&nbsp;&nbsp;Arithmetic and basic forms</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
This model does not include the report's arithmetic, but does include
an idealized form in order to make experimentation with other features
and writing test suites for the model simpler.
Figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_27">6</a> shows the reduction rules for the
primitive procedures that implement addition, subtraction,
multiplication, and division. They defer to their mathematical
analogues. In addition, when the subtraction or divison operator are
applied to no arguments, or when division receives a zero as a
divisor, or when any of the arithmetic operations receive a
non-number, an exception is raised.</p>
<p>
The bottom half of figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_27">6</a> shows the rules for
<tt>if</tt>, <tt>begin</tt>, and <tt>begin0</tt>. The relevant
evaluation contexts are given by the <em>F</em> non-terminal.</p>
<p>
The evaluation contexts for <tt>if</tt> only allow evaluation in its
test expression. Once that is a value, the rules reduce
an <tt>if</tt> expression to its consequent if the test is not
<tt>#f</tt>, and to its alternative if it is <tt>#f</tt>.</p>
<p>
The <tt>begin</tt> evaluation contexts allow evaluation in the first
subexpression of a begin, but only if there are two or more
subexpressions. In that case, once the first expression has been fully
simplified, the reduction rules drop its value. If there is only a
single subexpression, the <tt>begin</tt> itself is dropped.</p>
<p>
</p>
<p>
Like the <tt>begin</tt> evaluation contexts, the <tt>begin0</tt>
evaluation contexts allow evaluation of the first subexpression of a
<tt>begin0</tt> expression when there are two or more subexpressions.
The <tt>begin0</tt> evaluation contexts also allow evaluation in the
second subexpression of a <tt>begin0</tt> expression, as long as the first
subexpression has been fully simplified. The [6begin0n] rule for
<tt>begin0</tt> then drops a fully simplified second subexpression.
Eventually, there is only a single expression in the <tt>begin0</tt>,
at which point the [begin01] rule fires, and removes the
<tt>begin0</tt> expression.</p>
<p>
</p>
<a name="node_sec_A.7"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.7">A.7&nbsp;&nbsp;Lists</a></h2>
<p></p>
<p>

</p>
<a name="node_fig_Temp_28"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<a name="node_idx_868"></a><a name="node_idx_870"></a><a name="node_idx_872"></a><a name="node_idx_874"></a><a name="node_idx_876"></a><a name="node_idx_878"></a><a name="node_idx_880"></a><a name="node_idx_882"></a><a name="node_idx_884"></a><a name="node_idx_886"></a><a name="node_idx_888"></a><a name="node_idx_890"></a><a name="node_idx_892"></a><a name="node_idx_894"></a><a name="node_idx_896"></a><a name="node_idx_898"></a><a name="node_idx_900"></a><div align=left><img src="r6rs-Z-G-18.gif" border="0" alt="[r6rs-Z-G-18.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 7:</b>&nbsp;&nbsp;Lists</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
The rules in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_28">7</a> handle lists. The first two rules handle <tt>list</tt> by reducing it to a succession of calls to <tt>cons</tt>, followed by <tt>null</tt>.</p>
<p>
The next two rules, [6cons] and [6consi], allocate new <tt>cons</tt> cells.
They both move <tt>(</tt><tt> <em>c</em><em>o</em><em>n</em><em>s</em></tt>&nbsp;<em>v</em><sub>1</sub>&nbsp;<em>v</em><sub>2</sub><tt>)</tt> into the store, bound to a fresh
pair pointer (see also section&nbsp;<a href="r6rs-Z-H-15.html#node_sec_A.3">A.3</a> for a description of &ldquo;fresh&rdquo;). 
The [6cons] uses a <i>mp</i> variable, to indicate the pair is mutable, and the [6consi] uses a <i>ip</i> variable to indicate the pair is immutable.</p>
<p>
The rules [6car] and [6cdr] extract the components of a pair from the store when presented with a pair pointer (the <i>pp</i> can be either <i>mp</i> or <i>ip</i>, as shown in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_22">1</a>).</p>
<p>
The rules [6setcar] and [6setcdr] handle assignment of mutable pairs. 
They replace the contents of the appropriate location in the store with the new value, and reduce to <tt>unspecified</tt>. See section&nbsp;<a href="r6rs-Z-H-15.html#node_sec_A.12">A.12</a> for an explanation of how <tt>unspecified</tt> reduces.</p>
<p>
</p>
<p>
The next four rules handle the <tt>null?</tt> predicate and the <tt>pair?</tt> predicate, and the final four rules raise exceptions when <tt>car</tt>, <tt>cdr</tt>, <tt>set-car!</tt> or <tt>set-cdr!</tt> receive non pairs.</p>
<p>
</p>
<a name="node_sec_A.8"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.8">A.8&nbsp;&nbsp;Eqv</a></h2>
<p>
</p>
<a name="node_fig_Temp_29"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<a name="node_idx_902"></a><a name="node_idx_904"></a><a name="node_idx_906"></a><a name="node_idx_908"></a><div align=left><img src="r6rs-Z-G-19.gif" border="0" alt="[r6rs-Z-G-19.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 8:</b>&nbsp;&nbsp;Eqv</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
The rules for <tt>eqv?</tt> are shown in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_29">8</a>. The first two rules cover most of the behavior of <tt>eqv?</tt>. 
The first says that when the two arguments to <tt>eqv?</tt> are syntactically identical, then <tt>eqv?</tt> produces <tt>#t</tt> and the second says that when the arguments are not syntactically identical, then <tt>eqv?</tt> produces <tt>#f</tt>. 
The structure of <i>v</i> has been carefully designed so that simple term equality corresponds closely to <tt>eqv?</tt>'s behavior. 
For example, pairs are represented as pointers into the store and <tt>eqv?</tt> only compares those pointers.</p>
<p>
The side-conditions on those first two rules ensure that they do not apply when simple term equality does not match the behavior of <tt>eqv?</tt>. There are two situations where it does not match: comparing two conditions and comparing two procedures. For the first, the report does not specify <tt>eqv?</tt>'s behavior, except to say that it must return a boolean, so the remaining two rules ([6eqct], and [6eqcf]) allow such comparisons to return <tt>#t</tt> or <tt>#f</tt>. Comparing two procedures is covered in section&nbsp;<a href="r6rs-Z-H-15.html#node_sec_A.12">A.12</a>. </p>
<p>
</p>
<a name="node_sec_A.9"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.9">A.9&nbsp;&nbsp;Procedures and application</a></h2>
<p>

</p>
<a name="node_fig_Temp_30"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<a name="node_idx_910"></a><a name="node_idx_912"></a><a name="node_idx_914"></a><a name="node_idx_916"></a><a name="node_idx_918"></a><a name="node_idx_920"></a><a name="node_idx_922"></a><a name="node_idx_924"></a><a name="node_idx_926"></a><a name="node_idx_928"></a><a name="node_idx_930"></a><a name="node_idx_932"></a><div align=left><img src="r6rs-Z-G-20.gif" border="0" alt="[r6rs-Z-G-20.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 9:</b>&nbsp;&nbsp;Procedures &amp; application</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
In evaluating a procedure call, the report leaves
unspecified the order in which arguments are evaluated. So, our reduction system allows multiple, different reductions to occur, one for each possible order of evaluation.</p>
<p>
To capture unspecified evaluation order but allow only evaluation that
is consistent with some sequential ordering of the evaluation of an
application's subexpressions, we use non-deterministic choice to first pick
a subexpression to reduce only when we have not already committed to
reducing some other subexpression. To achieve that effect, we limit
the evaluation of application expressions to only those that have a
single expression that is not fully reduced, as shown in the
non-terminal <em>F</em>, in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_23">2</a>. To evaluate
application expressions that have more than two arguments to evaluate,
the rule [6mark] picks one of the subexpressions of an
application that is not fully simplified and lifts it out in its own
application, allowing it to be evaluated. Once one of the lifted
expressions is evaluated, the [6appN] substitutes its value
back into the original application.</p>
<p>

</p>
<a name="node_fig_Temp_31"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p>
</p>
<div align=center><table><tr><td>

<div align=left><img src="r6rs-Z-G-21.gif" border="0" alt="[r6rs-Z-G-21.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 10:</b>&nbsp;&nbsp;Variable-assignment relation</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
The [6appN] rule also handles other applications whose
arguments are finished by substituting the first argument for
the first formal parameter in the expression. Its side-condition uses
the relation in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_31">10</a> to ensure that there are no
<tt>set!</tt> expressions with the parameter <em>x</em><sub>1</sub> as a target.
If there is such an assignment, the [6appN!] rule applies (see also section&nbsp;<a href="r6rs-Z-H-15.html#node_sec_A.3">A.3</a> for a description of &ldquo;fresh&rdquo;).
Instead of directly substituting the actual parameter for the formal
parameter, it creates a new location in the store, initially bound the
actual parameter, and substitutes a variable standing for that
location in place of the formal parameter. The store, then, handles
any eventual assignment to the parameter. Once all of the parameters
have been substituted away, the rule [6app0] applies and
evaluation of the body of the procedure begins.</p>
<p>
At first glance, the rule [6appN] appears superfluous, since it seems like the rules could just reduce first by [6appN!] and then look up the variable when it is evaluated. 
There are two reasons why we keep the [6appN], however. 
The first is purely conventional: reducing applications via substitution is taught to us at an early age and is commonly used in rewriting systems in the literature.
The second reason is more technical:  the
[6mark] rule requires that [6appN] be applied once <i>e</i><sub><em>i</em></sub> has been reduced to a value. [6appN!] would
lift the value into the store and put a variable reference into the application, leading to another use of [6mark], and another use of [6appN!], which continues forever.</p>
<p>
The rule [6&mu;app] handles a well-formed application of a function with a dotted parameter lists. 
It such an application into an application of an
ordinary procedure by constructing a list of the extra arguments. Similarly, the rule [6&mu;app1] handles an application of a procedure that has a single variable as its parameter list.</p>
<p>
The rule [6var] handles variable lookup in the store and [6set] handles variable assignment.</p>
<p>
The next two rules [6proct] and [6procf] handle applications of <tt>procedure?</tt>, and the remaining rules cover applications of non-procedures and arity violations.</p>
<p>

</p>
<a name="node_fig_Temp_32"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p>
</p>
<div align=center><table><tr><td>

<a name="node_idx_934"></a><a name="node_idx_936"></a><a name="node_idx_938"></a><a name="node_idx_940"></a><a name="node_idx_942"></a><a name="node_idx_944"></a><a name="node_idx_946"></a><a name="node_idx_948"></a><div align=left><img src="r6rs-Z-G-22.gif" border="0" alt="[r6rs-Z-G-22.gif]"></div></td></tr><tr><td>
<p>

</p>
<div align=left><img src="r6rs-Z-G-23.gif" border="0" alt="[r6rs-Z-G-23.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 11:</b>&nbsp;&nbsp;Apply</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
The rules in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_32">11</a> 
cover <tt>apply</tt>. 
The first rule, [6applyf], covers the case where the last argument to
<tt>apply</tt> is the empty list, and simply reduces by erasing the
empty list and the <tt>apply</tt>. The second rule, [6applyc]
covers a well-formed application of <tt>apply</tt> where <tt>apply</tt>'s final argument is a pair. It
reduces by extracting the components of the pair from the store and
putting them into the application of <tt>apply</tt>. Repeated
application of this rule thus extracts all of the list elements passed
to <tt>apply</tt> out of the store. </p>
<p>
The remaining five rules cover the
various violations that can occur when using <tt>apply</tt>. The first one covers the case where <tt>apply</tt> is supplied with a cyclic list. The next four cover applying a
non-procedure, passing a non-list as the last argument, and supplying
too few arguments to <tt>apply</tt>.</p>
<p>
</p>
<a name="node_sec_A.10"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.10">A.10&nbsp;&nbsp;Call/cc and dynamic wind</a></h2>
<p>
</p>
<a name="node_fig_Temp_33"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<a name="node_idx_950"></a><a name="node_idx_952"></a><a name="node_idx_954"></a><a name="node_idx_956"></a><a name="node_idx_958"></a><a name="node_idx_960"></a><a name="node_idx_962"></a><div align=left><img src="r6rs-Z-G-24.gif" border="0" alt="[r6rs-Z-G-24.gif]"></div></td></tr><tr><td>
<p>
 <br>
</p>
<div align=left><img src="r6rs-Z-G-25.gif" border="0" alt="[r6rs-Z-G-25.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 12:</b>&nbsp;&nbsp;Call/cc and dynamic wind</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
The specification of <tt>dynamic-wind</tt> uses 
<tt>(</tt><tt> <em>d</em><em>w</em></tt>&nbsp;<em>x</em>&nbsp;<em>e</em>&nbsp;<em>e</em>&nbsp;<em>e</em><tt>)</tt>
expressions to record which dynamic-wind <i>thunk</i>s are active at
each point in the computation. Its first argument is an identifier
that is globally unique and serves to identify invocations of
<tt>dynamic-wind</tt>, in order to avoid exiting and re-entering the
same dynamic context during a continuation switch. The second, third,
and fourth arguments are calls to some <i>before</i>, <i>thunk</i>, and
<i>after</i> procedures from a call to <tt>dynamic-wind</tt>. Evaluation only
occurs in the middle expression; the <tt>dw</tt> expression only
serves to record which <i>before</i> and <i>after</i> procedures need to be run during a
continuation switch. Accordingly, the reduction rule for an
application of <tt>dynamic-wind</tt> reduces to a call to the
<i>before</i> procedure, a <tt>dw</tt> expression and a call to the
<i>after</i> procedure, as
shown in rule [6wind] in
figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_33">12</a>. The next two rules cover
abuses of the <tt>dynamic-wind</tt> procedure: calling it with
non-procedures, and calling it with the wrong number of arguments. The
[6dwdone] rule erases a <tt>dw</tt> expression when its second
argument has finished evaluating.</p>
<p>
The next two rules cover <tt>call/cc</tt>. The rule
[6call/cc] creates a new continuation. It takes the context
of the <tt>call/cc</tt> expression and packages it up into a
<tt>throw</tt> expression that represents the continuation. The
<tt>throw</tt> expression uses the fresh variable <em>x</em> to record
where the application of <tt>call/cc</tt> occurred in the context for
use in the [6throw] rule when the continuation is applied.
That rule takes the arguments of the continuation, wraps them with a
call to <tt>values</tt>, and puts them back into the place where the
original call to <tt>call/cc</tt> occurred, replacing the current
context with the context returned by the <img src="r6rs-Z-G-D-18.gif" border="0" alt="[r6rs-Z-G-D-18.gif]"> metafunction.</p>
<p>
The <img src="r6rs-Z-G-D-18.gif" border="0" alt="[r6rs-Z-G-D-18.gif]"> (for &ldquo;trim&rdquo;) metafunction accepts two <em>D</em> contexts and
builds a context that matches its second argument, the destination
context, except that additional calls to the <i>before</i> and
<i>after</i> procedures
from <tt>dw</tt> expressions in the context have been added.</p>
<p>
The first clause of the <img src="r6rs-Z-G-D-18.gif" border="0" alt="[r6rs-Z-G-D-18.gif]"> metafunction exploits the
<em>H</em> context, a context that contains everything except
<tt>dw</tt> expressions. It ensures that shared parts of the
<tt>dynamic-wind</tt> context are ignored, recurring deeper into the
two expression contexts as long as the first <tt>dw</tt> expression in
each have matching identifiers (<em>x</em><sub>1</sub>). The final rule is a
catchall; it only applies when all the others fail and thus applies
either when there are no <tt>dw</tt>s in the context, or when the
<tt>dw</tt> expressions do not match. It calls the two other
metafunctions defined in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_33">12</a> and
puts their results together into a <tt>begin</tt> expression.</p>
<p>
The <img src="r6rs-Z-G-D-16.gif" border="0" alt="[r6rs-Z-G-D-16.gif]"> metafunction extracts all of the <i>before</i>
procedures from its argument and the <img src="r6rs-Z-G-D-19.gif" border="0" alt="[r6rs-Z-G-D-19.gif]"> metafunction extracts all of the <i>after</i> procedures from its argument. They each construct new contexts and exploit
<em>H</em> to work through their arguments, one <tt>dw</tt> at a time.
In each case, the metafunctions are careful to keep the right
<tt>dw</tt> context around each of the procedures in case a continuation
jump occurs during one of their evaluations. 
Since <img src="r6rs-Z-G-D-16.gif" border="0" alt="[r6rs-Z-G-D-16.gif]">,
receives the destination context, it keeps the intermediate
parts of the context in its result.
In contrast
<img src="r6rs-Z-G-D-19.gif" border="0" alt="[r6rs-Z-G-D-19.gif]"> discards all of the context except the <tt>dw</tt>s,
since that was the context where the call to the
continuation occurred.</p>
<p>
</p>
<a name="node_sec_A.11"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.11">A.11&nbsp;&nbsp;Letrec</a></h2>
<p>
</p>
<a name="node_fig_Temp_34"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<a name="node_idx_964"></a><a name="node_idx_966"></a><a name="node_idx_968"></a><a name="node_idx_970"></a><div align=left><img src="r6rs-Z-G-26.gif" border="0" alt="[r6rs-Z-G-26.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 13:</b>&nbsp;&nbsp;Letrec and letrec*</td></tr>
<tr><td>


<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
Figre&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_34">13</a> shows the rules that handle <tt>letrec</tt> and <tt>letrec*</tt> and the supplementary expressions that they produce, <tt>l!</tt> and <tt>reinit</tt>. As a first approximation, both <tt>letrec</tt> and <tt>letrec*</tt> reduce by allocating locations in the store to hold the values of the init expressions, initializing those locations to <tt>bh</tt> (for &ldquo;black hole&rdquo;), evaluating the init expressions, and then using <tt>l!</tt> to update the locations in the store with the value of the init expressions. They also use <tt>reinit</tt> to detect when an init expression in a letrec is reentered via a continuation.</p>
<p>
Before considering how <tt>letrec</tt> and <tt>letrec*</tt> use <tt>l!</tt> and <tt>reinit</tt>, first consider how <tt>l!</tt> and <tt>reinit</tt> behave. The first two rules in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_34">13</a> cover <tt>l!</tt>. It behaves very much like <tt>set!</tt>, but it initializes both ordinary variables, and variables that are current bound to the black hole (<tt>bh</tt>).</p>
<p>
The next two rules cover ordinary <tt>set!</tt> when applied to a variable
that is currently bound to a black hole. This situation can arise when
the program assigns to a variable before letrec initializes it, eg
<code class=verbatim>(letrec ((x (set! x 5))) x)</code>. The report specifies that either
an implementation should perform the assignment, as reflected in the
[6setdt] rule or it raise an exception, as reflected in the [6setdte] rule.</p>
<p>
The [6dt] rule covers the case where a variable is referred
to before the value of a init expression is filled in, which must
always raise an exception.</p>
<p>
A <tt>reinit</tt> expression is used to detect a program that captures a continuation in an initialization expression and returns to it, as shown in the three rules [6init], [6reinit], and [6reinite]. The <tt>reinit</tt> form accepts an identifier that is bound in the store to a boolean as its argument. Those are identifiers are initially <tt>#f</tt>. When <tt>reinit</tt> is evaluated, it checks the value of the variable and, if it is still <tt>#f</tt>, it changes it to <tt>#t</tt>. If it is already <tt>#t</tt>, then <tt>reinit</tt> either just does nothing, or it raises an exception, in keeping with the two legal behaviors of <tt>letrec</tt> and <tt>letrec*</tt>. </p>
<p>
The last two rules in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_34">13</a> put together <tt>l!</tt> and <tt>reinit</tt>. The [6letrec] rule reduces a <tt>letrec</tt> expression to an application expression, in order to capture the unspecified order of evaluation of the init expressions. Each init expression is wrapped in a <tt>begin0</tt> that records the value of the init and then uses <tt>reinit</tt> to detect continuations that return to the init expression. Once all of the init expressions have been evaluated, the procedure on the right-hand side of the rule is invoked, causing the value of the init expression to be filled in the store, and evaluation continues with the body of the original <tt>letrec</tt> expression.</p>
<p>
The [6letrec*] rule behaves similarly, but uses a <tt>begin</tt> expression rather than an application, since the init expressions are evaluated from left to right. Moreover, each init expression is filled into the store as it is evaluated, so that subsequent init expressions can refer to its value.</p>
<p>
</p>
<a name="node_sec_A.12"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_A.12">A.12&nbsp;&nbsp;Underspecification</a></h2>
<p></p>
<p>

</p>
<a name="node_fig_Temp_35"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<p class=noindent></p>
<p></p>
<div align=center><table><tr><td>

<a name="node_idx_972"></a><a name="node_idx_974"></a><a name="node_idx_976"></a><a name="node_idx_978"></a><a name="node_idx_980"></a><a name="node_idx_982"></a><a name="node_idx_984"></a><a name="node_idx_986"></a><a name="node_idx_988"></a><div align=left><img src="r6rs-Z-G-27.gif" border="0" alt="[r6rs-Z-G-27.gif]"></div></td></tr><tr><td>
<p>

</p>
</td></tr></table></div>

</td></tr>
<tr><td align=left><b>Figure 14:</b>&nbsp;&nbsp;Explicitly unspecified behavior</td></tr>
<tr><td>

<p class=noindent></p>
<p></p>
</td></tr></table></div><p></p>
<p>
The rules in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_35">14</a> cover aspects of the
semantics that are explicitly unspecified. Implementations can replace
the rules [6ueqv], [6uval] and with different rules that cover the left-hand sides and, as long as they follow the informal specification, any replacement is valid. Those three situations correspond to the case when <tt>eqv?</tt> applied to two procedures and when multiple values are used in a single-value context.</p>
<p>
The remaining rules in figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_35">14</a> cover the results from the assignment operations, <tt>set!</tt>, <tt>set-car!</tt>, and <tt>set-cdr!</tt>. An implementation does not adjust those rules, but instead renders them useless by adjusting the rules that insert <tt>unspecified</tt>: [6setcar], [6setcdr], [6set], and [6setd]. Those rules can be adjusted by replacing <tt>unspecified</tt> with any number of values in those rules.</p>
<p>
So, the remaining rules just specify the minimal behavior that we know that a value or values must have and otherwise reduce to an <b>unknown:</b> state. The rule [6udemand] drops <tt>unspecified</tt> in the <tt>U</tt> context. See figure&nbsp;<a href="r6rs-Z-H-15.html#node_fig_Temp_23">2</a> for the precise definition of <tt>U</tt>, but intuitively it is a context that is only a single expression layer deep that contains expressions whose value depends on the value of their subexpressions, like the first subexpression of a <tt>if</tt>. Following that are rules that discard <tt>unspecified</tt> in expressions that discard the results of some of their subexpressions. The [6ubegin] shows how <tt>begin</tt> discards its first expression when there are more expressions to evaluate. The next two rules, [6uhandlers] and [6udw] propagate <tt>unspecified</tt> to their context, since they also return any number of values to their context. Finally, the two <tt>begin0</tt> rules preserve <tt>unspecified</tt> until the rule [6begin01] can return it to its context.</p>
<p>
</p>
<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-14.html">previous</a></span><span>, <a href="r6rs-Z-H-16.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_B"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_B">Appendix B</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_B">Sample definitions for derived forms</a></h1>
<p></p>
<p>
This appendix contains sample definitions for some of the keywords
described in this report in terms of simpler forms:</p>
<p>
</p>
<a name="node_sec_Temp_36"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_36"><tt>cond</tt></a></h4>
<p>The <tt>cond</tt> keyword (section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.5">11.4.5</a>) 
could be defined in terms of <tt>if</tt>, <tt>let</tt> and <tt>begin</tt> using <tt>syntax-rules</tt> as follows:</p>
<p>
</p>

<tt>(define-syntax&nbsp;<tt>cond</tt>
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;(else&nbsp;=&gt;)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((cond&nbsp;(else&nbsp;result1&nbsp;result2&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(begin&nbsp;result1&nbsp;result2&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((cond&nbsp;(test&nbsp;=&gt;&nbsp;result))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((temp&nbsp;test))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;temp&nbsp;(result&nbsp;temp))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((cond&nbsp;(test&nbsp;=&gt;&nbsp;result)&nbsp;clause1&nbsp;clause2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((temp&nbsp;test))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;temp</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(result&nbsp;temp)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond&nbsp;clause1&nbsp;clause2&nbsp;...))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((cond&nbsp;(test))&nbsp;test)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((cond&nbsp;(test)&nbsp;clause1&nbsp;clause2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((temp&nbsp;test))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;temp</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond&nbsp;clause1&nbsp;clause2&nbsp;...))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((cond&nbsp;(test&nbsp;result1&nbsp;result2&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;test&nbsp;(begin&nbsp;result1&nbsp;result2&nbsp;...)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((cond&nbsp;(test&nbsp;result1&nbsp;result2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clause1&nbsp;clause2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;test</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(begin&nbsp;result1&nbsp;result2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond&nbsp;clause1&nbsp;clause2&nbsp;...)))))</p>
<p></tt>
</p>
<a name="node_sec_Temp_37"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_37"><tt>case</tt></a></h4>
<p>The <tt>case</tt> keyword (section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.5">11.4.5</a>) could be defined in terms of <tt>let</tt>, <tt>cond</tt>, and
<tt>memv</tt> (see library chapter&nbsp;on &ldquo;List utilities&rdquo;) using <tt>syntax-rules</tt> as follows:</p>
<p>
</p>

<tt>(define-syntax&nbsp;<tt>case</tt>
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;(else)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((case&nbsp;expr0</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((key&nbsp;...)&nbsp;res1&nbsp;res2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(else&nbsp;else-res1&nbsp;else-res2&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((tmp&nbsp;expr0))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((memv&nbsp;tmp&nbsp;'(key&nbsp;...))&nbsp;res1&nbsp;res2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(else&nbsp;else-res1&nbsp;else-res2&nbsp;...))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((case&nbsp;expr0</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((keya&nbsp;...)&nbsp;res1a&nbsp;res2a&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((keyb&nbsp;...)&nbsp;res1b&nbsp;res2b&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((tmp&nbsp;expr0))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((memv&nbsp;tmp&nbsp;'(keya&nbsp;...))&nbsp;res1a&nbsp;res2a&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((memv&nbsp;tmp&nbsp;'(keyb&nbsp;...))&nbsp;res1b&nbsp;res2b&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...)))))</p>
<p></tt></p>
<p>
</p>
<a name="node_sec_Temp_38"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_38"><tt>let*</tt></a></h4>
<p>The <tt>let*</tt> keyword (section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.6">11.4.6</a>)
could be defined in terms of <tt>let</tt>
using <tt>syntax-rules</tt> as follows:</p>
<p>
</p>

<tt>(define-syntax&nbsp;<tt>let*</tt>
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let*&nbsp;()&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;()&nbsp;body1&nbsp;body2&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let*&nbsp;((name1&nbsp;expr1)&nbsp;(name2&nbsp;expr2)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((name1&nbsp;expr1))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let*&nbsp;((name2&nbsp;expr2)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)))))</p>
<p></tt></p>
<p>
</p>
<a name="node_sec_Temp_39"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_39"><tt>letrec</tt></a></h4>
<p>The <tt>letrec</tt> keyword (section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.6">11.4.6</a>)
could be defined approximately in terms of <tt>let</tt>
and <tt>set!</tt> using <tt>syntax-rules</tt>, using a helper
to generate the temporary variables
needed to hold the values before the assignments are made,
as follows:</p>
<p>
</p>

<tt>(define-syntax&nbsp;<tt>letrec</tt>
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((letrec&nbsp;()&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;()&nbsp;body1&nbsp;body2&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((letrec&nbsp;((var&nbsp;init)&nbsp;...)&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(letrec-helper</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(var&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((var&nbsp;init)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...))))</p>

<p class=nopadding></p>

<p class=nopadding>(define-syntax&nbsp;letrec-helper</p>

<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((letrec-helper</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(temp&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((var&nbsp;init)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((var&nbsp;&lt;undefined&gt;)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((temp&nbsp;init)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;var&nbsp;temp)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;()&nbsp;body1&nbsp;body2&nbsp;...)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((letrec-helper</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(x&nbsp;y&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(temp&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((var&nbsp;init)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(letrec-helper</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(y&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(newtemp&nbsp;temp&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((var&nbsp;init)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...))))</p>
<p></tt></p>
<p>
The syntax <tt>&lt;undefined&gt;</tt> represents an expression that
returns something that, when stored in a location, causes an exception
with condition type <tt>&amp;assertion</tt> to
be raised if an attempt to read from or write to the location occurs before the
assignments generated by the <tt>letrec</tt> transformation take place.
(No such expression is defined in Scheme.)</p>
<p>
A simpler definition using <tt>syntax-case</tt> and <tt>generate-temporaries</tt> is given in library
chapter&nbsp;on &ldquo;<tt>syntax-case</tt>&rdquo;.</p>
<p>
</p>
<a name="node_sec_Temp_40"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_40"><tt>letrec*</tt></a></h4>
<p>The <tt>letrec*</tt> keyword could be defined approximately in terms of
<tt>let</tt> and <tt>set!</tt>  using <tt>syntax-rules</tt> as follows:</p>
<p>
</p>

<tt>(define-syntax&nbsp;<tt>letrec*</tt>
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((letrec*&nbsp;((var1&nbsp;init1)&nbsp;...)&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((var1&nbsp;&lt;undefined&gt;)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set!&nbsp;var1&nbsp;init1)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;()&nbsp;body1&nbsp;body2&nbsp;...)))))</p>
<p></tt></p>
<p>
The syntax <tt>&lt;undefined&gt;</tt> is as in the definition of <tt>letrec</tt> above.</p>
<p>
</p>
<a name="node_sec_Temp_41"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_41"><tt>let-values</tt></a></h4>
<p>The following definition of <tt>let-values</tt> (section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.6">11.4.6</a>)
using <tt>syntax-rules</tt>
employs a pair of helpers to
create temporary names for the formals.</p>
<p>
</p>

<tt>(define-syntax&nbsp;let-values
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let-values&nbsp;(binding&nbsp;...)&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let-values-helper1</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(binding&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...))))</p>

<p class=nopadding></p>

<p class=nopadding>(define-syntax&nbsp;let-values-helper1</p>

<p class=nopadding>&nbsp;&nbsp;;;&nbsp;map&nbsp;over&nbsp;the&nbsp;bindings</p>

<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let-values</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((id&nbsp;temp)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((id&nbsp;temp)&nbsp;...)&nbsp;body1&nbsp;body2&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let-values</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assocs</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((formals1&nbsp;expr1)&nbsp;(formals2&nbsp;expr2)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let-values-helper2</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;formals1</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expr1</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assocs</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((formals2&nbsp;expr2)&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...))))</p>

<p class=nopadding></p>

<p class=nopadding>(define-syntax&nbsp;let-values-helper2</p>

<p class=nopadding>&nbsp;&nbsp;;;&nbsp;create&nbsp;temporaries&nbsp;for&nbsp;the&nbsp;formals</p>

<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let-values-helper2</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp-formals</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expr1</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assocs</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindings</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(call-with-values</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()&nbsp;expr1)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;temp-formals</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let-values-helper1</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assocs</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindings</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let-values-helper2</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(first&nbsp;.&nbsp;rest)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(temp&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expr1</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assoc&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindings</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let-values-helper2</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rest</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(temp&nbsp;...&nbsp;newtemp)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expr1</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assoc&nbsp;...&nbsp;(first&nbsp;newtemp))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindings</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let-values-helper2</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rest-formal</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(temp&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expr1</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assoc&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindings</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(call-with-values</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()&nbsp;expr1)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(temp&nbsp;...&nbsp;.&nbsp;newtemp)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let-values-helper1</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assoc&nbsp;...&nbsp;(rest-formal&nbsp;newtemp))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindings</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...))))))</p>
<p></tt></p>
<p>
</p>
<a name="node_sec_Temp_42"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_42"><tt>let*-values</tt></a></h4>
<p>The following macro defines <tt>let*-values</tt> in terms of <tt>let</tt>
and <tt>let-values</tt> using <tt>syntax-rules</tt>:</p>
<p>
</p>

<tt>(define-syntax&nbsp;let*-values
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let*-values&nbsp;()&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;()&nbsp;body1&nbsp;body2&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let*-values&nbsp;(binding1&nbsp;binding2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let-values&nbsp;(binding1)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let*-values&nbsp;(binding2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)))))</p>
<p></tt></p>
<p>
</p>
<a name="node_sec_Temp_43"></a>
<h4 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_43"><tt>let</tt></a></h4>
<p>The <tt>let</tt> keyword could be defined in terms of <tt>lambda</tt> and <tt>letrec</tt>
using <tt>syntax-rules</tt> as
follows:</p>
<p>
</p>

<tt>(define-syntax&nbsp;<tt>let</tt>
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let&nbsp;((name&nbsp;val)&nbsp;...)&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((lambda&nbsp;(name&nbsp;...)&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;...))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((let&nbsp;tag&nbsp;((name&nbsp;val)&nbsp;...)&nbsp;body1&nbsp;body2&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((letrec&nbsp;((tag&nbsp;(lambda&nbsp;(name&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body1&nbsp;body2&nbsp;...)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tag)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;...))))</p>
<p></tt></p>
<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-15.html">previous</a></span><span>, <a href="r6rs-Z-H-17.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_C"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_C">Appendix C</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_C">Additional material</a></h1>
<p></p>
<p>
This report itself, as well as more material related to this report
such as reference implementations of some parts of Scheme and archives of
mailing lists discussing this report is at
</p>
<div align=center><table><tr><td>

<a href="http://www.r6rs.org/">http://www.r6rs.org/</a>
</td></tr></table></div>
<p>
The Schemers web site at
</p>
<div align=center><table><tr><td>

<a href="http://www.schemers.org/">http://www.schemers.org/</a>
</td></tr></table></div>

as well as the Readscheme site at
<div align=center><table><tr><td>

<a href="http://library.readscheme.org/">http://library.readscheme.org/</a>
</td></tr></table></div>

contain extensive Scheme bibliographies, as well as papers,
programs, implementations, and other material related to Scheme.<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-16.html">previous</a></span><span>, <a href="r6rs-Z-H-18.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_D"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_D">Appendix D</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_D">Example </a></h1>
<p></p>
<p>
This section describes an example consisting of the
<tt>(runge-kutta)</tt> library, which provides an <tt>integrate-system</tt>
procedure that integrates the system 
</p>
<div class=mathdisplay align=left><table><tr><td></td><td><table><tr><td align=center><em>y</em><sub><em>k</em></sub><sup>&frasl;</sup>  =  <em>f</em><sub><em>k</em></sub>(<em>y</em><sub>1</sub>, <em>y</em><sub>2</sub>, <tt>...</tt>, <em>y</em><sub><em>n</em></sub>), <span style="margin-left: .27778em">&zwnj;</span> <em>k</em>  =  1, <tt>...</tt>, <em>n</em></td></tr></table></td><td></td></tr></table></div>
<p class=noindent>
of differential equations with the method of Runge-Kutta.</p>
<p>
As the <tt>(runge-kutta)</tt> library makes use of the <tt>(rnrs base (6))</tt>
library, its skeleton is as follows:</p>
<p>
</p>

<tt>#!r6rs
<p class=nopadding>(library&nbsp;(runge-kutta)</p>

<p class=nopadding>&nbsp;&nbsp;(export&nbsp;integrate-system</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;head&nbsp;tail)</p>

<p class=nopadding>&nbsp;&nbsp;(import&nbsp;(rnrs&nbsp;base))</p>

<p class=nopadding>&nbsp;&nbsp;&lt;library&nbsp;body&gt;)</p>

<p class=nopadding></p>
<p></tt></p>
<p>
The procedure definitions described below go in the place of &lt;library body&gt;.</p>
<p>
The parameter <tt>system-derivative</tt> is a function that takes a system
state (a vector of values for the state variables <em>y</em><sub>1</sub>, <tt>...</tt>, <em>y</em><sub><em>n</em></sub>)
and produces a system derivative (the values <em>y</em><sub>1</sub><sup>&frasl;</sup>, <tt>...</tt>,
<em>y</em><sub><em>n</em></sub><sup>&frasl;</sup>).  The parameter <tt>initial-state</tt> provides an initial
system state, and <tt>h</tt> is an initial guess for the length of the
integration step.</p>
<p>
The value returned by <tt>integrate-system</tt> is an infinite stream of
system states.</p>
<p>
</p>

<tt>(define&nbsp;integrate-system
<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(system-derivative&nbsp;initial-state&nbsp;h)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((next&nbsp;(runge-kutta-4&nbsp;system-derivative&nbsp;h)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(letrec&nbsp;((states</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;initial-state</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(map-streams&nbsp;next&nbsp;states)))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;states))))</p>
<p></tt></p>
<p>
The <tt>runge-kutta-4</tt> procedure takes a function, <tt>f</tt>, that produces a
system derivative from a system state.  The <tt>runge-kutta-4</tt> procedure
produces a function that takes a system state and
produces a new system state.</p>
<p>
</p>

<tt>(define&nbsp;runge-kutta-4
<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(f&nbsp;h)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((*h&nbsp;(scale-vector&nbsp;h))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*2&nbsp;(scale-vector&nbsp;2))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*1/2&nbsp;(scale-vector&nbsp;(/&nbsp;1&nbsp;2)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*1/6&nbsp;(scale-vector&nbsp;(/&nbsp;1&nbsp;6))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(y)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;&nbsp;y&nbsp;is&nbsp;a&nbsp;system&nbsp;state</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let*&nbsp;((k0&nbsp;(*h&nbsp;(f&nbsp;y)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(k1&nbsp;(*h&nbsp;(f&nbsp;(add-vectors&nbsp;y&nbsp;(*1/2&nbsp;k0)))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(k2&nbsp;(*h&nbsp;(f&nbsp;(add-vectors&nbsp;y&nbsp;(*1/2&nbsp;k1)))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(k3&nbsp;(*h&nbsp;(f&nbsp;(add-vectors&nbsp;y&nbsp;k2)))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(add-vectors&nbsp;y</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*1/6&nbsp;(add-vectors&nbsp;k0</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*2&nbsp;k1)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*2&nbsp;k2)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k3))))))))</p>

<p class=nopadding></p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;elementwise</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(f)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;vectors</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(generate-vector</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(vector-length&nbsp;(car&nbsp;vectors))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(i)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(apply&nbsp;f</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(map&nbsp;(lambda&nbsp;(v)&nbsp;(vector-ref&nbsp;&nbsp;v&nbsp;i))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vectors)))))))</p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;generate-vector</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(size&nbsp;proc)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((ans&nbsp;(make-vector&nbsp;size)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(letrec&nbsp;((loop</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(i)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond&nbsp;((=&nbsp;i&nbsp;size)&nbsp;ans)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(else</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(vector-set!&nbsp;ans&nbsp;i&nbsp;(proc&nbsp;i))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(loop&nbsp;(+&nbsp;i&nbsp;1)))))))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(loop&nbsp;0)))))</p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;add-vectors&nbsp;(elementwise&nbsp;+))</p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;scale-vector</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(s)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(elementwise&nbsp;(lambda&nbsp;(x)&nbsp;(*&nbsp;x&nbsp;s)))))</p>
<p></tt></p>
<p>
The <tt>map-streams</tt> procedure is analogous to <tt>map</tt>: it applies its first
argument (a procedure) to all the elements of its second argument (a
stream).</p>
<p>
</p>

<tt>(define&nbsp;map-streams
<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(f&nbsp;s)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;(f&nbsp;(head&nbsp;s))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;()&nbsp;(map-streams&nbsp;f&nbsp;(tail&nbsp;s))))))</p>
<p></tt></p>
<p>
Infinite streams are implemented as pairs whose car holds the first
element of the stream and whose cdr holds a procedure that delivers the rest
of the stream.</p>
<p>
</p>

<tt>(define&nbsp;head&nbsp;car)
<p class=nopadding>(define&nbsp;tail</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(stream)&nbsp;((cdr&nbsp;stream))))</p>
<p></tt></p>
<p>
</p>
<div class=bigskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
The following program illustrates the use of <tt>integrate-system</tt> in
integrating the system
</p>
<div class=mathdisplay align=left><table><tr><td></td><td><table><tr><td align=center> <em>C</em> </td><td><table><tr><td align=center><em>d</em><em>v</em><sub><em>C</em></sub> </td></tr><tr><td style="height=1pt; background-color: black"></td></tr><tr><td align=center> <em>d</em><em>t</em></td></tr></table></td><td>  =  &minus;<em>i</em><sub><em>L</em></sub> &minus; </td><td><table><tr><td align=center><em>v</em><sub><em>C</em></sub> </td></tr><tr><td style="height=1pt; background-color: black"></td></tr><tr><td align=center> <em>R</em></td></tr></table></td><td></td></tr></table></td><td></td></tr></table></div>
<p class=noindent></p>
<div class=mathdisplay align=left><table><tr><td></td><td><table><tr><td align=center> <em>L</em> </td><td><table><tr><td align=center><em>d</em><em>i</em><sub><em>L</em></sub> </td></tr><tr><td style="height=1pt; background-color: black"></td></tr><tr><td align=center> <em>d</em><em>t</em></td></tr></table></td><td>  =  <em>v</em><sub><em>C</em></sub></td></tr></table></td><td></td></tr></table></div>
<p class=noindent>
which models a damped oscillator.</p>
<p>
</p>

<tt>#!r6rs
<p class=nopadding>(import&nbsp;(rnrs&nbsp;base)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rnrs&nbsp;io&nbsp;simple)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(runge-kutta))</p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;damped-oscillator</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(R&nbsp;L&nbsp;C)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(state)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;((Vc&nbsp;(vector-ref&nbsp;state&nbsp;0))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Il&nbsp;(vector-ref&nbsp;state&nbsp;1)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(vector&nbsp;(-&nbsp;0&nbsp;(+&nbsp;(/&nbsp;Vc&nbsp;(*&nbsp;R&nbsp;C))&nbsp;(/&nbsp;Il&nbsp;C)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(/&nbsp;Vc&nbsp;L))))))</p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;the-states</p>

<p class=nopadding>&nbsp;&nbsp;(integrate-system</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(damped-oscillator&nbsp;10000&nbsp;1000&nbsp;.001)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'#(1&nbsp;0)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.01))</p>

<p class=nopadding></p>

<p class=nopadding>(letrec&nbsp;((loop&nbsp;(lambda&nbsp;(s)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(newline)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(write&nbsp;(head&nbsp;s))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(loop&nbsp;(tail&nbsp;s)))))</p>

<p class=nopadding>&nbsp;&nbsp;(loop&nbsp;the-states))</p>
<p></tt></p>
<p>
This prints output like the following:</p>
<p>
</p>

<tt>#(1&nbsp;0)
<p class=nopadding>#(0.99895054&nbsp;9.994835e-6)</p>

<p class=nopadding>#(0.99780226&nbsp;1.9978681e-5)</p>

<p class=nopadding>#(0.9965554&nbsp;2.9950552e-5)</p>

<p class=nopadding>#(0.9952102&nbsp;3.990946e-5)</p>

<p class=nopadding>#(0.99376684&nbsp;4.985443e-5)</p>

<p class=nopadding>#(0.99222565&nbsp;5.9784474e-5)</p>

<p class=nopadding>#(0.9905868&nbsp;6.969862e-5)</p>

<p class=nopadding>#(0.9888506&nbsp;7.9595884e-5)</p>

<p class=nopadding>#(0.9870173&nbsp;8.94753e-5)</p>

<p class=nopadding></p>
<p></tt></p>
<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-17.html">previous</a></span><span>, <a href="r6rs-Z-H-19.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_E"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_E">Appendix E</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_E">Language changes</a></h1>
<p></p>
<p>
This chapter describes most of the changes that have been made to
Scheme since the &ldquo;Revised<sup>5</sup> Report&rdquo;&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_14">14</a>] was published:</p>
<p>
</p>
<ul>
<li><p>Scheme source code now uses the Unicode character set.
Specifically, the character set that can be used for identifiers has
been greatly expanded.
</p>
<li><p>Identifiers can now start with the characters <tt>-&gt;</tt>.
</p>
<li><p>Identifiers and symbol literals are now case-sensitive.
</p>
<li><p>Identifiers and representations of characters, booleans,
number objects, and <tt>.</tt> must be explicitly delimited.
</p>
<li><p><tt><tt>#</tt></tt> is now a delimiter.
</p>
<li><p>Bytevector literal syntax has been added.
</p>
<li><p>Matched square brackets can be used synonymously with parentheses.
</p>
<li><p>The read-syntax abbreviations <tt><tt>#</tt>'</tt> (for <tt>syntax</tt>), <tt><tt>#</tt><tt>`</tt></tt> (for <tt>quasisyntax</tt>), <tt><tt>#</tt>,</tt> (for <tt>unsyntax</tt>), and <tt><tt>#</tt>,@</tt>
(for <tt>unsyntax-splicing</tt> have been added; see section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.3.5">4.3.5</a>.)
</p>
<li><p><tt><tt>#</tt></tt> can no longer be used in place of digits in number
representations.
</p>
<li><p>The external representation of number objects can now include a
mantissa width.
</p>
<li><p>Literals for NaNs and infinities were added.
</p>
<li><p>String and character literals can now use a variety of escape
sequences.
</p>
<li><p>Block and datum comments have been added.
</p>
<li><p>The <tt><tt>#</tt>!r6rs</tt> comment for marking report-compliant
lexical syntax has been added.
</p>
<li><p>Characters are now specified to correspond to Unicode scalar
values.
</p>
<li><p>Many of the procedures and syntactic forms of the language are
now part of the <tt>(rnrs base (6))</tt> library.  Some procedures and
syntactic forms have been moved to other libraries; see figure&nbsp;<a href="r6rs-Z-H-19.html#node_fig_Temp_44">15</a>.</p>
<p>
</p>
<a name="node_fig_Temp_44"></a>
<div class=:figure align=left><table width=100%><tr><td align=left>
<table border=0><tr><td valign=top >identifier </td><td valign=top >moved to </td></tr>
<tr><td valign=top ><tt>assoc</tt> </td><td valign=top ><tt>(rnrs lists (6))</tt> </td></tr>
<tr><td valign=top ><tt>assv</tt> </td><td valign=top ><tt>(rnrs lists (6))</tt> </td></tr>
<tr><td valign=top ><tt>assq</tt> </td><td valign=top ><tt>(rnrs lists (6))</tt> </td></tr>
<tr><td valign=top ><tt>call-with-input-file</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>call-with-output-file</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-upcase</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-downcase</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-ci=?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-ci&lt;?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-ci&gt;?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-ci&lt;=?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-ci&gt;=?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-alphabetic?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-numeric?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-whitespace?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-upper-case?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>char-lower-case?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>close-input-port</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>close-output-port</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>current-input-port</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>current-output-port</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>display</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>do</tt> </td><td valign=top ><tt>(rnrs control (6))</tt> </td></tr>
<tr><td valign=top ><tt>eof-object?</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>eval</tt> </td><td valign=top ><tt>(rnrs eval (6))</tt> </td></tr>
<tr><td valign=top ><tt>delay</tt> </td><td valign=top ><tt>(rnrs r5rs (6))</tt></td></tr>
<tr><td valign=top ><tt>exact-&gt;inexact</tt> </td><td valign=top ><tt>(rnrs r5rs (6))</tt></td></tr>
<tr><td valign=top ><tt>force</tt> </td><td valign=top ><tt>(rnrs r5rs (6))</tt>
</td></tr>
<tr><td valign=top ><tt>inexact-&gt;exact</tt> </td><td valign=top ><tt>(rnrs r5rs (6))</tt></td></tr>
<tr><td valign=top ><tt>member</tt> </td><td valign=top ><tt>(rnrs lists (6))</tt> </td></tr>
<tr><td valign=top ><tt>memv</tt> </td><td valign=top ><tt>(rnrs lists (6))</tt> </td></tr>
<tr><td valign=top ><tt>memq</tt> </td><td valign=top ><tt>(rnrs lists (6))</tt> </td></tr>
<tr><td valign=top ><tt>modulo</tt> </td><td valign=top ><tt>(rnrs r5rs (6))</tt> </td></tr>
<tr><td valign=top ><tt>newline</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>null-environment</tt> </td><td valign=top ><tt>(rnrs r5rs (6))</tt> </td></tr>
<tr><td valign=top ><tt>open-input-file</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>open-output-file</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>peek-char</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>quotient</tt> </td><td valign=top ><tt>(rnrs r5rs (6))</tt> </td></tr>
<tr><td valign=top ><tt>read</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>read-char</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>remainder</tt> </td><td valign=top ><tt>(rnrs r5rs (6))</tt> </td></tr>
<tr><td valign=top ><tt>scheme-report-environment</tt> </td><td valign=top ><tt>(rnrs r5rs (6))</tt> </td></tr>
<tr><td valign=top ><tt>set-car!</tt> </td><td valign=top ><tt>(rnrs mutable-pairs (6))</tt> </td></tr>
<tr><td valign=top ><tt>set-cdr!</tt> </td><td valign=top ><tt>(rnrs mutable-pairs (6))</tt> </td></tr>
<tr><td valign=top ><tt>string-ci=?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>string-ci&lt;?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>string-ci&gt;?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>string-ci&lt;=?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>string-ci&gt;=?</tt> </td><td valign=top ><tt>(rnrs unicode (6))</tt> </td></tr>
<tr><td valign=top ><tt>string-set!</tt> </td><td valign=top ><tt>(rnrs mutable-strings (6))</tt> </td></tr>
<tr><td valign=top ><tt>string-fill!</tt> </td><td valign=top ><tt>(rnrs mutable-strings (6))</tt> </td></tr>
<tr><td valign=top ><tt>with-input-from-file</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>with-output-to-file</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>write</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt> </td></tr>
<tr><td valign=top ><tt>write-char</tt> </td><td valign=top ><tt>(rnrs io simple (6))</tt>
</td></tr></table>
</td></tr>
<tr><td align=left><b>Figure 15:</b>&nbsp;&nbsp;Identifiers moved to libraries</td></tr>
<tr><td>

</td></tr></table></div><p>
</p>
<li><p>The base language has the following new procedures and syntactic
forms: <tt>letrec*</tt>, <tt>let-values</tt>, <tt>let*-values</tt>, <tt>real-valued?</tt>, <tt>rational-valued?</tt>, <tt>integer-valued?</tt>, <tt>exact</tt>, <tt>inexact</tt>, <tt>finite?</tt>, <tt>infinite?</tt>, <tt>nan?</tt>,
<tt>div</tt>, <tt>mod</tt>, <tt>div-and-mod</tt>, <tt>div0</tt>, <tt>mod0</tt>, <tt>div0-and-mod0</tt>, <tt>exact-integer-sqrt</tt>, <tt>boolean=?</tt>, <tt>symbol=?</tt>, <tt>string-for-each</tt>, <tt>vector-map</tt>, <tt>vector-for-each</tt>, <tt>error</tt>, <tt>assertion-violation</tt>, <tt>assert</tt>, <tt>call/cc</tt>,
<tt>identifier-syntax</tt>.
</p>
<li><p>The following procedures have been removed: <tt>char-ready?</tt>, <tt>transcript-on</tt>, <tt>transcript-off</tt>,
<tt>load</tt>.
</p>
<li><p>The case-insensitive string comparisons (<tt>string-ci=?</tt>, <tt>string-ci&lt;?</tt>, <tt>string-ci&gt;?</tt>, <tt>string-ci&lt;=?</tt>, <tt>string-ci&gt;=?</tt>) operate on the case-folded versions of the strings
rather than as the simple lexicographic ordering induced by the
corresponding character comparison procedures.
</p>
<li><p>Libraries have been added to the language.
</p>
<li><p>A number of standard libraries are described in a separate
report&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_24">24</a>].
</p>
<li><p>Many situations that &ldquo;were an error&rdquo; now have defined or
constrained behavior.  In particular, many are now specified in
terms of the exception system.
</p>
<li><p>The full numerical tower is now required.
</p>
<li><p>The semantics for the transcendental functions has been
specified more fully.
</p>
<li><p>The semantics of <tt>expt</tt> for zero bases has been refined.
</p>
<li><p>In <tt>syntax-rules</tt> forms, a <tt>_</tt> may be used in place of
the keyword.
</p>
<li><p>The <tt>let-syntax</tt> and <tt>letrec-syntax</tt> no longer introduce a
new environment for their bodies.
</p>
<li><p>For implementations that support NaNs or infinities,
many arithmetic operations have been specified on
these values consistently with IEEE&nbsp;754.
</p>
<li><p>For implementations that support a distinct -0.0, the semantics
of many arithmetic operations with regard to -0.0 has been specified
consistently with IEEE&nbsp;754.
</p>
<li><p>Scheme's real number objects now have an exact zero as their imaginary part.
</p>
<li><p>The specification of <tt>quasiquote</tt> has been extended.  Nested
quasiquotations work correctly now, and <tt>unquote</tt> and <tt>unquote-splicing</tt> have been extended to several operands.
</p>
<li><p>Procedures now may or may not refer to
locations.  Consequently, <tt>eqv?</tt> is now unspecified in a few
cases where it was specified before.
</p>
<li><p>The mutability of the values of <tt>quasiquote</tt> structures has
been specified to some degree.
</p>
<li><p>The dynamic environment of the <i>before</i> and <i>after</i>
procedures of <tt>dynamic-wind</tt> is now specified.
</p>
<li><p>Various expressions that have only side effects are now allowed
to return an arbitrary number of values.
</p>
<li><p>The order and semantics for macro expansion has been more fully
specified.
</p>
<li><p>Internal definitions are now defined in terms of <tt>letrec*</tt>.
</p>
<li><p>The old notion of program structure and Scheme's top-level
environment has been replaced by top-level programs and libraries.
</p>
<li><p>The denotational semantics has been replaced by an operational
semantics based on an earlier semantics for the language of the
&ldquo;Revised<sup>5</sup> Report&rdquo;&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_14">14</a>,&nbsp;<a href="r6rs-Z-H-21.html#node_bib_18">18</a>].
</p>
</ul><p></p>
<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-18.html">previous</a></span><span>, <a href="r6rs-Z-H-20.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_Temp_2"></a>
<h1 class=chapter>
<div class=chapterheading>&nbsp;</div><br>
Contents</h1>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
                    
<a name="node_toc_start"></a></p>

<p class=noindent></p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_Temp_3"></a><a href="r6rs-Z-H-3.html#node_chap_Temp_3">Introduction</a></b><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_1"></a><a href="r6rs-Z-H-4.html#node_chap_1">1&nbsp;&nbsp;Overview of Scheme</a></b><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.1"></a><a href="r6rs-Z-H-4.html#node_sec_1.1">1.1&nbsp;&nbsp;Basic types</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_Temp_6"></a><a href="r6rs-Z-H-4.html#node_sec_Temp_6">Booleans</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_Temp_7"></a><a href="r6rs-Z-H-4.html#node_sec_Temp_7">Numbers</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_Temp_8"></a><a href="r6rs-Z-H-4.html#node_sec_Temp_8">Characters</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_Temp_9"></a><a href="r6rs-Z-H-4.html#node_sec_Temp_9">Strings</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_Temp_10"></a><a href="r6rs-Z-H-4.html#node_sec_Temp_10">Symbols</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_Temp_11"></a><a href="r6rs-Z-H-4.html#node_sec_Temp_11">Pairs and lists</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_Temp_12"></a><a href="r6rs-Z-H-4.html#node_sec_Temp_12">Vectors</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_Temp_13"></a><a href="r6rs-Z-H-4.html#node_sec_Temp_13">Procedures</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.2"></a><a href="r6rs-Z-H-4.html#node_sec_1.2">1.2&nbsp;&nbsp;Expressions</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.3"></a><a href="r6rs-Z-H-4.html#node_sec_1.3">1.3&nbsp;&nbsp;Variables and binding</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.4"></a><a href="r6rs-Z-H-4.html#node_sec_1.4">1.4&nbsp;&nbsp;Definitions</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.5"></a><a href="r6rs-Z-H-4.html#node_sec_1.5">1.5&nbsp;&nbsp;Forms</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.6"></a><a href="r6rs-Z-H-4.html#node_sec_1.6">1.6&nbsp;&nbsp;Procedures</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.7"></a><a href="r6rs-Z-H-4.html#node_sec_1.7">1.7&nbsp;&nbsp;Procedure calls and syntactic keywords</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.8"></a><a href="r6rs-Z-H-4.html#node_sec_1.8">1.8&nbsp;&nbsp;Assignment</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.9"></a><a href="r6rs-Z-H-4.html#node_sec_1.9">1.9&nbsp;&nbsp;Derived forms and macros</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.10"></a><a href="r6rs-Z-H-4.html#node_sec_1.10">1.10&nbsp;&nbsp;Syntactic data and datum values</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.11"></a><a href="r6rs-Z-H-4.html#node_sec_1.11">1.11&nbsp;&nbsp;Continuations</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.12"></a><a href="r6rs-Z-H-4.html#node_sec_1.12">1.12&nbsp;&nbsp;Libraries</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_1.13"></a><a href="r6rs-Z-H-4.html#node_sec_1.13">1.13&nbsp;&nbsp;Top-level programs</a><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_2"></a><a href="r6rs-Z-H-5.html#node_chap_2">2&nbsp;&nbsp;Requirement levels</a></b><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_3"></a><a href="r6rs-Z-H-6.html#node_chap_3">3&nbsp;&nbsp;Numbers</a></b><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_3.1"></a><a href="r6rs-Z-H-6.html#node_sec_3.1">3.1&nbsp;&nbsp;Numerical tower</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_3.2"></a><a href="r6rs-Z-H-6.html#node_sec_3.2">3.2&nbsp;&nbsp;Exactness</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_3.3"></a><a href="r6rs-Z-H-6.html#node_sec_3.3">3.3&nbsp;&nbsp;Fixnums and flonums</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_3.4"></a><a href="r6rs-Z-H-6.html#node_sec_3.4">3.4&nbsp;&nbsp;Implementation requirements</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_3.5"></a><a href="r6rs-Z-H-6.html#node_sec_3.5">3.5&nbsp;&nbsp;Infinities and NaNs</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_3.6"></a><a href="r6rs-Z-H-6.html#node_sec_3.6">3.6&nbsp;&nbsp;Distinguished -0.0</a><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_4"></a><a href="r6rs-Z-H-7.html#node_chap_4">4&nbsp;&nbsp;Lexical syntax and datum syntax</a></b><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.1"></a><a href="r6rs-Z-H-7.html#node_sec_4.1">4.1&nbsp;&nbsp;Notation</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.2"></a><a href="r6rs-Z-H-7.html#node_sec_4.2">4.2&nbsp;&nbsp;Lexical syntax</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.2.1"></a><a href="r6rs-Z-H-7.html#node_sec_4.2.1">4.2.1&nbsp;&nbsp;Formal account</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.2.2"></a><a href="r6rs-Z-H-7.html#node_sec_4.2.2">4.2.2&nbsp;&nbsp;Line endings</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.2.3"></a><a href="r6rs-Z-H-7.html#node_sec_4.2.3">4.2.3&nbsp;&nbsp;Whitespace and comments</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.2.4"></a><a href="r6rs-Z-H-7.html#node_sec_4.2.4">4.2.4&nbsp;&nbsp;Identifiers</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.2.5"></a><a href="r6rs-Z-H-7.html#node_sec_4.2.5">4.2.5&nbsp;&nbsp;Booleans</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.2.6"></a><a href="r6rs-Z-H-7.html#node_sec_4.2.6">4.2.6&nbsp;&nbsp;Characters</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.2.7"></a><a href="r6rs-Z-H-7.html#node_sec_4.2.7">4.2.7&nbsp;&nbsp;Strings</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.2.8"></a><a href="r6rs-Z-H-7.html#node_sec_4.2.8">4.2.8&nbsp;&nbsp;Numbers</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.3"></a><a href="r6rs-Z-H-7.html#node_sec_4.3">4.3&nbsp;&nbsp;Datum syntax</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.3.1"></a><a href="r6rs-Z-H-7.html#node_sec_4.3.1">4.3.1&nbsp;&nbsp;Formal account</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.3.2"></a><a href="r6rs-Z-H-7.html#node_sec_4.3.2">4.3.2&nbsp;&nbsp;Pairs and lists</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.3.3"></a><a href="r6rs-Z-H-7.html#node_sec_4.3.3">4.3.3&nbsp;&nbsp;Vectors</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.3.4"></a><a href="r6rs-Z-H-7.html#node_sec_4.3.4">4.3.4&nbsp;&nbsp;Bytevectors</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_4.3.5"></a><a href="r6rs-Z-H-7.html#node_sec_4.3.5">4.3.5&nbsp;&nbsp;Abbreviations</a><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_5"></a><a href="r6rs-Z-H-8.html#node_chap_5">5&nbsp;&nbsp;Semantic concepts</a></b><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.1"></a><a href="r6rs-Z-H-8.html#node_sec_5.1">5.1&nbsp;&nbsp;Programs and libraries</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.2"></a><a href="r6rs-Z-H-8.html#node_sec_5.2">5.2&nbsp;&nbsp;Variables, keywords, and regions</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.3"></a><a href="r6rs-Z-H-8.html#node_sec_5.3">5.3&nbsp;&nbsp;Exceptional situations</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.4"></a><a href="r6rs-Z-H-8.html#node_sec_5.4">5.4&nbsp;&nbsp;Argument checking</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.5"></a><a href="r6rs-Z-H-8.html#node_sec_5.5">5.5&nbsp;&nbsp;Syntax violations</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.6"></a><a href="r6rs-Z-H-8.html#node_sec_5.6">5.6&nbsp;&nbsp;Safety</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.7"></a><a href="r6rs-Z-H-8.html#node_sec_5.7">5.7&nbsp;&nbsp;Boolean values</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.8"></a><a href="r6rs-Z-H-8.html#node_sec_5.8">5.8&nbsp;&nbsp;Multiple return values</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.9"></a><a href="r6rs-Z-H-8.html#node_sec_5.9">5.9&nbsp;&nbsp;Unspecified behavior</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.10"></a><a href="r6rs-Z-H-8.html#node_sec_5.10">5.10&nbsp;&nbsp;Storage model</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.11"></a><a href="r6rs-Z-H-8.html#node_sec_5.11">5.11&nbsp;&nbsp;Proper tail recursion</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_5.12"></a><a href="r6rs-Z-H-8.html#node_sec_5.12">5.12&nbsp;&nbsp;Dynamic extent and the dynamic environment</a><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_6"></a><a href="r6rs-Z-H-9.html#node_chap_6">6&nbsp;&nbsp;Entry format</a></b><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_6.1"></a><a href="r6rs-Z-H-9.html#node_sec_6.1">6.1&nbsp;&nbsp;Syntax entries</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_6.2"></a><a href="r6rs-Z-H-9.html#node_sec_6.2">6.2&nbsp;&nbsp;Procedure entries</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_6.3"></a><a href="r6rs-Z-H-9.html#node_sec_6.3">6.3&nbsp;&nbsp;Implementation responsibilities</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_6.4"></a><a href="r6rs-Z-H-9.html#node_sec_6.4">6.4&nbsp;&nbsp;Other kinds of entries</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_6.5"></a><a href="r6rs-Z-H-9.html#node_sec_6.5">6.5&nbsp;&nbsp;Equivalent entries</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_6.6"></a><a href="r6rs-Z-H-9.html#node_sec_6.6">6.6&nbsp;&nbsp;Evaluation examples</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_6.7"></a><a href="r6rs-Z-H-9.html#node_sec_6.7">6.7&nbsp;&nbsp;Naming conventions</a><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_7"></a><a href="r6rs-Z-H-10.html#node_chap_7">7&nbsp;&nbsp;Libraries</a></b><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_7.1"></a><a href="r6rs-Z-H-10.html#node_sec_7.1">7.1&nbsp;&nbsp;Library form</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_7.2"></a><a href="r6rs-Z-H-10.html#node_sec_7.2">7.2&nbsp;&nbsp;Import and export levels</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_7.3"></a><a href="r6rs-Z-H-10.html#node_sec_7.3">7.3&nbsp;&nbsp;Examples</a><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_8"></a><a href="r6rs-Z-H-11.html#node_chap_8">8&nbsp;&nbsp;Top-level programs</a></b><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_8.1"></a><a href="r6rs-Z-H-11.html#node_sec_8.1">8.1&nbsp;&nbsp;Top-level program syntax</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_8.2"></a><a href="r6rs-Z-H-11.html#node_sec_8.2">8.2&nbsp;&nbsp;Top-level program semantics</a><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_9"></a><a href="r6rs-Z-H-12.html#node_chap_9">9&nbsp;&nbsp;Primitive syntax</a></b><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_9.1"></a><a href="r6rs-Z-H-12.html#node_sec_9.1">9.1&nbsp;&nbsp;Primitive expression types</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_9.2"></a><a href="r6rs-Z-H-12.html#node_sec_9.2">9.2&nbsp;&nbsp;Macros</a><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_10"></a><a href="r6rs-Z-H-13.html#node_chap_10">10&nbsp;&nbsp;Expansion process</a></b><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_11"></a><a href="r6rs-Z-H-14.html#node_chap_11">11&nbsp;&nbsp;Base library</a></b><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.1"></a><a href="r6rs-Z-H-14.html#node_sec_11.1">11.1&nbsp;&nbsp;Base types</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.2"></a><a href="r6rs-Z-H-14.html#node_sec_11.2">11.2&nbsp;&nbsp;Definitions</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.2.1"></a><a href="r6rs-Z-H-14.html#node_sec_11.2.1">11.2.1&nbsp;&nbsp;Variable definitions</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.2.2"></a><a href="r6rs-Z-H-14.html#node_sec_11.2.2">11.2.2&nbsp;&nbsp;Syntax definitions</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.3"></a><a href="r6rs-Z-H-14.html#node_sec_11.3">11.3&nbsp;&nbsp;Bodies</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.4"></a><a href="r6rs-Z-H-14.html#node_sec_11.4">11.4&nbsp;&nbsp;Expressions</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.4.1"></a><a href="r6rs-Z-H-14.html#node_sec_11.4.1">11.4.1&nbsp;&nbsp;Quotation</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.4.2"></a><a href="r6rs-Z-H-14.html#node_sec_11.4.2">11.4.2&nbsp;&nbsp;Procedures</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.4.3"></a><a href="r6rs-Z-H-14.html#node_sec_11.4.3">11.4.3&nbsp;&nbsp;Conditionals</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.4.4"></a><a href="r6rs-Z-H-14.html#node_sec_11.4.4">11.4.4&nbsp;&nbsp;Assignments</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.4.5"></a><a href="r6rs-Z-H-14.html#node_sec_11.4.5">11.4.5&nbsp;&nbsp;Derived conditionals</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.4.6"></a><a href="r6rs-Z-H-14.html#node_sec_11.4.6">11.4.6&nbsp;&nbsp;Binding constructs</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.4.7"></a><a href="r6rs-Z-H-14.html#node_sec_11.4.7">11.4.7&nbsp;&nbsp;Sequencing</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.5"></a><a href="r6rs-Z-H-14.html#node_sec_11.5">11.5&nbsp;&nbsp;Equivalence predicates</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.6"></a><a href="r6rs-Z-H-14.html#node_sec_11.6">11.6&nbsp;&nbsp;Procedure predicate</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7"></a><a href="r6rs-Z-H-14.html#node_sec_11.7">11.7&nbsp;&nbsp;Arithmetic</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7.1"></a><a href="r6rs-Z-H-14.html#node_sec_11.7.1">11.7.1&nbsp;&nbsp;Propagation of exactness and inexactness</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7.2"></a><a href="r6rs-Z-H-14.html#node_sec_11.7.2">11.7.2&nbsp;&nbsp;Representability of infinities and NaNs</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7.3"></a><a href="r6rs-Z-H-14.html#node_sec_11.7.3">11.7.3&nbsp;&nbsp;Semantics of common operations</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7.3.1"></a><a href="r6rs-Z-H-14.html#node_sec_11.7.3.1">11.7.3.1&nbsp;&nbsp;Integer division</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7.3.2"></a><a href="r6rs-Z-H-14.html#node_sec_11.7.3.2">11.7.3.2&nbsp;&nbsp;Transcendental functions</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7.4"></a><a href="r6rs-Z-H-14.html#node_sec_11.7.4">11.7.4&nbsp;&nbsp;Numerical operations</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7.4.1"></a><a href="r6rs-Z-H-14.html#node_sec_11.7.4.1">11.7.4.1&nbsp;&nbsp;Numerical type predicates</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7.4.2"></a><a href="r6rs-Z-H-14.html#node_sec_11.7.4.2">11.7.4.2&nbsp;&nbsp;Generic conversions</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7.4.3"></a><a href="r6rs-Z-H-14.html#node_sec_11.7.4.3">11.7.4.3&nbsp;&nbsp;Arithmetic operations</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.7.4.4"></a><a href="r6rs-Z-H-14.html#node_sec_11.7.4.4">11.7.4.4&nbsp;&nbsp;Numerical Input and Output</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.8"></a><a href="r6rs-Z-H-14.html#node_sec_11.8">11.8&nbsp;&nbsp;Booleans</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.9"></a><a href="r6rs-Z-H-14.html#node_sec_11.9">11.9&nbsp;&nbsp;Pairs and lists</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.10"></a><a href="r6rs-Z-H-14.html#node_sec_11.10">11.10&nbsp;&nbsp;Symbols</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.11"></a><a href="r6rs-Z-H-14.html#node_sec_11.11">11.11&nbsp;&nbsp;Characters</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.12"></a><a href="r6rs-Z-H-14.html#node_sec_11.12">11.12&nbsp;&nbsp;Strings</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.13"></a><a href="r6rs-Z-H-14.html#node_sec_11.13">11.13&nbsp;&nbsp;Vectors</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.14"></a><a href="r6rs-Z-H-14.html#node_sec_11.14">11.14&nbsp;&nbsp;Errors and violations</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.15"></a><a href="r6rs-Z-H-14.html#node_sec_11.15">11.15&nbsp;&nbsp;Control features</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.16"></a><a href="r6rs-Z-H-14.html#node_sec_11.16">11.16&nbsp;&nbsp;Iteration</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.17"></a><a href="r6rs-Z-H-14.html#node_sec_11.17">11.17&nbsp;&nbsp;Quasiquotation</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.18"></a><a href="r6rs-Z-H-14.html#node_sec_11.18">11.18&nbsp;&nbsp;Binding constructs for syntactic keywords</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.19"></a><a href="r6rs-Z-H-14.html#node_sec_11.19">11.19&nbsp;&nbsp;Macro transformers</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_11.20"></a><a href="r6rs-Z-H-14.html#node_sec_11.20">11.20&nbsp;&nbsp;Tail calls and tail contexts</a><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_A"></a><a href="r6rs-Z-H-15.html#node_chap_A">A&nbsp;&nbsp;Formal semantics</a></b><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.1"></a><a href="r6rs-Z-H-15.html#node_sec_A.1">A.1&nbsp;&nbsp;Background</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.2"></a><a href="r6rs-Z-H-15.html#node_sec_A.2">A.2&nbsp;&nbsp;Grammar</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.3"></a><a href="r6rs-Z-H-15.html#node_sec_A.3">A.3&nbsp;&nbsp;Quote</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.4"></a><a href="r6rs-Z-H-15.html#node_sec_A.4">A.4&nbsp;&nbsp;Multiple values</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.5"></a><a href="r6rs-Z-H-15.html#node_sec_A.5">A.5&nbsp;&nbsp;Exceptions</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.6"></a><a href="r6rs-Z-H-15.html#node_sec_A.6">A.6&nbsp;&nbsp;Arithmetic and basic forms</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.7"></a><a href="r6rs-Z-H-15.html#node_sec_A.7">A.7&nbsp;&nbsp;Lists</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.8"></a><a href="r6rs-Z-H-15.html#node_sec_A.8">A.8&nbsp;&nbsp;Eqv</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.9"></a><a href="r6rs-Z-H-15.html#node_sec_A.9">A.9&nbsp;&nbsp;Procedures and application</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.10"></a><a href="r6rs-Z-H-15.html#node_sec_A.10">A.10&nbsp;&nbsp;Call/cc and dynamic wind</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.11"></a><a href="r6rs-Z-H-15.html#node_sec_A.11">A.11&nbsp;&nbsp;Letrec</a><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a name="node_toc_node_sec_A.12"></a><a href="r6rs-Z-H-15.html#node_sec_A.12">A.12&nbsp;&nbsp;Underspecification</a><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_B"></a><a href="r6rs-Z-H-16.html#node_chap_B">B&nbsp;&nbsp;Sample definitions for derived forms</a></b><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_C"></a><a href="r6rs-Z-H-17.html#node_chap_C">C&nbsp;&nbsp;Additional material</a></b><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_D"></a><a href="r6rs-Z-H-18.html#node_chap_D">D&nbsp;&nbsp;Example </a></b><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_E"></a><a href="r6rs-Z-H-19.html#node_chap_E">E&nbsp;&nbsp;Language changes</a></b><br>
</p>
<p></p>

<p class=noindent><b>
&nbsp; &nbsp; <a name="node_toc_node_chap_Temp_46"></a><a href="r6rs-Z-H-21.html#node_chap_Temp_46">Alphabetic index of definitions of
concepts, keywords, and procedures</a></b><br>
<a name="node_toc_end"></a></p>
<p>
</p>
<p>


</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-1.html">previous</a></span><span>, <a href="r6rs-Z-H-3.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span class=disable>contents</span><span><span class=disable>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<p>

</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-20.html">previous</a></span><span class=disable>, next</span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span class=disable><span>; &nbsp;&nbsp;</span>index</span>]</div>
<p></p>
<a name="node_chap_Temp_45"></a>
<h1 class=chapter>
<div class=chapterheading>&nbsp;</div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_Temp_45">References</a></h1>
<p></p>
<table>
<p>
</p>
<tr><td align=right valign=top><a name="node_bib_1"></a>[1]&nbsp;&nbsp;</td><td valign=top>
J.&nbsp;W. Backus, F.L. Bauer, J.Green, C.&nbsp;Katz, J.&nbsp;McCarthy&nbsp;P. Naur, A.&nbsp;J. Perlis,
H.&nbsp;Rutishauser, K.&nbsp;Samuelson, B.&nbsp;Vauquois J.&nbsp;H. Wegstein, A.&nbsp;van Wijngaarden,
and M.&nbsp;Woodger.
 Revised report on the algorithmic language Algol 60.
 <i>Communications of the ACM</i>, 6(1):1&ndash;17, 1963.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_2"></a>[2]&nbsp;&nbsp;</td><td valign=top>
Alan Bawden and Jonathan Rees.
 Syntactic closures.
 In <i>ACM Conference on Lisp and Functional Programming</i>, pages
86&ndash;95, Snowbird, Utah, 1988. ACM Press.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_3"></a>[3]&nbsp;&nbsp;</td><td valign=top>
Scott Bradner.
 Key words for use in RFCs to indicate requirement levels.
 <a href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>, March 1997.
 RFC 2119.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_4"></a>[4]&nbsp;&nbsp;</td><td valign=top>
Robert&nbsp;G. Burger and R.&nbsp;Kent Dybvig.
 Printing floating-point numbers quickly and accurately.
 In <i>Proceedings of the ACM SIGPLAN '96 Conference on
Programming Language Design and Implementation</i>, pages 108&ndash;116,
Philadelphia, PA, USA, May 1996. ACM Press.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_5"></a>[5]&nbsp;&nbsp;</td><td valign=top>
William Clinger.
 Proper tail recursion and space efficiency.
 In Keith Cooper, editor, <i>Proceedings of the 1998 Conference on
Programming Language Design and Implementation</i>, pages 174&ndash;185, Montreal,
Canada, June 1998. ACM Press.
 Volume 33(5) of SIGPLAN Notices.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_6"></a>[6]&nbsp;&nbsp;</td><td valign=top>
William Clinger and Jonathan Rees.
 Macros that work.
 In <i>Proceedings 1991 ACM SIGPLAN Symposium on Principles of
Programming Languages</i>, pages 155&ndash;162, Orlando, Florida, January 1991. ACM
Press.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_7"></a>[7]&nbsp;&nbsp;</td><td valign=top>
William&nbsp;D. Clinger.
 How to read floating point numbers accurately.
 In <i>Proceedings Conference on Programming Language Design and
Implementation '90</i>, pages 92&ndash;101, White Plains, New York, USA, June 1990.
ACM.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_8"></a>[8]&nbsp;&nbsp;</td><td valign=top>
R.&nbsp;Kent Dybvig.
 <i>Chez Scheme Version 7 User's Guide</i>.
 Cadence Research Systems, 2005.
 <a href="http://www.scheme.com/csug7/">http://www.scheme.com/csug7/</a>.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_9"></a>[9]&nbsp;&nbsp;</td><td valign=top>
R.&nbsp;Kent Dybvig, Robert Hieb, and Carl Bruggeman.
 Syntactic abstraction in Scheme.
 <i>Lisp and Symbolic Computation</i>, 1(1):53&ndash;75, 1988.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_10"></a>[10]&nbsp;&nbsp;</td><td valign=top>
Matthias Felleisen and Matthew Flatt.
 Programming languages and lambda calculi.
 <a href="http://www.cs.utah.edu/plt/publications/pllc.pdf">http://www.cs.utah.edu/plt/publications/pllc.pdf</a>, 2003.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_11"></a>[11]&nbsp;&nbsp;</td><td valign=top>
Matthew Flatt.
 <i>PLT MzScheme: Language Manual</i>.
 Rice University, University of Utah, July 2006.
 <a href="http://download.plt-scheme.org/doc/352/html/mzscheme/">http://download.plt-scheme.org/doc/352/html/mzscheme/</a>.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_12"></a>[12]&nbsp;&nbsp;</td><td valign=top>
Daniel&nbsp;P. Friedman, Christopher Haynes, Eugene Kohlbecker, and Mitchell Wand.
 <i>Scheme 84 interim reference manual</i>.
 Indiana University, January 1985.
 Indiana University Computer Science Technical Report 153.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_13"></a>[13]&nbsp;&nbsp;</td><td valign=top>
IEEE standard 754-1985. IEEE standard for binary floating-point arithmetic,
1985.
 Reprinted in SIGPLAN Notices, 22(2):9-25, 1987.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_14"></a>[14]&nbsp;&nbsp;</td><td valign=top>
Richard Kelsey, William Clinger, and Jonathan Rees.
 Revised<sup>5</sup> report on the algorithmic language Scheme.
 <i>Higher-Order and Symbolic Computation</i>, 11(1):7&ndash;105, 1998.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_15"></a>[15]&nbsp;&nbsp;</td><td valign=top>
Eugene&nbsp;E. Kohlbecker, Daniel&nbsp;P. Friedman, Matthias Felleisen, and Bruce Duba.
 Hygienic macro expansion.
 In <i>Proceedings of the 1986 ACM Conference on Lisp and
Functional Programming</i>, pages 151&ndash;161, 1986.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_16"></a>[16]&nbsp;&nbsp;</td><td valign=top>
Eugene&nbsp;E. Kohlbecker Jr.
 <i>Syntactic Extensions in the Programming Language Lisp</i>.
 PhD thesis, Indiana University, August 1986.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_17"></a>[17]&nbsp;&nbsp;</td><td valign=top>
Jacob Matthews and Robert&nbsp;Bruce Findler.
 An operational semantics for R5RS Scheme.
 In J.&nbsp;Michael Ashley and Michael Sperber, editors, <i>Proceedings
of the Sixth Workshop on Scheme and Functional Programming</i>, pages 41&ndash;54,
Tallin, Estonia, September 2005.
 Indiana University Technical Report TR619.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_18"></a>[18]&nbsp;&nbsp;</td><td valign=top>
Jacob Matthews and Robert&nbsp;Bruce Findler.
 An operational semantics for Scheme.
 <i>Journal of Functional Programming</i>, 2007.
 <a href="http://journals.cambridge.org/action/displayAbstract?fromPage=online&aid=1268564&fulltextType=RA&fileId=S0956796807006478">From
<a href="http://www.cambridge.org/journals/JFP/">http://www.cambridge.org/journals/JFP/</a></a>.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_19"></a>[19]&nbsp;&nbsp;</td><td valign=top>
Jacob Matthews, Robert&nbsp;Bruce Findler, Matthew Flatt, and Matthias Felleisen.
 A visual environment for developing context-sensitive term rewriting
systems.
 In <i>Proceedings 15th Conference on Rewriting Techniques and
Applications</i>, Aachen, June 2004. Springer-Verlag.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_20"></a>[20]&nbsp;&nbsp;</td><td valign=top>
MIT Department of Electrical Engineering and Computer Science.
 <i>Scheme manual, seventh edition</i>, September 1984.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_21"></a>[21]&nbsp;&nbsp;</td><td valign=top>
Jonathan&nbsp;A. Rees, Norman I.&nbsp;Adams IV, and James&nbsp;R. Meehan.
 <i>The T manual</i>.
 Yale University Computer Science Department, fourth edition, January
1984.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_22"></a>[22]&nbsp;&nbsp;</td><td valign=top>
Michael Sperber, R.&nbsp;Kent Dybvig, Matthew Flatt, and Anton van Straaten.
 Revised<sup>6</sup> report on the algorithmic language Scheme
(Non-Normative appendices).
 <a href="http://www.r6rs.org/">http://www.r6rs.org/</a>, 2007.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_23"></a>[23]&nbsp;&nbsp;</td><td valign=top>
Michael Sperber, R.&nbsp;Kent Dybvig, Matthew Flatt, and Anton van Straaten.
 Revised<sup>6</sup> report on the algorithmic language Scheme
(Rationale).
 <a href="http://www.r6rs.org/">http://www.r6rs.org/</a>, 2007.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_24"></a>[24]&nbsp;&nbsp;</td><td valign=top>
Michael Sperber, R.&nbsp;Kent Dybvig, Matthew Flatt, Anton van Straaten, Richard
Kelsey, William Clinger, and Jonathan Rees.
 Revised<sup>6</sup> report on the algorithmic language Scheme
(Libraries).
 <a href="http://www.r6rs.org/">http://www.r6rs.org/</a>, 2007.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_25"></a>[25]&nbsp;&nbsp;</td><td valign=top>
Guy&nbsp;Lewis Steele Jr.
 <i>Common Lisp: The Language</i>.
 Digital Press, Burlington, MA, second edition, 1990.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_26"></a>[26]&nbsp;&nbsp;</td><td valign=top>
Texas Instruments, Inc.
 <i>TI Scheme Language Reference Manual</i>, November 1985.
 Preliminary version 1.0.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_27"></a>[27]&nbsp;&nbsp;</td><td valign=top>
The Unicode Consortium.
 The Unicode standard, version 5.0.0.
 defined by: <i>The Unicode Standard, Version 5.0</i> (Boston, MA,
Addison-Wesley, 2007. ISBN 0-321-48091-0), 2007.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_28"></a>[28]&nbsp;&nbsp;</td><td valign=top>
William&nbsp;M. Waite and Gerhard Goos.
 <i>Compiler Construction</i>.
 Springer-Verlag, 1984.<p>
</p>
</td></tr>
<tr><td align=right valign=top><a name="node_bib_29"></a>[29]&nbsp;&nbsp;</td><td valign=top>
Andrew Wright and Matthias Felleisen.
 A syntactic approach to type soundness.
 <i>Information and Computation</i>, 115(1):38&ndash;94, 1994.
 First appeared as Technical Report TR160, Rice University, 1991.<p>
</p>
</table><p>

</p>
<p>
</p>
<p>

</p>
<p>
</p>
<a name="node_chap_Temp_46"></a>
<h1 class=chapter>
<div class=chapterheading>&nbsp;</div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_Temp_46">Index</a></h1>
<p>
<a name="node_index_start"></a></p>

<div align=center><table><tr><td>

<span class=large><strong>Alphabetic index of definitions of
concepts, keywords, and procedures
</strong></span></td></tr></table></div>

<div style="height: 4.5pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<div class=bigskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">



@
idxitem
</p>
<p></p>
<div class=bigskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p>
@<tt>#,<tt>@</tt></tt> <a href="r6rs-Z-H-7.html#node_idx_190">7</a>
@<tt><tt>#</tt><tt>\</tt></tt> <a href="r6rs-Z-H-7.html#node_idx_156">7ii</a>
@<tt><tt>#</tt><tt>|</tt></tt> <a href="r6rs-Z-H-7.html#node_idx_140">7iii</a>
@<tt>&amp;</tt> <a href="r6rs-Z-H-9.html#node_idx_262">9</a>
@<tt>'</tt> <a href="r6rs-Z-H-7.html#node_idx_176">7iv</a>
@<tt>#'</tt> <a href="r6rs-Z-H-7.html#node_idx_184">7v</a>
@<tt>*</tt> <a href="r6rs-Z-H-14.html#node_idx_496">14</a>
@<tt>*</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_840">15</a>, 
<a href="r6rs-Z-H-15.html#node_idx_842">15ii</a>
@<tt>+</tt> <a href="r6rs-Z-H-14.html#node_idx_494">14ii</a>
@<tt>+</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_830">15iii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_832">15iv</a>
@<tt>,<tt>@</tt></tt> <a href="r6rs-Z-H-7.html#node_idx_182">7vi</a>
@<tt>,</tt> <a href="r6rs-Z-H-7.html#node_idx_180">7vii</a>
@<tt>#,</tt> <a href="r6rs-Z-H-7.html#node_idx_188">7viii</a>
@<tt>-</tt> <a href="r6rs-Z-H-14.html#node_idx_498">14iii</a>, <a href="r6rs-Z-H-14.html#node_idx_500">14iv</a>
@<tt>-</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_834">15v</a>, 
<a href="r6rs-Z-H-15.html#node_idx_836">15vi</a>, <a href="r6rs-Z-H-15.html#node_idx_838">15vii</a>
@-0.0 <a href="r6rs-Z-H-6.html#node_idx_100">6</a>
@<tt>...</tt> <a href="r6rs-Z-H-14.html#node_idx_784">14v</a>, <a href="r6rs-Z-H-14.html#node_idx_792">14vi</a>
@<tt>/</tt> <a href="r6rs-Z-H-14.html#node_idx_502">14vii</a>, <a href="r6rs-Z-H-14.html#node_idx_504">14viii</a>
@<tt>/</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_844">15viii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_846">15ix</a>, <a href="r6rs-Z-H-15.html#node_idx_848">15x</a>, 
<a href="r6rs-Z-H-15.html#node_idx_850">15xi</a>
@<tt>;</tt> <a href="r6rs-Z-H-7.html#node_idx_136">7ix</a>
@<tt>#;</tt> <a href="r6rs-Z-H-7.html#node_idx_138">7x</a>
@<tt>&lt;</tt> <a href="r6rs-Z-H-14.html#node_idx_466">14ix</a>
@<tt>&lt;=</tt> <a href="r6rs-Z-H-14.html#node_idx_470">14x</a>
@<tt>=</tt> <a href="r6rs-Z-H-14.html#node_idx_464">14xi</a>
@<tt>=&gt;</tt> <a href="r6rs-Z-H-14.html#node_idx_378">14xii</a>
@<tt>&gt;</tt> <a href="r6rs-Z-H-14.html#node_idx_468">14xiii</a>
@<tt>&gt;=</tt> <a href="r6rs-Z-H-14.html#node_idx_472">14xiv</a>
@<tt>_</tt> <a href="r6rs-Z-H-14.html#node_idx_788">14xv</a>, <a href="r6rs-Z-H-14.html#node_idx_790">14xvi</a>
@<tt>#`</tt> <a href="r6rs-Z-H-7.html#node_idx_186">7xi</a>
@<tt>`</tt> <a href="r6rs-Z-H-7.html#node_idx_178">7xii</a>
@<tt><tt>|</tt><tt>#</tt></tt> <a href="r6rs-Z-H-7.html#node_idx_142">7xiii</a></p>
<p>
</p>
<p>
@<tt>abs</tt> <a href="r6rs-Z-H-14.html#node_idx_506">14xvii</a>
@<tt>acos</tt> <a href="r6rs-Z-H-14.html#node_idx_554">14xviii</a>
@<tt>and</tt> <a href="r6rs-Z-H-14.html#node_idx_388">14xix</a>
@<tt>angle</tt> <a href="r6rs-Z-H-14.html#node_idx_576">14xx</a>
@<tt>append</tt> <a href="r6rs-Z-H-14.html#node_idx_634">14xxi</a>
@<tt>apply</tt> <a href="r6rs-Z-H-14.html#node_idx_752">14xxii</a>
@<tt>apply</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_934">15xii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_938">15xiii</a>, <a href="r6rs-Z-H-15.html#node_idx_940">15xiv</a>, 
<a href="r6rs-Z-H-15.html#node_idx_942">15xv</a>, <a href="r6rs-Z-H-15.html#node_idx_944">15xvi</a>, 
<a href="r6rs-Z-H-15.html#node_idx_946">15xvii</a>, <a href="r6rs-Z-H-15.html#node_idx_948">15xviii</a>
@argument checking <a href="r6rs-Z-H-8.html#node_idx_226">8</a>
@<tt>asin</tt> <a href="r6rs-Z-H-14.html#node_idx_552">14xxiii</a>
@<tt>assert</tt> <a href="r6rs-Z-H-14.html#node_idx_750">14xxiv</a>
@<tt>assertion-violation</tt> <a href="r6rs-Z-H-14.html#node_idx_748">14xxv</a>
@assignment <a href="r6rs-Z-H-4.html#node_idx_46">4</a>
@<tt>atan</tt> <a href="r6rs-Z-H-14.html#node_idx_556">14xxvi</a>, <a href="r6rs-Z-H-14.html#node_idx_558">14xxvii</a></p>
<p>
</p>
<p>
@<tt>#b</tt> <a href="r6rs-Z-H-7.html#node_idx_126">7xiv</a>, <a href="r6rs-Z-H-7.html#node_idx_160">7xv</a>
@backquote <a href="r6rs-Z-H-14.html#node_idx_774">14xxviii</a>
@<tt>begin</tt> <a href="r6rs-Z-H-14.html#node_idx_418">14xxix</a>, <a href="r6rs-Z-H-14.html#node_idx_420">14xxx</a>
@<tt>begin</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_856">15xix</a>, 
<a href="r6rs-Z-H-15.html#node_idx_860">15xx</a>, <a href="r6rs-Z-H-15.html#node_idx_976">15xxi</a>
@<tt>begin0</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_864">15xxii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_866">15xxiii</a>, <a href="r6rs-Z-H-15.html#node_idx_982">15xxiv</a>, 
<a href="r6rs-Z-H-15.html#node_idx_986">15xxv</a>, <a href="r6rs-Z-H-15.html#node_idx_988">15xxvi</a>
@binding <a href="r6rs-Z-H-4.html#node_idx_28">4ii</a>, <a href="r6rs-Z-H-8.html#node_idx_206">8ii</a>
@binding construct <a href="r6rs-Z-H-8.html#node_idx_208">8iii</a>
@body <a href="r6rs-Z-H-14.html#node_idx_360">14xxxi</a>
@boolean <a href="r6rs-Z-H-4.html#node_idx_4">4iii</a>
@<tt>boolean=?</tt> <a href="r6rs-Z-H-14.html#node_idx_598">14xxxii</a>
@<tt>boolean?</tt> <a href="r6rs-Z-H-14.html#node_idx_328">14xxxiii</a>, <a href="r6rs-Z-H-14.html#node_idx_596">14xxxiv</a>
@bound <a href="r6rs-Z-H-8.html#node_idx_216">8iv</a></p>
<p>
</p>
<p>
@<tt>caar</tt> <a href="r6rs-Z-H-14.html#node_idx_616">14xxxv</a>
@<tt>cadr</tt> <a href="r6rs-Z-H-14.html#node_idx_618">14xxxvi</a>
@call <a href="r6rs-Z-H-12.html#node_idx_298">12</a>
@<tt>call-with-current-continuation</tt> <a href="r6rs-Z-H-14.html#node_idx_754">14xxxvii</a>
@<tt>call-with-values</tt> <a href="r6rs-Z-H-14.html#node_idx_762">14xxxviii</a>
@<tt>call-with-values</tt> (formal semantics) 
<a href="r6rs-Z-H-15.html#node_idx_808">15xxvii</a>, <a href="r6rs-Z-H-15.html#node_idx_810">15xxviii</a>
@<tt>call/cc</tt> <a href="r6rs-Z-H-14.html#node_idx_756">14xxxix</a>
@<tt>call/cc</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_960">15xxix</a>
@<tt>car</tt> <a href="r6rs-Z-H-14.html#node_idx_612">14xl</a>
@<tt>car</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_876">15xxx</a>, 
<a href="r6rs-Z-H-15.html#node_idx_894">15xxxi</a>
@<tt>case</tt> <a href="r6rs-Z-H-14.html#node_idx_384">14xli</a>
@<tt>cdddar</tt> <a href="r6rs-Z-H-14.html#node_idx_620">14xlii</a>
@<tt>cddddr</tt> <a href="r6rs-Z-H-14.html#node_idx_622">14xliii</a>
@<tt>cdr</tt> <a href="r6rs-Z-H-14.html#node_idx_614">14xliv</a>
@<tt>cdr</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_878">15xxxii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_896">15xxxiii</a>
@<tt>ceiling</tt> <a href="r6rs-Z-H-14.html#node_idx_530">14xlv</a>
@<tt>char-&gt;integer</tt> <a href="r6rs-Z-H-14.html#node_idx_670">14xlvi</a>
@<tt>char&lt;=?</tt> <a href="r6rs-Z-H-14.html#node_idx_680">14xlvii</a>
@<tt>char&lt;?</tt> <a href="r6rs-Z-H-14.html#node_idx_676">14xlviii</a>
@<tt>char=?</tt> <a href="r6rs-Z-H-14.html#node_idx_674">14xlix</a>
@<tt>char&gt;=?</tt> <a href="r6rs-Z-H-14.html#node_idx_682">14l</a>
@<tt>char&gt;?</tt> <a href="r6rs-Z-H-14.html#node_idx_678">14li</a>
@<tt>char?</tt> <a href="r6rs-Z-H-14.html#node_idx_336">14lii</a>, <a href="r6rs-Z-H-14.html#node_idx_668">14liii</a>
@character <a href="r6rs-Z-H-4.html#node_idx_8">4iv</a>
@Characters <a href="r6rs-Z-H-14.html#node_idx_658">14liv</a>
@code point <a href="r6rs-Z-H-14.html#node_idx_664">14lv</a>
@comment <a href="r6rs-Z-H-7.html#node_idx_120">7xvi</a>, <a href="r6rs-Z-H-7.html#node_idx_134">7xvii</a>
@<tt>complex?</tt> <a href="r6rs-Z-H-14.html#node_idx_442">14lvi</a>
@<tt>cond</tt> <a href="r6rs-Z-H-14.html#node_idx_376">14lvii</a>
@<tt>condition?</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_822">15xxxiv</a>, 
<a href="r6rs-Z-H-15.html#node_idx_824">15xxxv</a>
@<tt>cons</tt> <a href="r6rs-Z-H-14.html#node_idx_610">14lviii</a>
@<tt>cons</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_872">15xxxvi</a>
@<tt>consi</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_874">15xxxvii</a>
@constant <a href="r6rs-Z-H-8.html#node_idx_244">8v</a>
@continuable exception <a href="r6rs-Z-H-8.html#node_idx_222">8vi</a>
@continuation <a href="r6rs-Z-H-4.html#node_idx_56">4v</a>
@core form <a href="r6rs-Z-H-13.html#node_idx_322">13</a>
@<tt>cos</tt> <a href="r6rs-Z-H-14.html#node_idx_548">14lix</a></p>
<p>
</p>
<p>
@<tt>#d</tt> <a href="r6rs-Z-H-7.html#node_idx_164">7xviii</a>
@datum <a href="r6rs-Z-H-7.html#node_idx_102">7xix</a>, <a href="r6rs-Z-H-7.html#node_idx_114">7xx</a>
@datum value <a href="r6rs-Z-H-4.html#node_idx_52">4vi</a>, <a href="r6rs-Z-H-7.html#node_idx_108">7xxi</a>
@<tt>define</tt> <a href="r6rs-Z-H-14.html#node_idx_352">14lx</a>, <a href="r6rs-Z-H-14.html#node_idx_354">14lxi</a>
@<tt>define-syntax</tt> <a href="r6rs-Z-H-14.html#node_idx_358">14lxii</a>
@definition <a href="r6rs-Z-H-4.html#node_idx_32">4vii</a>, <a href="r6rs-Z-H-8.html#node_idx_210">8vii</a>, 
<a href="r6rs-Z-H-10.html#node_idx_272">10</a>, <a href="r6rs-Z-H-14.html#node_idx_348">14lxiii</a>, 
<a href="r6rs-Z-H-14.html#node_idx_350">14lxiv</a>, <a href="r6rs-Z-H-14.html#node_idx_356">14lxv</a>
@<tt>denominator</tt> <a href="r6rs-Z-H-14.html#node_idx_526">14lxvi</a>
@derived form <a href="r6rs-Z-H-4.html#node_idx_48">4viii</a>
@<tt>div</tt> <a href="r6rs-Z-H-14.html#node_idx_510">14lxvii</a>
@<tt>div-and-mod</tt> <a href="r6rs-Z-H-14.html#node_idx_508">14lxviii</a>
@<tt>div0</tt> <a href="r6rs-Z-H-14.html#node_idx_516">14lxix</a>
@<tt>div0-and-mod0</tt> <a href="r6rs-Z-H-14.html#node_idx_514">14lxx</a>
@<tt>dot</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_916">15xxxviii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_930">15xxxix</a>
@<tt>dw</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_956">15xl</a>, 
<a href="r6rs-Z-H-15.html#node_idx_978">15xli</a>
@dynamic environment <a href="r6rs-Z-H-8.html#node_idx_258">8viii</a>
@dynamic extent <a href="r6rs-Z-H-8.html#node_idx_256">8ix</a>
@<tt>dynamic-wind</tt> <a href="r6rs-Z-H-14.html#node_idx_764">14lxxi</a>
@<tt>dynamic-wind</tt> (formal semantics) 
<a href="r6rs-Z-H-15.html#node_idx_950">15xlii</a>, <a href="r6rs-Z-H-15.html#node_idx_952">15xliii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_954">15xliv</a></p>
<p>
</p>
<p>
@<tt>#e</tt> <a href="r6rs-Z-H-7.html#node_idx_124">7xxii</a>, <a href="r6rs-Z-H-7.html#node_idx_168">7xxiii</a>
@<tt>else</tt> <a href="r6rs-Z-H-14.html#node_idx_380">14lxxii</a>, <a href="r6rs-Z-H-14.html#node_idx_386">14lxxiii</a>
@empty list <a href="r6rs-Z-H-7.html#node_idx_174">7xxiv</a>, <a href="r6rs-Z-H-14.html#node_idx_344">14lxxiv</a>, 
<a href="r6rs-Z-H-14.html#node_idx_592">14lxxv</a>, <a href="r6rs-Z-H-14.html#node_idx_602">14lxxvi</a>, 
<a href="r6rs-Z-H-14.html#node_idx_604">14lxxvii</a>, <a href="r6rs-Z-H-14.html#node_idx_626">14lxxviii</a>
@<tt>eq?</tt> <a href="r6rs-Z-H-14.html#node_idx_434">14lxxix</a>
@<tt>equal?</tt> <a href="r6rs-Z-H-14.html#node_idx_436">14lxxx</a>
@equivalence predicate <a href="r6rs-Z-H-14.html#node_idx_426">14lxxxi</a>
@<tt>eqv?</tt> <a href="r6rs-Z-H-14.html#node_idx_428">14lxxxii</a>
@<tt>eqv?</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_902">15xlv</a>, 
<a href="r6rs-Z-H-15.html#node_idx_904">15xlvi</a>, <a href="r6rs-Z-H-15.html#node_idx_906">15xlvii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_908">15xlviii</a>, <a href="r6rs-Z-H-15.html#node_idx_972">15xlix</a>
@<tt>error</tt> <a href="r6rs-Z-H-14.html#node_idx_746">14lxxxiii</a>
@escape procedure <a href="r6rs-Z-H-4.html#node_idx_58">4ix</a>, <a href="r6rs-Z-H-14.html#node_idx_758">14lxxxiv</a>
@escape sequence <a href="r6rs-Z-H-7.html#node_idx_158">7xxv</a>
@<tt>even?</tt> <a href="r6rs-Z-H-14.html#node_idx_482">14lxxxv</a>
@exact <a href="r6rs-Z-H-6.html#node_idx_82">6ii</a>, <a href="r6rs-Z-H-14.html#node_idx_430">14lxxxvi</a>
@<tt>exact</tt> <a href="r6rs-Z-H-14.html#node_idx_462">14lxxxvii</a>
@<tt>exact-integer-sqrt</tt> <a href="r6rs-Z-H-14.html#node_idx_562">14lxxxviii</a>
@<tt>exact?</tt> <a href="r6rs-Z-H-14.html#node_idx_456">14lxxxix</a>
@exactness <a href="r6rs-Z-H-6.html#node_idx_80">6iii</a>
@exceptional situation <a href="r6rs-Z-H-8.html#node_idx_218">8x</a>
@<tt>exp</tt> <a href="r6rs-Z-H-14.html#node_idx_540">14xc</a>
@<tt>export</tt> <a href="r6rs-Z-H-10.html#node_idx_270">10ii</a>
@expression <a href="r6rs-Z-H-4.html#node_idx_22">4x</a>, <a href="r6rs-Z-H-10.html#node_idx_274">10iii</a>
@<tt>expt</tt> <a href="r6rs-Z-H-14.html#node_idx_564">14xci</a>
@external representation <a href="r6rs-Z-H-7.html#node_idx_106">7xxvi</a></p>
<p>
</p>
<p>
@<tt>#f</tt> <a href="r6rs-Z-H-7.html#node_idx_154">7xxvii</a>, <a href="r6rs-Z-H-14.html#node_idx_590">14xcii</a>
@false <a href="r6rs-Z-H-8.html#node_idx_236">8xi</a>
@<tt>finite?</tt> <a href="r6rs-Z-H-14.html#node_idx_484">14xciii</a>
@fixnum <a href="r6rs-Z-H-6.html#node_idx_86">6iv</a>
@flonum <a href="r6rs-Z-H-6.html#node_idx_88">6v</a>
@<tt>floor</tt> <a href="r6rs-Z-H-14.html#node_idx_528">14xciv</a>
@<tt>for-each</tt> <a href="r6rs-Z-H-14.html#node_idx_644">14xcv</a>
@form <a href="r6rs-Z-H-4.html#node_idx_34">4xi</a>, <a href="r6rs-Z-H-7.html#node_idx_110">7xxviii</a></p>
<p>
</p>
<p>
@<tt>gcd</tt> <a href="r6rs-Z-H-14.html#node_idx_520">14xcvi</a></p>
<p>
</p>
<p>
@hole <a href="r6rs-Z-H-15.html#node_idx_800">15l</a>
@hygienic <a href="r6rs-Z-H-12.html#node_idx_318">12ii</a></p>
<p>
</p>
<p>
@<tt>#i</tt> <a href="r6rs-Z-H-7.html#node_idx_122">7xxix</a>, <a href="r6rs-Z-H-7.html#node_idx_170">7xxx</a>
@identifier <a href="r6rs-Z-H-4.html#node_idx_30">4xii</a>, <a href="r6rs-Z-H-7.html#node_idx_118">7xxxi</a>, 
<a href="r6rs-Z-H-7.html#node_idx_144">7xxxii</a>, <a href="r6rs-Z-H-8.html#node_idx_198">8xii</a>
@<tt>identifier-syntax</tt> <a href="r6rs-Z-H-14.html#node_idx_796">14xcvii</a>
@<tt>if</tt> <a href="r6rs-Z-H-14.html#node_idx_366">14xcviii</a>, <a href="r6rs-Z-H-14.html#node_idx_368">14xcix</a>
@<tt>if</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_852">15li</a>, 
<a href="r6rs-Z-H-15.html#node_idx_854">15lii</a>
@<tt>imag-part</tt> <a href="r6rs-Z-H-14.html#node_idx_572">14c</a>
@immutable <a href="r6rs-Z-H-8.html#node_idx_248">8xiii</a>
@implementation restriction <a href="r6rs-Z-H-6.html#node_idx_90">6vi</a>, 
<a href="r6rs-Z-H-8.html#node_idx_224">8xiv</a>
@<tt>import</tt> <a href="r6rs-Z-H-10.html#node_idx_268">10iv</a>
@import level <a href="r6rs-Z-H-10.html#node_idx_288">10v</a>
@improper list <a href="r6rs-Z-H-14.html#node_idx_606">14ci</a>
@inexact <a href="r6rs-Z-H-6.html#node_idx_84">6vii</a>, <a href="r6rs-Z-H-14.html#node_idx_432">14cii</a>
@<tt>inexact</tt> <a href="r6rs-Z-H-14.html#node_idx_460">14ciii</a>
@<tt>inexact?</tt> <a href="r6rs-Z-H-14.html#node_idx_458">14civ</a>
@<tt>infinite?</tt> <a href="r6rs-Z-H-14.html#node_idx_486">14cv</a>
@infinity <a href="r6rs-Z-H-6.html#node_idx_92">6viii</a>
@instance <a href="r6rs-Z-H-10.html#node_idx_278">10vi</a>
@instantiation <a href="r6rs-Z-H-10.html#node_idx_280">10vii</a>
@integer object <a href="r6rs-Z-H-6.html#node_idx_78">6ix</a>
@<tt>integer-&gt;char</tt> <a href="r6rs-Z-H-14.html#node_idx_672">14cvi</a>
@<tt>integer-valued?</tt> <a href="r6rs-Z-H-14.html#node_idx_454">14cvii</a>
@<tt>integer?</tt> <a href="r6rs-Z-H-14.html#node_idx_448">14cviii</a></p>
<p>
</p>
<p>
@keyword <a href="r6rs-Z-H-8.html#node_idx_200">8xv</a>, <a href="r6rs-Z-H-12.html#node_idx_314">12iii</a></p>
<p>
</p>
<p>
@<tt>lambda</tt> <a href="r6rs-Z-H-14.html#node_idx_364">14cix</a>
@<tt>lambda</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_806">15liii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_910">15liv</a>, <a href="r6rs-Z-H-15.html#node_idx_912">15lv</a>, 
<a href="r6rs-Z-H-15.html#node_idx_914">15lvi</a>, <a href="r6rs-Z-H-15.html#node_idx_918">15lvii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_920">15lviii</a>, <a href="r6rs-Z-H-15.html#node_idx_928">15lix</a>, 
<a href="r6rs-Z-H-15.html#node_idx_932">15lx</a>
@<tt>lcm</tt> <a href="r6rs-Z-H-14.html#node_idx_522">14cx</a>
@<tt>length</tt> <a href="r6rs-Z-H-14.html#node_idx_632">14cxi</a>
@<tt>let</tt> <a href="r6rs-Z-H-14.html#node_idx_394">14cxii</a>, <a href="r6rs-Z-H-14.html#node_idx_766">14cxiii</a>
@<tt>let*</tt> <a href="r6rs-Z-H-14.html#node_idx_398">14cxiv</a>
@<tt>let*-values</tt> <a href="r6rs-Z-H-14.html#node_idx_414">14cxv</a>
@<tt>let-syntax</tt> <a href="r6rs-Z-H-14.html#node_idx_776">14cxvi</a>
@<tt>let-values</tt> <a href="r6rs-Z-H-14.html#node_idx_410">14cxvii</a>
@<tt>letrec</tt> <a href="r6rs-Z-H-14.html#node_idx_402">14cxviii</a>
@<tt>letrec</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_968">15lxi</a>
@<tt>letrec*</tt> <a href="r6rs-Z-H-14.html#node_idx_406">14cxix</a>
@<tt>letrec*</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_970">15lxii</a>
@<tt>letrec-syntax</tt> <a href="r6rs-Z-H-14.html#node_idx_782">14cxx</a>
@level <a href="r6rs-Z-H-10.html#node_idx_286">10viii</a>
@lexeme <a href="r6rs-Z-H-7.html#node_idx_116">7xxxiii</a>
@library <a href="r6rs-Z-H-4.html#node_idx_60">4xiii</a>, <a href="r6rs-Z-H-8.html#node_idx_194">8xvi</a>, 
<a href="r6rs-Z-H-10.html#node_idx_264">10ix</a>
@<tt>library</tt> <a href="r6rs-Z-H-10.html#node_idx_266">10x</a>
@list <a href="r6rs-Z-H-4.html#node_idx_16">4xiv</a>
@<tt>list</tt> <a href="r6rs-Z-H-14.html#node_idx_630">14cxxi</a>
@<tt>list</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_868">15lxiii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_870">15lxiv</a>
@<tt>list-&gt;string</tt> <a href="r6rs-Z-H-14.html#node_idx_714">14cxxii</a>
@<tt>list-&gt;vector</tt> <a href="r6rs-Z-H-14.html#node_idx_738">14cxxiii</a>
@<tt>list-ref</tt> <a href="r6rs-Z-H-14.html#node_idx_640">14cxxiv</a>
@<tt>list-tail</tt> <a href="r6rs-Z-H-14.html#node_idx_638">14cxxv</a>
@<tt>list?</tt> <a href="r6rs-Z-H-14.html#node_idx_628">14cxxvi</a>
@literal <a href="r6rs-Z-H-12.html#node_idx_292">12iv</a>
@location <a href="r6rs-Z-H-8.html#node_idx_242">8xvii</a>
@<tt>log</tt> <a href="r6rs-Z-H-14.html#node_idx_542">14cxxvii</a>, <a href="r6rs-Z-H-14.html#node_idx_544">14cxxviii</a></p>
<p>
</p>
<p>
@macro <a href="r6rs-Z-H-4.html#node_idx_50">4xv</a>, <a href="r6rs-Z-H-12.html#node_idx_304">12v</a>
@macro keyword <a href="r6rs-Z-H-12.html#node_idx_316">12vi</a>
@macro transformer <a href="r6rs-Z-H-12.html#node_idx_306">12vii</a>, <a href="r6rs-Z-H-14.html#node_idx_780">14cxxix</a>
@macro use <a href="r6rs-Z-H-12.html#node_idx_310">12viii</a>
@<tt>magnitude</tt> <a href="r6rs-Z-H-14.html#node_idx_574">14cxxx</a>
@<tt>make-polar</tt> <a href="r6rs-Z-H-14.html#node_idx_568">14cxxxi</a>
@<tt>make-rectangular</tt> <a href="r6rs-Z-H-14.html#node_idx_566">14cxxxii</a>
@<tt>make-string</tt> <a href="r6rs-Z-H-14.html#node_idx_688">14cxxxiii</a>, 
<a href="r6rs-Z-H-14.html#node_idx_690">14cxxxiv</a>
@<tt>make-vector</tt> <a href="r6rs-Z-H-14.html#node_idx_724">14cxxxv</a>, 
<a href="r6rs-Z-H-14.html#node_idx_726">14cxxxvi</a>
@<tt>map</tt> <a href="r6rs-Z-H-14.html#node_idx_642">14cxxxvii</a>
@<tt>max</tt> <a href="r6rs-Z-H-14.html#node_idx_490">14cxxxviii</a>
@may <a href="r6rs-Z-H-5.html#node_idx_72">5</a>
@<tt>min</tt> <a href="r6rs-Z-H-14.html#node_idx_492">14cxxxix</a>
@<tt>mod</tt> <a href="r6rs-Z-H-14.html#node_idx_512">14cxl</a>
@<tt>mod0</tt> <a href="r6rs-Z-H-14.html#node_idx_518">14cxli</a>
@must <a href="r6rs-Z-H-5.html#node_idx_64">5ii</a>
@must be <a href="r6rs-Z-H-9.html#node_idx_260">9ii</a>
@must not <a href="r6rs-Z-H-5.html#node_idx_66">5iii</a>
@mutable <a href="r6rs-Z-H-8.html#node_idx_246">8xviii</a></p>
<p>
</p>
<p>
@NaN <a href="r6rs-Z-H-6.html#node_idx_98">6x</a>
@<tt>nan?</tt> <a href="r6rs-Z-H-14.html#node_idx_488">14cxlii</a>
@negative infinity <a href="r6rs-Z-H-6.html#node_idx_96">6xi</a>
@<tt>negative?</tt> <a href="r6rs-Z-H-14.html#node_idx_478">14cxliii</a>
@<tt>not</tt> <a href="r6rs-Z-H-14.html#node_idx_594">14cxliv</a>
@<tt>null</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_884">15lxv</a>, 
<a href="r6rs-Z-H-15.html#node_idx_936">15lxvi</a>
@<tt>null?</tt> <a href="r6rs-Z-H-14.html#node_idx_346">14cxlv</a>, <a href="r6rs-Z-H-14.html#node_idx_624">14cxlvi</a>
@<tt>null?</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_886">15lxvii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_888">15lxviii</a>
@number <a href="r6rs-Z-H-4.html#node_idx_6">4xvi</a>, <a href="r6rs-Z-H-6.html#node_idx_74">6xii</a>
@<tt>number-&gt;string</tt> <a href="r6rs-Z-H-14.html#node_idx_578">14cxlvii</a>, 
<a href="r6rs-Z-H-14.html#node_idx_580">14cxlviii</a>, <a href="r6rs-Z-H-14.html#node_idx_582">14cxlix</a>
@<tt>number?</tt> <a href="r6rs-Z-H-14.html#node_idx_334">14cl</a>, <a href="r6rs-Z-H-14.html#node_idx_440">14cli</a>
@<tt>numerator</tt> <a href="r6rs-Z-H-14.html#node_idx_524">14clii</a>
@numerical types <a href="r6rs-Z-H-6.html#node_idx_76">6xiii</a></p>
<p>
</p>
<p>
@<tt>#o</tt> <a href="r6rs-Z-H-7.html#node_idx_128">7xxxiv</a>, <a href="r6rs-Z-H-7.html#node_idx_162">7xxxv</a>
@object <a href="r6rs-Z-H-4.html#node_idx_2">4xvii</a>
@<tt>odd?</tt> <a href="r6rs-Z-H-14.html#node_idx_480">14cliii</a>
@<tt>or</tt> <a href="r6rs-Z-H-14.html#node_idx_390">14cliv</a></p>
<p>
</p>
<p>
@pair <a href="r6rs-Z-H-4.html#node_idx_14">4xviii</a>, <a href="r6rs-Z-H-14.html#node_idx_600">14clv</a>
@<tt>pair?</tt> <a href="r6rs-Z-H-14.html#node_idx_330">14clvi</a>, <a href="r6rs-Z-H-14.html#node_idx_608">14clvii</a>
@<tt>pair?</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_890">15lxix</a>, 
<a href="r6rs-Z-H-15.html#node_idx_892">15lxx</a>
@pattern variable <a href="r6rs-Z-H-14.html#node_idx_794">14clviii</a>
@phase <a href="r6rs-Z-H-10.html#node_idx_276">10xi</a>
@positive infinity <a href="r6rs-Z-H-6.html#node_idx_94">6xiv</a>
@<tt>positive?</tt> <a href="r6rs-Z-H-14.html#node_idx_476">14clix</a>
@predicate <a href="r6rs-Z-H-14.html#node_idx_424">14clx</a>
@prefix notation <a href="r6rs-Z-H-4.html#node_idx_24">4xix</a>
@procedure <a href="r6rs-Z-H-4.html#node_idx_20">4xx</a>, <a href="r6rs-Z-H-4.html#node_idx_38">4xxi</a>
@procedure call <a href="r6rs-Z-H-4.html#node_idx_40">4xxii</a>, <a href="r6rs-Z-H-12.html#node_idx_300">12ix</a>
@<tt>procedure?</tt> <a href="r6rs-Z-H-14.html#node_idx_342">14clxi</a>, 
<a href="r6rs-Z-H-14.html#node_idx_438">14clxii</a>
@<tt>procedure?</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_924">15lxxi</a>, 
<a href="r6rs-Z-H-15.html#node_idx_926">15lxxii</a>
@proper tail recursion <a href="r6rs-Z-H-8.html#node_idx_250">8xix</a></p>
<p>
</p>
<p>
@<tt>quasiquote</tt> <a href="r6rs-Z-H-14.html#node_idx_768">14clxiii</a>
@<tt>quote</tt> <a href="r6rs-Z-H-14.html#node_idx_362">14clxiv</a></p>
<p>
</p>
<p>
@raise <a href="r6rs-Z-H-8.html#node_idx_220">8xx</a>
@<tt>raise</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_820">15lxxiii</a>
@<tt>raise-continuable</tt> (formal semantics) 
<a href="r6rs-Z-H-15.html#node_idx_818">15lxxiv</a>
@<tt>rational-valued?</tt> <a href="r6rs-Z-H-14.html#node_idx_452">14clxv</a>
@<tt>rational?</tt> <a href="r6rs-Z-H-14.html#node_idx_446">14clxvi</a>
@<tt>rationalize</tt> <a href="r6rs-Z-H-14.html#node_idx_536">14clxvii</a>
@<tt>real-part</tt> <a href="r6rs-Z-H-14.html#node_idx_570">14clxviii</a>
@<tt>real-valued?</tt> <a href="r6rs-Z-H-14.html#node_idx_450">14clxix</a>
@<tt>real?</tt> <a href="r6rs-Z-H-14.html#node_idx_444">14clxx</a>
@referentially transparent <a href="r6rs-Z-H-12.html#node_idx_320">12x</a>
@region <a href="r6rs-Z-H-8.html#node_idx_212">8xxi</a>, <a href="r6rs-Z-H-14.html#node_idx_374">14clxxi</a>, 
<a href="r6rs-Z-H-14.html#node_idx_392">14clxxii</a>, <a href="r6rs-Z-H-14.html#node_idx_396">14clxxiii</a>, 
<a href="r6rs-Z-H-14.html#node_idx_400">14clxxiv</a>, <a href="r6rs-Z-H-14.html#node_idx_404">14clxxv</a>, 
<a href="r6rs-Z-H-14.html#node_idx_408">14clxxvi</a>, <a href="r6rs-Z-H-14.html#node_idx_412">14clxxvii</a>, 
<a href="r6rs-Z-H-14.html#node_idx_416">14clxxviii</a>
@responsibility <a href="r6rs-Z-H-8.html#node_idx_228">8xxii</a>
@<tt>reverse</tt> <a href="r6rs-Z-H-14.html#node_idx_636">14clxxix</a>
@<tt>(rnrs base (6))</tt> <a href="r6rs-Z-H-14.html#node_idx_324">14clxxx</a>
@<tt>round</tt> <a href="r6rs-Z-H-14.html#node_idx_534">14clxxxi</a></p>
<p>
</p>
<p>
@safe libraries <a href="r6rs-Z-H-8.html#node_idx_232">8xxiii</a>
@scalar value <a href="r6rs-Z-H-14.html#node_idx_656">14clxxxii</a>, <a href="r6rs-Z-H-14.html#node_idx_662">14clxxxiii</a>
@<tt>set!</tt> <a href="r6rs-Z-H-14.html#node_idx_372">14clxxxiv</a>
@<tt>set!</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_922">15lxxv</a>, 
<a href="r6rs-Z-H-15.html#node_idx_964">15lxxvi</a>, <a href="r6rs-Z-H-15.html#node_idx_966">15lxxvii</a>
@<tt>set-car!</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_880">15lxxviii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_898">15lxxix</a>
@<tt>set-cdr!</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_882">15lxxx</a>, 
<a href="r6rs-Z-H-15.html#node_idx_900">15lxxxi</a>
@should <a href="r6rs-Z-H-5.html#node_idx_68">5iv</a>
@should not <a href="r6rs-Z-H-5.html#node_idx_70">5v</a>
@simplest rational <a href="r6rs-Z-H-14.html#node_idx_538">14clxxxv</a>
@<tt>sin</tt> <a href="r6rs-Z-H-14.html#node_idx_546">14clxxxvi</a>
@special form <a href="r6rs-Z-H-4.html#node_idx_44">4xxiii</a>
@splicing <a href="r6rs-Z-H-14.html#node_idx_422">14clxxxvii</a>
@<tt>sqrt</tt> <a href="r6rs-Z-H-14.html#node_idx_560">14clxxxviii</a>
@standard library <a href="r6rs-Z-H-8.html#node_idx_196">8xxiv</a>
@string <a href="r6rs-Z-H-4.html#node_idx_10">4xxiv</a>
@<tt>string</tt> <a href="r6rs-Z-H-14.html#node_idx_692">14clxxxix</a>
@<tt>string-&gt;list</tt> <a href="r6rs-Z-H-14.html#node_idx_712">14cxc</a>
@<tt>string-&gt;number</tt> <a href="r6rs-Z-H-14.html#node_idx_584">14cxci</a>, 
<a href="r6rs-Z-H-14.html#node_idx_586">14cxcii</a>
@<tt>string-&gt;symbol</tt> <a href="r6rs-Z-H-14.html#node_idx_652">14cxciii</a>
@<tt>string-append</tt> <a href="r6rs-Z-H-14.html#node_idx_710">14cxciv</a>
@<tt>string-copy</tt> <a href="r6rs-Z-H-14.html#node_idx_718">14cxcv</a>
@<tt>string-for-each</tt> <a href="r6rs-Z-H-14.html#node_idx_716">14cxcvi</a>
@<tt>string-length</tt> <a href="r6rs-Z-H-14.html#node_idx_694">14cxcvii</a>
@<tt>string-ref</tt> <a href="r6rs-Z-H-14.html#node_idx_696">14cxcviii</a>
@<tt>string&lt;=?</tt> <a href="r6rs-Z-H-14.html#node_idx_704">14cxcix</a>
@<tt>string&lt;?</tt> <a href="r6rs-Z-H-14.html#node_idx_700">14cc</a>
@<tt>string=?</tt> <a href="r6rs-Z-H-14.html#node_idx_698">14cci</a>
@<tt>string&gt;=?</tt> <a href="r6rs-Z-H-14.html#node_idx_706">14ccii</a>
@<tt>string&gt;?</tt> <a href="r6rs-Z-H-14.html#node_idx_702">14cciii</a>
@<tt>string?</tt> <a href="r6rs-Z-H-14.html#node_idx_338">14cciv</a>, <a href="r6rs-Z-H-14.html#node_idx_686">14ccv</a>
@subform <a href="r6rs-Z-H-4.html#node_idx_36">4xxv</a>, <a href="r6rs-Z-H-7.html#node_idx_112">7xxxvi</a>
@<tt>substring</tt> <a href="r6rs-Z-H-14.html#node_idx_708">14ccvi</a>
@surrogate <a href="r6rs-Z-H-14.html#node_idx_666">14ccvii</a>
@symbol <a href="r6rs-Z-H-4.html#node_idx_12">4xxvi</a>, <a href="r6rs-Z-H-7.html#node_idx_150">7xxxvii</a>
@<tt>symbol-&gt;string</tt> <a href="r6rs-Z-H-14.html#node_idx_648">14ccviii</a>
@<tt>symbol=?</tt> <a href="r6rs-Z-H-14.html#node_idx_650">14ccix</a>
@<tt>symbol?</tt> <a href="r6rs-Z-H-14.html#node_idx_332">14ccx</a>, <a href="r6rs-Z-H-14.html#node_idx_646">14ccxi</a>
@syntactic abstraction <a href="r6rs-Z-H-12.html#node_idx_302">12xi</a>
@syntactic datum <a href="r6rs-Z-H-4.html#node_idx_54">4xxvii</a>, <a href="r6rs-Z-H-7.html#node_idx_104">7xxxviii</a>, 
<a href="r6rs-Z-H-7.html#node_idx_172">7xxxix</a>
@syntactic keyword <a href="r6rs-Z-H-4.html#node_idx_42">4xxviii</a>, <a href="r6rs-Z-H-7.html#node_idx_148">7xl</a>, 
<a href="r6rs-Z-H-8.html#node_idx_202">8xxv</a>, <a href="r6rs-Z-H-12.html#node_idx_312">12xii</a>
@syntax violation <a href="r6rs-Z-H-8.html#node_idx_230">8xxvi</a>
@<tt>syntax-rules</tt> <a href="r6rs-Z-H-14.html#node_idx_786">14ccxii</a></p>
<p>
</p>
<p>
@<tt>#t</tt> <a href="r6rs-Z-H-7.html#node_idx_152">7xli</a>, <a href="r6rs-Z-H-14.html#node_idx_588">14ccxiii</a>
@tail call <a href="r6rs-Z-H-8.html#node_idx_254">8xxvii</a>, <a href="r6rs-Z-H-14.html#node_idx_798">14ccxiv</a>
@tail context <a href="r6rs-Z-H-8.html#node_idx_252">8xxviii</a>
@<tt>tan</tt> <a href="r6rs-Z-H-14.html#node_idx_550">14ccxv</a>
@<tt>throw</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_962">15lxxxii</a>
@top-level program <a href="r6rs-Z-H-4.html#node_idx_62">4xxix</a>, <a href="r6rs-Z-H-8.html#node_idx_192">8xxix</a>, 
<a href="r6rs-Z-H-11.html#node_idx_290">11</a>
@transformer <a href="r6rs-Z-H-12.html#node_idx_308">12xiii</a>, <a href="r6rs-Z-H-14.html#node_idx_778">14ccxvi</a>
@true <a href="r6rs-Z-H-8.html#node_idx_234">8xxx</a>, <a href="r6rs-Z-H-14.html#node_idx_370">14ccxvii</a>, 
<a href="r6rs-Z-H-14.html#node_idx_382">14ccxviii</a>
@<tt>truncate</tt> <a href="r6rs-Z-H-14.html#node_idx_532">14ccxix</a>
@type <a href="r6rs-Z-H-14.html#node_idx_326">14ccxx</a></p>
<p>
</p>
<p>
@unbound <a href="r6rs-Z-H-8.html#node_idx_214">8xxxi</a>, <a href="r6rs-Z-H-12.html#node_idx_296">12xiv</a>
@Unicode <a href="r6rs-Z-H-14.html#node_idx_654">14ccxxi</a>
@Unicode scalar value <a href="r6rs-Z-H-14.html#node_idx_660">14ccxxii</a>
@<tt>unquote</tt> <a href="r6rs-Z-H-14.html#node_idx_770">14ccxxiii</a>
@<tt>unquote-splicing</tt> <a href="r6rs-Z-H-14.html#node_idx_772">14ccxxiv</a>
@unspecified behavior <a href="r6rs-Z-H-8.html#node_idx_238">8xxxii</a>
@unspecified values <a href="r6rs-Z-H-8.html#node_idx_240">8xxxiii</a></p>
<p>
</p>
<p>
@valid indices <a href="r6rs-Z-H-14.html#node_idx_684">14ccxxv</a>, <a href="r6rs-Z-H-14.html#node_idx_720">14ccxxvi</a>
@<tt>values</tt> <a href="r6rs-Z-H-14.html#node_idx_760">14ccxxvii</a>
@<tt>values</tt> (formal semantics) <a href="r6rs-Z-H-15.html#node_idx_802">15lxxxiii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_804">15lxxxiv</a>, <a href="r6rs-Z-H-15.html#node_idx_826">15lxxxv</a>, 
<a href="r6rs-Z-H-15.html#node_idx_858">15lxxxvi</a>, <a href="r6rs-Z-H-15.html#node_idx_862">15lxxxvii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_958">15lxxxviii</a>, <a href="r6rs-Z-H-15.html#node_idx_974">15lxxxix</a>, 
<a href="r6rs-Z-H-15.html#node_idx_980">15xc</a>, <a href="r6rs-Z-H-15.html#node_idx_984">15xci</a>
@variable <a href="r6rs-Z-H-4.html#node_idx_26">4xxx</a>, <a href="r6rs-Z-H-7.html#node_idx_146">7xlii</a>, 
<a href="r6rs-Z-H-8.html#node_idx_204">8xxxiv</a>, <a href="r6rs-Z-H-12.html#node_idx_294">12xv</a>
@vector <a href="r6rs-Z-H-4.html#node_idx_18">4xxxi</a>
@<tt>vector</tt> <a href="r6rs-Z-H-14.html#node_idx_728">14ccxxviii</a>
@<tt>vector-&gt;list</tt> <a href="r6rs-Z-H-14.html#node_idx_736">14ccxxix</a>
@<tt>vector-fill!</tt> <a href="r6rs-Z-H-14.html#node_idx_740">14ccxxx</a>
@<tt>vector-for-each</tt> <a href="r6rs-Z-H-14.html#node_idx_744">14ccxxxi</a>
@<tt>vector-length</tt> <a href="r6rs-Z-H-14.html#node_idx_730">14ccxxxii</a>
@<tt>vector-map</tt> <a href="r6rs-Z-H-14.html#node_idx_742">14ccxxxiii</a>
@<tt>vector-ref</tt> <a href="r6rs-Z-H-14.html#node_idx_732">14ccxxxiv</a>
@<tt>vector-set!</tt> <a href="r6rs-Z-H-14.html#node_idx_734">14ccxxxv</a>
@<tt>vector?</tt> <a href="r6rs-Z-H-14.html#node_idx_340">14ccxxxvi</a>, <a href="r6rs-Z-H-14.html#node_idx_722">14ccxxxvii</a>
@visit <a href="r6rs-Z-H-10.html#node_idx_282">10xii</a>
@visiting <a href="r6rs-Z-H-10.html#node_idx_284">10xiii</a></p>
<p>
</p>
<p>
@Whitespace <a href="r6rs-Z-H-7.html#node_idx_132">7xliii</a>
@<tt>with-exception-handler</tt> (formal semantics) 
<a href="r6rs-Z-H-15.html#node_idx_812">15xcii</a>, <a href="r6rs-Z-H-15.html#node_idx_814">15xciii</a>, 
<a href="r6rs-Z-H-15.html#node_idx_816">15xciv</a>, <a href="r6rs-Z-H-15.html#node_idx_828">15xcv</a></p>
<p>
</p>
<p>
@<tt>#x</tt> <a href="r6rs-Z-H-7.html#node_idx_130">7xliv</a>, <a href="r6rs-Z-H-7.html#node_idx_166">7xlv</a></p>
<p>
</p>
<p>
@<tt>zero?</tt> <a href="r6rs-Z-H-14.html#node_idx_474">14ccxxxviii</a></p>
<p>
</p>

<p>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_Temp_3"></a>
<h1 class=chapter>
<div class=chapterheading>&nbsp;</div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_Temp_3">Introduction</a></h1>
<p>
</p>
<p>
</p>
<p>
Programming languages should be designed not by piling feature on top of
feature, but by removing the weaknesses and restrictions that make additional
features appear necessary.  Scheme demonstrates that a very small number
of rules for forming expressions, with no restrictions on how they are
composed, suffice to form a practical and efficient programming language
that is flexible enough to support most of the major programming
paradigms in use today.</p>
<p>
Scheme
was one of the first programming languages to incorporate first-class
procedures as in the lambda calculus, thereby proving the usefulness of
static scope rules and block structure in a dynamically typed language.
Scheme was the first major dialect of Lisp to distinguish procedures
from lambda expressions and symbols, to use a single lexical
environment for all variables, and to evaluate the operator position
of a procedure call in the same way as an operand position.  By relying
entirely on procedure calls to express iteration, Scheme emphasized the
fact that tail-recursive procedure calls are essentially gotos that
pass arguments.  Scheme was the first widely used programming language to
embrace first-class escape procedures, from which all previously known
sequential control structures can be synthesized.  A subsequent
version of Scheme introduced the concept of exact and inexact number objects,
an extension of Common Lisp's generic arithmetic.
More recently, Scheme became the first programming language to support
hygienic macros, which permit the syntax of a block-structured language
to be extended in a consistent and reliable manner.</p>
<p>
</p>
<a name="node_sec_Temp_4"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_4">Guiding principles</a></h3>
<p>To help guide the standardization effort, the editors have adopted a
set of principles, presented below.
Like the Scheme language defined in <i>Revised<sup>5</sup> Report on the Algorithmic Language Scheme</i>&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_14">14</a>], the language described
in this report is intended to:</p>
<p>
</p>
<ul>
<li><p>allow programmers to read each other's code, and allow
development of portable programs that can be executed in any
conforming implementation of Scheme;</p>
<p>
</p>
<li><p>derive its power from simplicity, a small number of generally
useful core syntactic forms and procedures, and no unnecessary
restrictions on how they are composed;</p>
<p>
</p>
<li><p>allow programs to define new procedures and new hygienic
syntactic forms;</p>
<p>
</p>
<li><p>support the representation of program source code as data;</p>
<p>
</p>
<li><p>make procedure calls powerful enough to express any form of
sequential control, and allow programs to perform non-local control
operations without the use of global program transformations;</p>
<p>
</p>
<li><p>allow interesting, purely functional programs to run indefinitely
without terminating or running out of memory on finite-memory
machines;</p>
<p>
</p>
<li><p>allow educators to use the language to teach programming
effectively, at various levels and with a variety of pedagogical
approaches; and</p>
<p>
</p>
<li><p>allow researchers to use the language to explore the design,
implementation, and semantics of programming languages.
</p>
</ul><p></p>
<p>
In addition, this report is intended to:</p>
<p>
</p>
<ul>
<li><p>allow programmers to create and distribute substantial programs
and libraries, e.g., implementations of Scheme Requests for
Implementation, that run without
modification in a variety of Scheme implementations;</p>
<p>
</p>
<li><p>support procedural, syntactic, and data abstraction more fully
by allowing programs to define hygiene-bending and hygiene-breaking
syntactic abstractions and new unique datatypes along with
procedures and hygienic macros in any scope;</p>
<p>
</p>
<li><p>allow programmers to rely on a level of automatic run-time type
and bounds checking sufficient to ensure type safety; and</p>
<p>
</p>
<li><p>allow implementations to generate efficient code, without
requiring programmers to use implementation-specific operators or
declarations.
</p>
</ul><p></p>
<p>
While it was possible to write portable programs in Scheme as
described in <i>Revised<sup>5</sup> Report on the Algorithmic Language Scheme</i>, and indeed portable Scheme programs were written
prior to this report, many Scheme programs were not, primarily because
of the lack of substantial standardized libraries and the
proliferation of implementation-specific language additions.</p>
<p>
In general, Scheme should include building blocks that allow a wide
variety of libraries to be written, include commonly used user-level
features to enhance portability and readability of library and
application code, and exclude features that are less commonly used and
easily implemented in separate libraries.</p>
<p>
The language described in this report is intended to also be backward
compatible with programs written in Scheme as described in <i>Revised<sup>5</sup> Report on the Algorithmic Language Scheme</i> to
the extent possible without compromising the above principles and
future viability of the language.  With respect to future viability,
the editors have operated under the assumption that many more Scheme
programs will be written in the future than exist in the present, so
the future programs are those with which we should be most concerned.</p>
<p>
</p>
<a name="node_sec_Temp_5"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_5">Acknowledgements</a></h3>
<p>Many people contributed significant help to this revision of the
report.  Specifically, we thank Aziz Ghuloum and Andre&#x301; van Tonder for
contributing reference implementations of the library system.  We
thank Alan Bawden, John Cowan, Sebastian Egner, Aubrey Jaffer, Shiro
Kawai, Bradley Lucier, and Andre&#x301; van Tonder for contributing insights on
language design.  Marc Feeley, Martin Gasbichler, Aubrey Jaffer, Lars T Hansen,
Richard Kelsey, Olin Shivers, and Andre&#x301; van Tonder wrote SRFIs that
served as direct input to the report.  Marcus Crestani, David Frese, 
Aziz Ghuloum, Arthur A. Gleckler, Eric Knauel, Jonathan Rees, and Andre&#x301;
van Tonder thoroughly proofread early versions of the report.</p>
<p>
We would also like to thank the following people for their
help in creating this report: Lauri Alanko,
Eli Barzilay, Alan Bawden, Brian C. Barnes, Per Bothner, Trent Buck,
Thomas Bushnell, Taylor Campbell, Ludovic Courte&#x300;s, Pascal Costanza,
John Cowan, Ray Dillinger, Jed Davis, J.A. &ldquo;Biep&rdquo; Durieux, Carl Eastlund,
Sebastian Egner, Tom Emerson, Marc Feeley, Matthias Felleisen, Andy
Freeman, Ken Friedenbach, Martin Gasbichler, Arthur A. Gleckler, Aziz
Ghuloum, Dave Gurnell, Lars T Hansen, Ben Harris, Sven Hartrumpf, Dave
Herman, Nils M. Holm, Stanislav Ievlev, James Jackson, Aubrey Jaffer,
Shiro Kawai, Alexander Kjeldaas, Eric Knauel, Michael Lenaghan, Felix Klock,
Donovan Kolbly, Marcin Kowalczyk, Thomas Lord, Bradley Lucier, Paulo
J. Matos, Dan Muresan, Ryan Newton, Jason Orendorff, Erich Rast, Jeff
Read, Jonathan Rees, Jorgen Scha&#x308;fer, Paul Schlie, Manuel Serrano,
Olin Shivers, Jonathan Shapiro, Jens Axel S&oslash;gaard, Jay Sulzberger,
Pinku Surana, Mikael Tillenius, Sam Tobin-Hochstadt, David Van Horn,
Andre&#x301; van Tonder, Reinder Verlinde, Alan Watson, Andrew Wilcox, Jon
Wilson, Lynn Winebarger, Keith Wright, and Chongkai Zhu.</p>
<p>
We would like to thank the following people for their help in creating
the previous revisions of this report: Alan Bawden, Michael
Blair, George Carrette, Andy Cromarty, Pavel Curtis, Jeff Dalton, Olivier Danvy,
Ken Dickey, Bruce Duba, Marc Feeley,
Andy Freeman, Richard Gabriel, Yekta Gu&#x308;rsel, Ken Haase, Robert
Hieb, Paul Hudak, Morry Katz, Chris Lindblad, Mark Meyer, Jim Miller, Jim Philbin,
John Ramsdell, Mike Shaff, Jonathan Shapiro, Julie Sussman,
Perry Wagle, Daniel Weise, Henry Wu, and Ozan Yigit.</p>
<p>
We thank Carol Fessenden, Daniel
Friedman, and Christopher Haynes for permission to use text from the Scheme 311
version 4 reference manual.  We thank Texas Instruments, Inc.&nbsp;for permission to
use text from the <em>TI Scheme Language Reference Manual</em>&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_26">26</a>].
We gladly acknowledge the influence of manuals for MIT Scheme&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_20">20</a>],
T&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_21">21</a>], Scheme 84&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_12">12</a>], Common Lisp&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_25">25</a>],
Chez Scheme&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_8">8</a>], PLT&nbsp;Scheme&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_11">11</a>],
and Algol 60&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_1">1</a>].</p>
<p>
We also thank Betty Dexter for the extreme effort she put into
setting this report in T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X, and Donald Knuth for designing the program
that caused her troubles.</p>
<p>
The Artificial Intelligence Laboratory of the
Massachusetts Institute of Technology, the Computer Science
Department of Indiana University, the Computer and Information
Sciences Department of the University of Oregon, and the NEC Research
Institute supported the preparation of this report.  Support for the MIT
work was provided in part by
the Advanced Research Projects Agency of the Department of Defense under Office
of Naval Research contract N00014-80-C-0505.  Support for the Indiana
University work was provided by NSF grants NCS 83-04567 and NCS
83-03325.</p>
<p>
   </p>
<p><div style="height: 9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
 </p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_1"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_1">Chapter 1</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_1">Overview of Scheme</a></h1>
<p></p>
<p>
This chapter gives an overview of Scheme's semantics.
The purpose of this overview is to explain
enough about the basic concepts of the language to facilitate
understanding of the subsequent chapters of the report, which are
organized as a reference manual.  Consequently, this overview is
not a complete introduction to the language, nor is it precise
in all respects or normative in any way.</p>
<p>
Following Algol, Scheme is a statically scoped programming
language.  Each use of a variable is associated with a lexically
apparent binding of that variable.</p>
<p>
Scheme has latent as opposed to manifest types
[<a href="r6rs-Z-H-21.html#node_bib_28">28</a>].  Types
are associated with objects<a name="node_idx_2"></a>(also called values) rather than
with variables.  (Some authors refer to languages with latent types as
untyped, weakly typed or dynamically typed languages.)  Other languages with
latent types are Python, Ruby, Smalltalk, and other dialects of Lisp.  Languages
with manifest types (sometimes referred to as strongly typed or
statically typed languages) include Algol 60, C, C#, Java, Haskell, and ML.</p>
<p>
All objects created in the course of a Scheme computation, including
procedures and continuations, have unlimited extent.
No Scheme object is ever destroyed.  The reason that
implementations of Scheme do not (usually!) run out of storage is that
they are permitted to reclaim the storage occupied by an object if
they can prove that the object cannot possibly matter to any future
computation.  Other languages in which most objects have unlimited
extent include C#, Java, Haskell, most Lisp dialects, ML, Python,
Ruby, and Smalltalk.</p>
<p>
Implementations of Scheme must be properly tail-recursive.
This allows the execution of an iterative computation in constant space,
even if the iterative computation is described by a syntactically
recursive procedure.  Thus with a properly tail-recursive implementation,
iteration can be expressed using the ordinary procedure-call
mechanics, so that special iteration constructs are useful only as
syntactic sugar.</p>
<p>
Scheme was one of the first languages to support procedures as
objects in their own right.  Procedures can be created dynamically,
stored in data structures, returned as results of procedures, and so
on.  Other languages with these properties include Common Lisp,
Haskell, ML, Ruby, and Smalltalk.</p>
<p>
One distinguishing feature of Scheme is that continuations, which
in most other languages only operate behind the scenes, also have
&ldquo;first-class&rdquo; status.  First-class continuations are useful for implementing a
wide variety of advanced control constructs, including non-local exits,
backtracking, and coroutines.</p>
<p>
In Scheme, the argument expressions of a procedure call are evaluated
before the procedure gains control, whether the procedure needs the
result of the evaluation or not.  C, C#, Common Lisp, Python,
Ruby, and Smalltalk are other languages that always evaluate argument
expressions before invoking a procedure.  This is distinct from the
lazy-evaluation semantics of Haskell, or the call-by-name semantics of
Algol 60, where an argument expression is not evaluated unless its
value is needed by the procedure.</p>
<p>
Scheme's model of arithmetic provides a rich set of numerical types
and operations on them.  Furthermore, it distinguishes <i>exact</i>
and <i>inexact</i> number objects: Essentially, an exact number
object corresponds to a number exactly, and an inexact number object
is the result of a computation that involved rounding or other errors.</p>
<p>
</p>
<a name="node_sec_1.1"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.1">1.1&nbsp;&nbsp;Basic types</a></h2>
<p>Scheme programs manipulate <i>objects</i>, which are also referred
to as <i>values</i>.
Scheme objects are organized into sets of values called <i>types</i>.
This section gives an overview of the fundamentally important types of the
Scheme language.  More types are described in later chapters.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
As Scheme is latently typed, the use of the term <i>type</i> in
this report differs from the use of the term in the context of other
languages, particularly those with manifest typing.
</blockquote><p>
</p>
<a name="node_sec_Temp_6"></a>
<h5 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_6">Booleans</a></h5>
<p><a name="node_idx_4"></a>A boolean is a truth value, and can be either
true or false.  In Scheme, the object for &ldquo;false&rdquo; is written
<tt>#f</tt>.  The object for &ldquo;true&rdquo; is written <tt>#t</tt>.  In
most places where a truth value is expected, however, any object different from
<tt>#f</tt> counts as true.</p>
<p>
</p>
<a name="node_sec_Temp_7"></a>
<h5 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_7">Numbers</a></h5>
<p><a name="node_idx_6"></a>Scheme supports a rich variety of numerical data types, including
objects representing integers of arbitrary precision, rational numbers, complex numbers, and
inexact numbers of various kinds.  Chapter&nbsp;<a href="r6rs-Z-H-6.html#node_chap_3">3</a> gives an
overview of the structure of Scheme's numerical tower.</p>
<p>
</p>
<a name="node_sec_Temp_8"></a>
<h5 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_8">Characters</a></h5>
<p><a name="node_idx_8"></a>Scheme characters mostly correspond to textual characters.
More precisely, they are isomorphic to the <i>scalar values</i> of
the Unicode standard.</p>
<p>
</p>
<a name="node_sec_Temp_9"></a>
<h5 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_9">Strings</a></h5>
<p><a name="node_idx_10"></a>Strings are finite sequences of characters with fixed length and thus
represent arbitrary Unicode texts.</p>
<p>
</p>
<a name="node_sec_Temp_10"></a>
<h5 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_10">Symbols</a></h5>
<p><a name="node_idx_12"></a>A symbol is an object representing a string,
the symbol's <i>name</i>.
Unlike strings, two symbols whose names are spelled the same
way are never distinguishable.  Symbols are useful for many applications;
for instance, they may be used the way enumerated values are used in
other languages.</p>
<p>
</p>
<a name="node_sec_Temp_11"></a>
<h5 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_11">Pairs and lists</a></h5>
<p><a name="node_idx_14"></a><a name="node_idx_16"></a>A pair is a data structure with two components.  The most common use
of pairs is to represent (singly linked) lists, where the first
component (the &ldquo;car&rdquo;) represents the first element of the list, and
the second component (the &ldquo;cdr&rdquo;) the rest of the list.  Scheme also
has a distinguished empty list, which is the last cdr in a chain of
pairs that form a list.</p>
<p>
</p>
<a name="node_sec_Temp_12"></a>
<h5 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_12">Vectors</a></h5>
<p><a name="node_idx_18"></a>Vectors, like lists, are linear data structures
representing finite sequences of arbitrary objects.
Whereas the elements of a list are accessed
sequentially through the chain of pairs representing it,
the elements of a vector are addressed by integer indices.
Thus, vectors are more appropriate than
lists for random access to elements.</p>
<p>
</p>
<a name="node_sec_Temp_13"></a>
<h5 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_Temp_13">Procedures</a></h5>
<p><a name="node_idx_20"></a>Procedures are values in Scheme.</p>
<p>
</p>
<a name="node_sec_1.2"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.2">1.2&nbsp;&nbsp;Expressions</a></h2>
<p>The most important elements of Scheme code are
<a name="node_idx_22"></a><i>expressions</i>.  Expressions can be
<i>evaluated</i>, producing a <i>value</i>.  (Actually, any number
of values&mdash;see section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.8">5.8</a>.)  The most
fundamental expressions are literal expressions:</p>
<p>
</p>

<tt><tt>#t</tt>&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#t</tt>
<p class=nopadding>23&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;23</p>
<p></tt></p>
<p>
This notation means that the expression <tt>#t</tt> evaluates to
<tt>#t</tt>, that is, the value for &ldquo;true&rdquo;,  and that the expression
<tt>23</tt> evaluates to a number object representing the number 23.</p>
<p>
Compound expressions are formed by placing parentheses around their
subexpressions.  The first subexpression identifies an operation; the
remaining subexpressions are operands to the operation:
</p>

<tt>(+&nbsp;23&nbsp;42)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;65
<p class=nopadding>(+&nbsp;14&nbsp;(*&nbsp;23&nbsp;42))&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;980</p>
<p></tt>
In the first of these examples, <tt>+</tt> is the name of
the built-in operation for addition, and <tt>23</tt> and <tt>42</tt> are the
operands.  The expression <tt>(+ 23 42)</tt> reads as &ldquo;the sum of 23 and
42&rdquo;.  Compound expressions can be nested&mdash;the second example reads
as &ldquo;the sum of 14 and the product of 23 and 42&rdquo;.</p>
<p>
As these examples indicate, compound expressions in Scheme are always
written using the same prefix notation<a name="node_idx_24"></a>.  As
a consequence, the parentheses are needed to indicate structure.
Consequently, &ldquo;superfluous&rdquo; parentheses, which are often permissible in
mathematical notation and also in many programming languages, are not
allowed in Scheme.</p>
<p>
As in many other languages, whitespace (including line endings) is not
significant when it separates subexpressions of an expression, and
can be used to indicate structure.</p>
<p>
</p>
<a name="node_sec_1.3"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.3">1.3&nbsp;&nbsp;Variables and binding</a></h2>
<p><a name="node_idx_26"></a><a name="node_idx_28"></a><a name="node_idx_30"></a>Scheme
allows identifiers to stand for locations containing values.
These identifiers are called variables.  In many cases, specifically
when the location's value is never modified after its creation, it is
useful to think of the variable as standing for the value directly.</p>
<p>
</p>

<tt>(let&nbsp;((x&nbsp;23)
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(y&nbsp;42))</p>

<p class=nopadding>&nbsp;&nbsp;(+&nbsp;x&nbsp;y))&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;65</p>
<p></tt></p>
<p>
In this case, the expression starting with <tt>let</tt> is a binding
construct.  The parenthesized structure following the <tt>let</tt> lists
variables alongside expressions: the variable <tt>x</tt> alongside <tt>23</tt>, and the variable <tt>y</tt> alongside <tt>42</tt>.  The <tt>let</tt>
expression binds <tt>x</tt> to 23, and <tt>y</tt> to 42.  These bindings are
available in the <i>body</i> of the <tt>let</tt> expression, <tt>(+ x
y)</tt>, and only there.</p>
<p>
</p>
<a name="node_sec_1.4"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.4">1.4&nbsp;&nbsp;Definitions</a></h2>
<p><a name="node_idx_32"></a>The variables bound by a <tt>let</tt> expression
are <i>local</i>, because their bindings are visible only in the
<tt>let</tt>'s body.  Scheme also allows creating top-level bindings for
identifiers as follows:</p>
<p>
</p>

<tt>(define&nbsp;x&nbsp;23)
<p class=nopadding>(define&nbsp;y&nbsp;42)</p>

<p class=nopadding>(+&nbsp;x&nbsp;y)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;65</p>
<p></tt></p>
<p>
(These are actually &ldquo;top-level&rdquo; in the body of a top-level program or library;
see section&nbsp;<a href="r6rs-Z-H-4.html#node_sec_1.12">1.12</a> below.)</p>
<p>
The first two parenthesized structures are <i>definitions</i>; they
create top-level bindings, binding <tt>x</tt> to 23 and <tt>y</tt> to 42.
Definitions are not expressions, and cannot appear in all places
where an expression can occur.  Moreover, a definition has no value.</p>
<p>
Bindings follow the lexical structure of the program:  When several
bindings with the same name exist, a variable refers to the binding
that is closest to it, starting with its occurrence in the program
and going from inside to outside, and referring to a top-level
binding if no
local binding can be found along the way:</p>
<p>
</p>

<tt>(define&nbsp;x&nbsp;23)
<p class=nopadding>(define&nbsp;y&nbsp;42)</p>

<p class=nopadding>(let&nbsp;((y&nbsp;43))</p>

<p class=nopadding>&nbsp;&nbsp;(+&nbsp;x&nbsp;y))&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;66</p>

<p class=nopadding></p>

<p class=nopadding>(let&nbsp;((y&nbsp;43))</p>

<p class=nopadding>&nbsp;&nbsp;(let&nbsp;((y&nbsp;44))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;x&nbsp;y)))&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;67</p>
<p></tt></p>
<p>
</p>
<a name="node_sec_1.5"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.5">1.5&nbsp;&nbsp;Forms</a></h2>
<p>While definitions are not expressions, compound expressions and
definitions exhibit similar syntactic structure:
</p>

<tt>(define&nbsp;x&nbsp;23)
<p class=nopadding>(*&nbsp;x&nbsp;2)</p>
<p></tt>
While the first line contains a definition, and the second an
expression, this distinction depends on the bindings for <tt>define</tt>
and <tt>*</tt>.  At the purely syntactical level, both are
<i>forms</i><a name="node_idx_34"></a>, and <i>form</i> is the general name for
a syntactic part of a Scheme program.  In particular, <tt>23</tt> is a
<i>subform</i><a name="node_idx_36"></a>of the form <tt>(define x 23)</tt>.</p>
<p>
</p>
<a name="node_sec_1.6"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.6">1.6&nbsp;&nbsp;Procedures</a></h2>
<p></p>
<p>
<a name="node_idx_38"></a>Definitions can also be used to define
procedures:</p>
<p>
</p>

<tt>(define&nbsp;(f&nbsp;x)
<p class=nopadding>&nbsp;&nbsp;(+&nbsp;x&nbsp;42))</p>

<p class=nopadding></p>

<p class=nopadding>(f&nbsp;23)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;65</p>
<p></tt></p>
<p>
A procedure is, slightly simplified, an abstraction of an
expression over objects.  In the example, the first definition defines a procedure
called <tt>f</tt>.  (Note the parentheses around <tt>f x</tt>, which
indicate that this is a procedure definition.)  The expression <tt>(f
23)</tt> is a <a name="node_idx_40"></a>procedure call, meaning,
roughly, &ldquo;evaluate <tt>(+ x 42)</tt> (the body of the procedure) with
<tt>x</tt> bound to 23&rdquo;.</p>
<p>
As procedures are objects, they can be passed to other
procedures:
</p>

<tt>(define&nbsp;(f&nbsp;x)
<p class=nopadding>&nbsp;&nbsp;(+&nbsp;x&nbsp;42))</p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;(g&nbsp;p&nbsp;x)</p>

<p class=nopadding>&nbsp;&nbsp;(p&nbsp;x))</p>

<p class=nopadding></p>

<p class=nopadding>(g&nbsp;f&nbsp;23)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;65</p>
<p></tt></p>
<p>
In this example, the body of <tt>g</tt> is evaluated with <tt>p</tt>
bound to <tt>f</tt> and <tt>x</tt> bound to 23, which is equivalent
to <tt>(f 23)</tt>, which evaluates to 65.</p>
<p>
In fact, many predefined operations of Scheme are provided not by
syntax, but by variables whose values are procedures.
The <tt>+</tt> operation, for example, which receives
special syntactic treatment in many other languages, is just a regular
identifier in Scheme, bound to a procedure that adds number objects.  The
same holds for <tt>*</tt> and many others:</p>
<p>
</p>

<tt>(define&nbsp;(h&nbsp;op&nbsp;x&nbsp;y)
<p class=nopadding>&nbsp;&nbsp;(op&nbsp;x&nbsp;y))</p>

<p class=nopadding></p>

<p class=nopadding>(h&nbsp;+&nbsp;23&nbsp;42)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;65</p>

<p class=nopadding>(h&nbsp;*&nbsp;23&nbsp;42)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;966</p>
<p></tt></p>
<p>
Procedure definitions are not the only way to create procedures.  A
<tt>lambda</tt> expression creates a new procedure as an object, with no
need to specify a name:</p>
<p>
</p>

<tt>((lambda&nbsp;(x)&nbsp;(+&nbsp;x&nbsp;42))&nbsp;23)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;65<p></tt></p>
<p>
The entire expression in this example is a procedure call; <tt>(lambda (x) (+ x 42))</tt>, evaluates to a procedure that takes a single
number object and adds 42 to it.</p>
<p>
</p>
<a name="node_sec_1.7"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.7">1.7&nbsp;&nbsp;Procedure calls and syntactic keywords</a></h2>
<p>Whereas <tt>(+ 23 42)</tt>, <tt>(f 23)</tt>, and <tt>((lambda (x) (+ x 42))
23)</tt> are all examples of procedure calls, <tt>lambda</tt> and <tt>let</tt> expressions are not.  This is because <tt>let</tt>, even though
it is an identifier, is not a variable, but is instead a <i>syntactic
keyword</i><a name="node_idx_42"></a>.  A form that has a
syntactic keyword as its first subexpression obeys special rules determined by
the keyword.  The <tt>define</tt> identifier in a definition is also a
syntactic keyword.  Hence, definitions are also not procedure calls.</p>
<p>
The rules for the <tt>lambda</tt> keyword specify that the first
subform is a list of parameters, and the remaining subforms are the body of
the procedure.  In <tt>let</tt> expressions, the first subform is a list
of binding specifications, and the remaining subforms constitute a body of
expressions.</p>
<p>
Procedure calls can generally be distinguished from these
<i>special forms</i><a name="node_idx_44"></a>by
looking for a syntactic keyword in the first position of an
form: if the first position does not contain a syntactic keyword, the expression
is a procedure call.  
(So-called <i>identifier macros</i> allow creating other kinds of
special forms, but are comparatively rare.)
The set of syntactic keywords of Scheme is
fairly small, which usually makes this task fairly simple.
It is possible, however, to create new bindings for syntactic keywords; see
section&nbsp;<a href="r6rs-Z-H-4.html#node_sec_1.9">1.9</a> below.</p>
<p>
</p>
<a name="node_sec_1.8"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.8">1.8&nbsp;&nbsp;Assignment</a></h2>
<p>Scheme variables bound by definitions or <tt>let</tt> or <tt>lambda</tt>
expressions are not actually bound directly to the objects specified in the
respective bindings, but to locations containing these objects.  The
contents of these locations can subsequently be modified destructively
via <i>assignment</i><a name="node_idx_46"></a>:
</p>

<tt>(let&nbsp;((x&nbsp;23))
<p class=nopadding>&nbsp;&nbsp;(set!&nbsp;x&nbsp;42)</p>

<p class=nopadding>&nbsp;&nbsp;x)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;42</p>
<p></tt></p>
<p>
In this case, the body of the <tt>let</tt> expression consists of two
expressions which are evaluated sequentially, with the value of the
final expression becoming the value of the entire <tt>let</tt>
expression.  The expression <tt>(set! x 42)</tt> is an assignment, saying
&ldquo;replace the object in the location referenced by <tt>x</tt> with 42&rdquo;.
Thus, the previous value of <tt>x</tt>, 23, is replaced by 42.</p>
<p>
</p>
<a name="node_sec_1.9"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.9">1.9&nbsp;&nbsp;Derived forms and macros</a></h2>
<p></p>
<p>
Many of the special forms specified in this report
can be translated into more basic special forms.
For example, a <tt>let</tt> expression can be translated
into a procedure call and a <tt>lambda</tt> expression.  The following two
expressions are equivalent:
</p>

<tt>(let&nbsp;((x&nbsp;23)
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(y&nbsp;42))</p>

<p class=nopadding>&nbsp;&nbsp;(+&nbsp;x&nbsp;y))&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;65</p>

<p class=nopadding></p>

<p class=nopadding>((lambda&nbsp;(x&nbsp;y)&nbsp;(+&nbsp;x&nbsp;y))&nbsp;23&nbsp;42)&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;65</p>
<p></tt></p>
<p>
Special forms like <tt>let</tt> expressions are called <i>derived
forms</i><a name="node_idx_48"></a>because their semantics can be
derived from that of other kinds of forms by a syntactic
transformation.  Some procedure definitions are also derived forms.  The
following two definitions are equivalent:</p>
<p>
</p>

<tt>(define&nbsp;(f&nbsp;x)
<p class=nopadding>&nbsp;&nbsp;(+&nbsp;x&nbsp;42))</p>

<p class=nopadding></p>

<p class=nopadding>(define&nbsp;f</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(x)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;x&nbsp;42)))</p>
<p></tt></p>
<p>
In Scheme, it is possible for a program to create its own derived
forms by binding syntactic keywords to macros<a name="node_idx_50"></a>:</p>
<p>
</p>

<tt>(define-syntax&nbsp;def
<p class=nopadding>&nbsp;&nbsp;(syntax-rules&nbsp;()</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((def&nbsp;f&nbsp;(p&nbsp;...)&nbsp;body)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(define&nbsp;(f&nbsp;p&nbsp;...)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body))))</p>

<p class=nopadding></p>

<p class=nopadding>(def&nbsp;f&nbsp;(x)</p>

<p class=nopadding>&nbsp;&nbsp;(+&nbsp;x&nbsp;42))</p>
<p></tt></p>
<p>
The <tt>define-syntax</tt> construct specifies that a parenthesized
structure matching the pattern <tt>(def f (p ...) body)</tt>, where <tt>f</tt>, <tt>p</tt>, and <tt>body</tt> are pattern variables, is translated to
<tt>(define (f p ...) body)</tt>.  Thus, the <tt>def</tt> form appearing in
the example gets translated to:</p>
<p>
</p>

<tt>(define&nbsp;(f&nbsp;x)
<p class=nopadding>&nbsp;&nbsp;(+&nbsp;x&nbsp;42))</p>
<p></tt></p>
<p>
The ability to create new syntactic keywords makes Scheme extremely
flexible and expressive, allowing many of the features
built into other languages to be derived forms in Scheme.</p>
<p>
</p>
<a name="node_sec_1.10"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.10">1.10&nbsp;&nbsp;Syntactic data and datum values</a></h2>
<p>A subset of the Scheme objects is called <i>datum
values</i><a name="node_idx_52"></a>. 
These include booleans, number objects, characters, symbols,
and strings as well as lists and vectors whose elements are data.  Each
datum value may be represented in textual form as a
<i>syntactic datum</i><a name="node_idx_54"></a>, which can be written out
and read back in without loss of information.
A datum value may be represented by several different syntactic data.
Moreover, each datum value
can be trivially translated to a literal expression in a program by
prepending a <tt><tt>'</tt></tt> to a corresponding syntactic datum:</p>
<p>
</p>

<tt>'23&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;23
<p class=nopadding>'<tt>#t</tt>&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;<tt>#t</tt></p>

<p class=nopadding>'foo&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;foo</p>

<p class=nopadding>'(1&nbsp;2&nbsp;3)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(1&nbsp;2&nbsp;3)</p>

<p class=nopadding>'#(1&nbsp;2&nbsp;3)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;#(1&nbsp;2&nbsp;3)</p>
<p></tt></p>
<p>
The <tt><tt>'</tt></tt> shown in the previous examples
is not needed for representations of number objects or booleans.
The syntactic datum <tt>foo</tt> represents a
symbol with name &ldquo;foo&rdquo;, and <tt>'foo</tt> is a literal expression with
that symbol as its value.  <tt>(1 2 3)</tt> is a syntactic datum that 
represents a list with elements 1, 2, and 3, and <tt>'(1 2 3)</tt> is a literal
expression with this list as its value.  Likewise, <tt>#(1 2 3)</tt>
is a syntactic datum that represents a vector with elements 1, 2 and 3, and
<tt>'#(1 2 3)</tt> is the corresponding literal.</p>
<p>
The syntactic data are a superset of the Scheme forms.  Thus, data
can be used to represent Scheme forms as data objects.  In
particular, symbols can be used to represent identifiers.</p>
<p>
</p>

<tt>'(+&nbsp;23&nbsp;42)&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(+&nbsp;23&nbsp;42)
<p class=nopadding>'(define&nbsp;(f&nbsp;x)&nbsp;(+&nbsp;x&nbsp;42))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;(define&nbsp;(f&nbsp;x)&nbsp;(+&nbsp;x&nbsp;42))</p>
<p></tt></p>
<p>
This facilitates writing programs that operate on Scheme source code,
in particular interpreters and program transformers.</p>
<p>
</p>
<a name="node_sec_1.11"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.11">1.11&nbsp;&nbsp;Continuations</a></h2>
<p>Whenever a Scheme expression is evaluated there is a
<i>continuation</i><a name="node_idx_56"></a>wanting the result of the
expression.  The continuation represents an entire (default) future
for the computation.  For example, informally the continuation of <tt>3</tt>
in the expression
</p>

<tt>(+&nbsp;1&nbsp;3)<p></tt>
adds 1 to it.  Normally these ubiquitous continuations are hidden
behind the scenes and programmers do not think much about them.  On
rare occasions, however, a programmer may need to deal with
continuations explicitly.  The <tt>call-with-current-continuation</tt>
procedure (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.15">11.15</a>) allows
Scheme programmers to do that by creating a procedure that reinstates
the current continuation.  The <tt>call-with-current-continuation</tt>
procedure accepts a procedure, calls it immediately with an argument
that is an <i>escape procedure</i><a name="node_idx_58"></a>.  This
escape procedure can then be called with an argument that becomes the
result of the call to <tt>call-with-current-continuation</tt>.  That is,
the escape procedure abandons its own continuation, and reinstates the
continuation of the call to <tt>call-with-current-continuation</tt>.</p>
<p>
In the following example, an escape procedure representing the
continuation that adds 1 to its argument is bound to <tt>escape</tt>, and
then called with 3 as an argument.  The continuation of the call to
<tt>escape</tt> is abandoned, and instead the 3 is passed to the
continuation that adds 1:
</p>

<tt>(+&nbsp;1&nbsp;(call-with-current-continuation
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(escape)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;2&nbsp;(escape&nbsp;3)))))&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;4</p>
<p></tt>
An escape procedure has unlimited extent: It can be called after the
continuation it captured has been invoked, and it can be called
multiple times.  This makes <tt>call-with-current-continuation</tt>
significantly more powerful than typical non-local control constructs
such as exceptions in other languages.</p>
<p>
</p>
<a name="node_sec_1.12"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.12">1.12&nbsp;&nbsp;Libraries</a></h2>
<p></p>
<p>
Scheme code can be organized in components called
<i>libraries</i><a name="node_idx_60"></a>.  Each library contains 
definitions and expressions.  It can import definitions
from other libraries and export definitions to other libraries.</p>
<p>
The following library called <tt>(hello)</tt> exports a definition called
<tt>hello-world</tt>,  and imports the base library (see
chapter&nbsp;<a href="r6rs-Z-H-14.html#node_chap_11">11</a>) and the simple I/O library (see
library section&nbsp;on &ldquo;Simple I/O&rdquo;).  The <tt>hello-world</tt> export is a procedure that displays <tt>Hello World</tt>
on a separate line:
</p>

<tt>(library&nbsp;(hello)
<p class=nopadding>&nbsp;&nbsp;(export&nbsp;hello-world)</p>

<p class=nopadding>&nbsp;&nbsp;(import&nbsp;(rnrs&nbsp;base)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rnrs&nbsp;io&nbsp;simple))</p>

<p class=nopadding>&nbsp;&nbsp;(define&nbsp;(hello-world)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(display&nbsp;&quot;Hello&nbsp;World&quot;)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(newline)))</p>
<p></tt></p>
<p>
</p>
<a name="node_sec_1.13"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_1.13">1.13&nbsp;&nbsp;Top-level programs</a></h2>
<p>A Scheme program is invoked via a <i>top-level
program</i><a name="node_idx_62"></a>.  Like a library, a top-level
program contains imports, definitions and expressions, and specifies
an entry point for execution.  Thus a top-level program defines, via
the transitive closure of the libraries it imports, a Scheme program.</p>
<p>
The following top-level program obtains the first argument from the command line
via the <tt>command-line</tt> procedure from the <tt>(rnrs programs (6))</tt>
library (see library chapter&nbsp;on &ldquo;Command-line
access and exit values&rdquo;).  It then opens the file using <tt>open-file-input-port</tt> (see library section&nbsp;on &ldquo;)&rdquo;,
yielding a <i>port</i>, i.e. a connection to the file as a data
source, and calls the <tt>get-bytes-all</tt> procedure to obtain the
contents of the file as binary data.  It then uses <tt>put-bytes</tt> to
output the contents of the file to standard output:
</p>

<tt>#!r6rs
<p class=nopadding>(import&nbsp;(rnrs&nbsp;base)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rnrs&nbsp;io&nbsp;ports)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rnrs&nbsp;programs))</p>

<p class=nopadding>(put-bytes&nbsp;(standard-output-port)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(call-with-port</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(open-file-input-port</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cadr&nbsp;(command-line)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get-bytes-all))</p>
<p></tt></p>
<p>
  </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_2"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_2">Chapter 2</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_2">Requirement levels</a></h1>
<p></p>
<p>
The key words &ldquo;must&rdquo;, &ldquo;must not&rdquo;, &ldquo;should&rdquo;,
&ldquo;should not&rdquo;, &ldquo;recommended&rdquo;, &ldquo;may&rdquo;, and &ldquo;optional&rdquo; in this
report are to be interpreted as described in RFC&nbsp;2119&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_3">3</a>].
Specifically:</p>
<p>
</p>
<dl><dt></dt><dd>
</dd><dt><b>must</b></dt><dd><a name="node_idx_64"></a>This word means that a statement is an absolute
requirement of the specification.
</dd><dt><b>must not</b></dt><dd><a name="node_idx_66"></a>This phrase means that a statement is an absolute
prohibition of the specification.
</dd><dt><b>should</b></dt><dd><a name="node_idx_68"></a>This word, or the adjective &ldquo;recommended&rdquo;, means that
valid reasons may exist in particular circumstances to ignore a
statement, but that the implications must be understood and weighed
before choosing a different course.
</dd><dt><b>should not</b></dt><dd><a name="node_idx_70"></a>This phrase, or the phrase &ldquo;not recommended&rdquo;, means
that valid reasons may exist in particular circumstances when the
behavior of a statement is acceptable, but that the implications
should be understood and weighed before choosing the course described
by the statement.
</dd><dt><b>may</b></dt><dd><a name="node_idx_72"></a>This word, or the adjective &ldquo;optional&rdquo;, means that an item
is truly optional.
</dd></dl><p></p>
<p>
In particular, this report occasionally uses &ldquo;should&rdquo; to designate
circumstances that are outside the specification of this report, but
cannot be practically detected by an implementation; see
section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.4">5.4</a>.  In such circumstances, a
particular implementation may allow the programmer to ignore the
recommendation of the report and even exhibit reasonable behavior.
However, as the report does not specify the behavior,
these programs may be unportable, that is, their execution might
produce different results on different implementations.</p>
<p>
Moreover, this report occasionally uses the phrase &ldquo;not required&rdquo; to note the
absence of an absolute requirement.</p>
<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_3"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_3">Chapter 3</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_3">Numbers</a></h1>
<p>
<a name="node_idx_74"></a></p>
<p>
This chapter describes Scheme's model for numbers.  It is important to
distinguish between the mathematical numbers, the Scheme objects that
attempt to model them, the machine representations used to implement
the numbers, and notations used to write numbers.  In this report, the
term <i>number</i> refers to a mathematical number, and the term
<i>number object</i> refers to a Scheme object representing a
number.  This report uses the types <i>complex</i>, <i>real</i>,
<i>rational</i>, and <i>integer</i> to refer to both mathematical
numbers and number objects.  The <i>fixnum</i> and <i>flonum</i> types
refer to special subsets of the number objects, as determined by
common machine representations, as explained below.</p>
<p>
</p>
<a name="node_sec_3.1"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_3.1">3.1&nbsp;&nbsp;Numerical tower</a></h2>
<p>
<a name="node_idx_76"></a></p>
<p>
Numbers may be arranged into a tower of subsets in which each level
is a subset of the level above it:
</p>
<p>
         number <br>
&nbsp;&nbsp;&nbsp; complex <br>
&nbsp;&nbsp;&nbsp; real <br>
&nbsp;&nbsp;&nbsp; rational <br>
&nbsp;&nbsp;&nbsp; integer 
</p>
<p></p>
<p>
For example, 5 is an integer.  Therefore 5 is also a rational,
a real, and a complex.  The same is true of the number objects
that model 5.  </p>
<p>
Number objects are organized as a corresponding tower of subtypes
defined by the predicates <tt>number?</tt>, <tt>complex?</tt>, <tt>real?</tt>,
<tt>rational?</tt>, and <tt>integer?</tt>; see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.7.4.1">11.7.4.1</a>.
Integer number objects are also called <i>integer
objects</i><a name="node_idx_78"></a>.</p>
<p>
There is no simple relationship between the subset that contains a
number and its representation inside a computer.  For example, the
integer 5 may have several representations.  Scheme's numerical
operations treat number objects as abstract data, as independent of
their representation as possible.  Although an implementation of
Scheme may use many different representations for numbers, this should
not be apparent to a casual programmer writing simple programs.</p>
<p>
</p>
<a name="node_sec_3.2"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_3.2">3.2&nbsp;&nbsp;Exactness</a></h2>
<p></p>
<p>
<a name="node_idx_80"></a>It is useful to distinguish between number objects
that are known to correspond to a number exactly, and those number
objects whose computation involved rounding or other errors.  For
example, index operations into data structures may need to know the index
exactly, as may some operations on polynomial coefficients in a symbolic algebra
system.  On the other hand, the results of measurements are inherently
inexact, and irrational numbers may be approximated by rational and
therefore inexact approximations.  In order to catch uses of numbers
known only inexactly where exact numbers are required, Scheme
explicitly distinguishes <a name="node_idx_82"></a><em>exact</em> from <a name="node_idx_84"></a><em>inexact</em> number objects.  This
distinction is orthogonal to the dimension of type.</p>
<p>
A
number object is exact if it is the value of an exact numerical
literal or was derived from exact number objects using only exact
operations.  Exact number objects correspond to mathematical numbers
in the obvious way.</p>
<p>
Conversely, a number object is inexact if it is the value of an
inexact numerical literal, or was derived from inexact number objects,
or was derived using inexact operations.  Thus inexactness is
contagious.</p>
<p>
Exact arithmetic is reliable in the following sense: If exact number
objects are passed to any of the arithmetic procedures described in
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.7.1">11.7.1</a>, and an exact number object is
returned, then the result is mathematically correct.  This is
generally not true of computations involving inexact number objects
because approximate methods such as floating-point arithmetic may be
used, but it is the duty of each implementation to make the result as
close as practical to the mathematically ideal result.</p>
<p>
</p>
<a name="node_sec_3.3"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_3.3">3.3&nbsp;&nbsp;Fixnums and flonums</a></h2>
<p>A <a name="node_idx_86"></a><em>fixnum</em> is an exact integer object that lies
within a certain implementation-dependent subrange of the
exact integer objects. (Library section on &ldquo;Fixnums&rdquo; describes a
library for computing with fixnums.)
Likewise, every implementation must
designate a subset of its inexact real number objects as <a name="node_idx_88"></a><em>flonum</em>s, and
to convert certain external representations into flonums.  
(Library section on &ldquo;Flonums&rdquo; describes a library for
computing with flonums.)  Note that
this does not imply that an implementation must use
floating-point representations.</p>
<p>
</p>
<a name="node_sec_3.4"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_3.4">3.4&nbsp;&nbsp;Implementation requirements</a></h2>
<p><a name="node_idx_90"></a></p>
<p>
Implementations of Scheme must support number objects for
the entire tower of subtypes given in section&nbsp;<a href="r6rs-Z-H-6.html#node_sec_3.1">3.1</a>.
Moreover, implementations must support exact integer 
objects and exact rational number objects of practically unlimited
size and precision, and to implement certain procedures (listed in
<a href="r6rs-Z-H-14.html#node_sec_11.7.1">11.7.1</a>) so they always return exact results when
given exact arguments.  (&ldquo;Practically unlimited&rdquo; means that the size
and precision of these numbers should only be limited by the size of
the available memory.)</p>
<p>
Implementations may support only a limited range of inexact number
objects of any type, subject to the requirements of this section.  For
example, an implementation may limit the range of the inexact real
number objects (and therefore the range of inexact integer and
rational number objects) to the dynamic range of the flonum format.
Furthermore the gaps between the inexact integer objects and
rationals are likely to be very large in such an implementation as the
limits of this range are approached.</p>
<p>
An implementation may use floating point and other approximate 
representation strategies for inexact numbers.
This report recommends, but does not require, that the IEEE 
floating-point standards be followed by implementations that use
floating-point representations, and that implementations using
other representations should match or exceed the precision achievable
using these floating-point standards&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_13">13</a>].</p>
<p>
In particular, implementations that use floating-point representations
must follow these rules: A floating-point result must be represented
with at least as much precision as is used to express any of the
inexact arguments to that operation.
Potentially inexact operations such as <tt>sqrt</tt>, when
applied to exact arguments, should produce exact answers whenever possible
(for example the square root of an exact 4 ought to be an exact 2).
However, this is not required.
If, on the other hand, an exact number object is operated upon so as to produce an
inexact result (as by <tt>sqrt</tt>), and if the result is represented in
floating point, then the most precise floating-point format available
must be used; but if the result is represented in some other way then
the representation must have at least as much precision as the most
precise floating-point format available.</p>
<p>
It is the programmer's responsibility to avoid using inexact number
objects with magnitude or significand too large to be represented in
the implementation.</p>
<p>
</p>
<a name="node_sec_3.5"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_3.5">3.5&nbsp;&nbsp;Infinities and NaNs</a></h2>
<p>Some Scheme implementations, specifically those that follow the IEEE
floating-point standards, distinguish special number objects called
<a name="node_idx_92"></a><a name="node_idx_94"></a><em>positive infinity</em>, <a name="node_idx_96"></a><em>negative
infinity</em>, and <a name="node_idx_98"></a><em>NaN</em>.</p>
<p>
Positive infinity is regarded as an inexact real (but not rational) number
object that represents an indeterminate number greater than the
numbers represented by all rational number objects.  Negative infinity
is regarded as an inexact real (but not rational) number object that represents
an indeterminate number less than the numbers represented by all
rational numbers.</p>
<p>
A NaN is regarded as an inexact real (but not rational) number object so
indeterminate that it might represent any real number, including
positive or negative infinity, and might even be greater than positive
infinity or less than negative infinity.</p>
<p>
</p>
<a name="node_sec_3.6"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_3.6">3.6&nbsp;&nbsp;Distinguished -0.0</a></h2>
<p><a name="node_idx_100"></a>Some Scheme implementations, specifically those that follow the IEEE
floating-point standards, distinguish between number objects for 0.0
and &minus;0.0, i.e., positive and negative inexact zero.  This report
will sometimes specify the behavior of certain arithmetic operations
on these number objects.  These specifications are marked with &ldquo;if
&minus;0.0 is distinguished&rdquo; or &ldquo;implementations that distinguish
&minus;0.0&rdquo;.</p>
<p>
 </p>
<p>
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<p></p>
<a name="node_chap_4"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_4">Chapter 4</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_4">Lexical syntax and datum syntax</a></h1>
<p></p>
<p>
The syntax of Scheme code is organized in three levels:
</p>
<ol>
<li><p>the <i>lexical syntax</i> that describes how a program text is split
into a sequence of lexemes,
</p>
<li><p>the <i>datum syntax</i>, formulated in terms of the lexical
syntax, that structures the lexeme sequence as a sequence of
<i>syntactic data<a name="node_idx_102"></a><a name="node_idx_104"></a></i>, where a syntactic datum is
a recursively structured entity,
</p>
<li><p>the <i>program syntax</i> formulated in terms of the read
syntax, imposing further structure and assigning meaning to
syntactic data.
</p>
</ol><p>
Syntactic data (also called <i>external
representations<a name="node_idx_106"></a></i>) double
as a notation for objects, and Scheme's <tt>(rnrs io ports (6))</tt> library
(library section&nbsp;on &ldquo;Port I/O&rdquo;)
provides the <tt>get-datum</tt> and <tt>put-datum</tt> procedures
for reading and writing syntactic data, converting between their
textual representation and the corresponding objects. 
Each syntactic datum represents a corresponding <a name="node_idx_108"></a><em>datum value</em>.
A syntactic datum can be used in a program to obtain the corresponding
datum value using <tt>quote</tt> (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.1">11.4.1</a>).</p>
<p>
Scheme source code consists of syntactic data and (non-significant) comments.
Syntactic data in Scheme source code are called
<i>forms</i><a name="node_idx_110"></a>.
(A form nested inside another form is
called a <a name="node_idx_112"></a><em>subform</em>.)
Consequently, Scheme's syntax has the property that any sequence of
characters that is a form is also a syntactic datum representing
some object.  This can lead to confusion, since it may not be obvious
out of context whether a given sequence of characters is intended to
be a representation of objects or the text of a program.
It is also a source of power, since it
facilitates writing programs such as interpreters or compilers that
treat programs as objects (or vice versa).</p>
<p>
A datum value may have several different external representations.
For example, both &ldquo;<tt>#e28.000</tt>&rdquo; and
&ldquo;<tt>#x1c</tt>&rdquo; are syntactic data representing the exact integer
object 28, and the syntactic data &ldquo;<tt>(8 13)</tt>&rdquo;, &ldquo;<tt>( 08 13 )</tt>&rdquo;, &ldquo;<tt>(8 .
  (13 . ()))</tt>&rdquo;
all represent a list containing the exact integer objects 8 and 13. 
Syntactic data that represent equal objects (in the sense of <tt>equal?</tt>; see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.5">11.5</a>) are always equivalent 
as forms of a program.</p>
<p>
Because of the close correspondence between syntactic data and datum
values, this report sometimes uses the term <a name="node_idx_114"></a><em>datum</em> for
either a syntactic datum or a datum value when the exact meaning
is apparent from the context.</p>
<p>
An implementation must not extend the lexical or datum syntax in
any way, with one exception: it need not treat the syntax
<tt><tt>#</tt>!&lt;identifier&gt;</tt>, for any &lt;identifier&gt; (see
section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.2.4">4.2.4</a>) that is not <tt>r6rs</tt>, as a syntax
violation, and it may use specific <tt><tt>#</tt>!</tt>-prefixed
identifiers as flags indicating that subsequent input contains extensions
to the standard lexical or datum syntax. 
The syntax <tt><tt>#</tt>!r6rs</tt> may be used to signify that
the input afterward is written with the lexical syntax and
datum syntax described by
this report.
<tt><tt>#</tt>!r6rs</tt> is otherwise treated as a comment; see section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.2.3">4.2.3</a>.</p>
<p>
</p>
<a name="node_sec_4.1"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.1">4.1&nbsp;&nbsp;Notation</a></h2>
<p></p>
<p>
The formal syntax for Scheme is written in an extended BNF.
Non-terminals are written using angle brackets.  Case is insignificant
for non-terminal names.</p>
<p>
All spaces in the grammar are for legibility.
&lt;Empty&gt; stands for the empty string.</p>
<p>
The following extensions to BNF are used to make the description more
concise:  &lt;thing&gt;* means zero or more occurrences of
&lt;thing&gt;, and &lt;thing&gt;<sup>+</sup> means at least one
&lt;thing&gt;.</p>
<p>
Some non-terminal names refer to the Unicode scalar values of the same
name: &lt;character tabulation&gt; (U+0009), &lt;linefeed&gt; (U+000A),
&lt;carriage return&gt; (U+000D), &lt;line tabulation&gt; (U+000B),
&lt;form feed&gt; (U+000C), &lt;carriage return&gt; (U+000D),
&lt;space&gt; (U+0020), &lt;next line&gt; (U+0085), &lt;line
separator&gt; (U+2028), and &lt;paragraph separator&gt; (U+2029).</p>
<p>
</p>
<a name="node_sec_4.2"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.2">4.2&nbsp;&nbsp;Lexical syntax</a></h2>
<p></p>
<p>
The lexical syntax determines how a character sequence is split into a
sequence of lexemes<a name="node_idx_116"></a>, omitting non-significant portions
such as comments and whitespace.  The character sequence is assumed to
be text according to the Unicode standard&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_27">27</a>].  Some of
the lexemes, such as identifiers, representations of number objects, strings etc., of the lexical
syntax are syntactic data in the datum syntax, and thus represent objects.
Besides the formal account of the syntax, this section also describes
what datum values are represented by these syntactic data.</p>
<p>
The lexical syntax, in the description of comments, contains
a forward reference to &lt;datum&gt;, which is described as part of the
datum syntax.  Being comments, however, these &lt;datum&gt;s do not play
a significant role in the syntax.</p>
<p>
Case is significant except in representations of booleans, number objects, and
in hexadecimal numbers specifying Unicode scalar values.  For example, <tt>#x1A</tt>
and <tt>#X1a</tt> are equivalent.  The identifier <tt>Foo</tt> is, however,
distinct from the identifier <tt>FOO</tt>.</p>
<p>
</p>
<a name="node_sec_4.2.1"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.2.1">4.2.1&nbsp;&nbsp;Formal account</a></h3>
<p></p>
<p>
&lt;Interlexeme space&gt; may occur on either side of any lexeme, but not
within a lexeme.</p>
<p>
&lt;Identifier&gt;s, <tt>.</tt>, &lt;number&gt;s, &lt;character&gt;s, and
&lt;boolean&gt;s, must be terminated by a &lt;delimiter&gt; or by the
end of the input.</p>
<p>
The following two characters are reserved for future extensions to the
language: <tt><code class=verbatim>{</code> <code class=verbatim>}</code></tt></p>
<p>
</p>
<tt>&lt;lexeme&gt; &rarr; &lt;identifier&gt; &#x2223; &lt;boolean&gt; &#x2223; &lt;number&gt;<a name="node_idx_118"></a>
<p class=nopadding><span style="margin-left: 2em">&zwnj;</span>  &#x2223; &lt;character&gt; &#x2223; &lt;string&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;  &#x2223; ( &#x2223; ) &#x2223; <tt>[</tt> &#x2223; <tt>]</tt> &#x2223; <tt>#</tt>( &#x2223; <tt>#</tt>vu8( | <tt>'</tt> &#x2223; <tt>`</tt> &#x2223; , &#x2223; ,@ &#x2223; <strong>.</strong></p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;  &#x2223; <tt>#</tt><tt>'</tt> &#x2223; <tt>#</tt><tt>`</tt> &#x2223; <tt>#</tt>, &#x2223; <tt>#</tt>,@</p>

<p class=nopadding>&lt;delimiter&gt; &rarr; ( &#x2223; ) &#x2223; <tt>[</tt> &#x2223; <tt>]</tt> &#x2223; &quot; &#x2223; ; &#x2223; <tt>#</tt></p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;  &#x2223; &lt;whitespace&gt;</p>

<p class=nopadding>&lt;whitespace&gt; &rarr; &lt;character tabulation&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; &lt;linefeed&gt; &#x2223; &lt;line tabulation&gt; &#x2223; &lt;form feed&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; &lt;carriage return&gt; &#x2223; &lt;next line&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; &lt;any character whose category is Zs, Zl, or Zp&gt;</p>

<p class=nopadding>&lt;line ending&gt; &rarr; &lt;linefeed&gt; &#x2223; &lt;carriage return&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; &lt;carriage return&gt; &lt;linefeed&gt; &#x2223; &lt;next line&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; &lt;carriage return&gt; &lt;next line&gt; &#x2223; &lt;line separator&gt;</p>

<p class=nopadding>&lt;comment&gt; &rarr; ;  &lang;all subsequent characters up to a</p>

<p class=nopadding>                    &nbsp;&nbsp;&nbsp; &lt;line ending&gt; or &lt;paragraph separator&gt;&rang;<a name="node_idx_120"></a></p>

<p class=nopadding><span style="margin-left: 2em">&zwnj;</span> &#x2223; &lt;nested comment&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; #; &lt;interlexeme space&gt; &lt;datum&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; #!r6rs</p>

<p class=nopadding>&lt;nested comment&gt; &rarr; #|  &lt;comment text&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &lt;comment cont&gt;* |#</p>

<p class=nopadding>&lt;comment text&gt; &rarr;  &lang;character sequence not containing</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; <tt>#|</tt> or <tt>|#</tt>&rang;</p>

<p class=nopadding>&lt;comment cont&gt; &rarr; &lt;nested comment&gt; &lt;comment text&gt;</p>

<p class=nopadding>&lt;atmosphere&gt; &rarr; &lt;whitespace&gt; &#x2223; &lt;comment&gt;</p>

<p class=nopadding>&lt;interlexeme space&gt; &rarr; &lt;atmosphere&gt;*</p>
</tt><p>

</p>
<p>

</p>
<tt>&lt;identifier&gt; &rarr; &lt;initial&gt; &lt;subsequent&gt;*
<p class=nopadding> <span style="margin-left: 2em">&zwnj;</span>  &#x2223; &lt;peculiar identifier&gt;</p>

<p class=nopadding>&lt;initial&gt; &rarr; &lt;constituent&gt; &#x2223; &lt;special initial&gt;</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp; &#x2223; &lt;inline hex escape&gt;</p>

<p class=nopadding>&lt;letter&gt; &rarr;  a &#x2223; b &#x2223; c &#x2223; ... &#x2223; z</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; A &#x2223; B &#x2223; C &#x2223; ... &#x2223; Z</p>

<p class=nopadding>&lt;constituent&gt; &rarr; &lt;letter&gt;</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp; &#x2223; &lang;any character whose Unicode scalar value is greater than</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp; <span style="margin-left: 1em">&zwnj;</span>127, and whose category is Lu, Ll, Lt, Lm, Lo, Mn,</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp; <span style="margin-left: 1em">&zwnj;</span>Nl, No, Pd, Pc, Po, Sc, Sm, Sk, So, or Co&rang;</p>

<p class=nopadding>&lt;special initial&gt; &rarr; ! &#x2223; $ &#x2223; % &#x2223; <code class=verbatim>&amp;</code> &#x2223; * &#x2223; / &#x2223; : &#x2223; &lt; &#x2223; =</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp;  &#x2223; &gt; &#x2223; ? &#x2223; <code class=verbatim>^</code> &#x2223; <code class=verbatim>_</code> &#x2223; <code class=verbatim>~</code></p>

<p class=nopadding>&lt;subsequent&gt; &rarr; &lt;initial&gt; &#x2223; &lt;digit&gt;</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp;  &#x2223; &lt;any character whose category is Nd, Mc, or Me&gt;</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp;  &#x2223; &lt;special subsequent&gt;</p>

<p class=nopadding>&lt;digit&gt; &rarr; 0 &#x2223; 1 &#x2223; 2 &#x2223; 3 &#x2223; 4 &#x2223; 5 &#x2223; 6 &#x2223; 7 &#x2223; 8 &#x2223; 9</p>

<p class=nopadding>&lt;hex digit&gt; &rarr; &lt;digit&gt;</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp; &#x2223; a &#x2223; A &#x2223; b &#x2223; B &#x2223; c &#x2223; C &#x2223; d &#x2223; D &#x2223; e &#x2223; E &#x2223; f &#x2223; F</p>

<p class=nopadding>&lt;special subsequent&gt; &rarr; + &#x2223; - &#x2223; . &#x2223; @</p>

<p class=nopadding>&lt;inline hex escape&gt; &rarr; <tt>\</tt>x&lt;hex scalar value&gt;;</p>

<p class=nopadding>&lt;hex scalar value&gt; &rarr; &lt;hex digit&gt;<sup>+</sup></p>

<p class=nopadding>&lt;peculiar identifier&gt; &rarr; + &#x2223; - &#x2223; ... &#x2223; -&gt; &lt;subsequent&gt;*</p>

<p class=nopadding>&lt;boolean&gt; &rarr; <tt>#t</tt> &#x2223; #T &#x2223; <tt>#f</tt> &#x2223; #F</p>

<p class=nopadding>&lt;character&gt; &rarr; #<tt>\</tt>&lt;any character&gt;</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp;  &#x2223; #<tt>\</tt>&lt;character name&gt;</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp;  &#x2223; #<tt>\</tt>x&lt;hex scalar value&gt;</p>

<p class=nopadding>&lt;character name&gt; &rarr; nul &#x2223; alarm &#x2223; backspace &#x2223; tab</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; linefeed &#x2223; newline &#x2223; vtab &#x2223; page &#x2223; return</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; esc &#x2223; space &#x2223; delete</p>

<p class=nopadding>&lt;string&gt; &rarr; &quot; &lt;string element&gt;* &quot;</p>

<p class=nopadding>&lt;string element&gt; &rarr; &lt;any character other than <tt>&quot;</tt> or <tt>\</tt>&gt;</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp; &#x2223; <tt>\</tt>a &#x2223; <tt>\</tt>b &#x2223; <tt>\</tt>t &#x2223; <tt>\</tt>n &#x2223; <tt>\</tt>v &#x2223; <tt>\</tt>f &#x2223; <tt>\</tt>r</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp;  &#x2223; <tt>\</tt><tt>&quot;</tt> &#x2223; <tt>\</tt><tt>\</tt></p>

<p class=nopadding> &nbsp;&nbsp;&nbsp;  &#x2223; <tt>\</tt>&lt;intraline whitespace&gt;&lt;line ending&gt;</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&lt;intraline whitespace&gt;</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp;  &#x2223; &lt;inline hex escape&gt;</p>

<p class=nopadding>&lt;intraline whitespace&gt; &rarr; &lt;character tabulation&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp; &#x2223; &lt;any character whose category is Zs&gt;</p>
</tt><p>
A &lt;hex scalar value&gt; represents a Unicode scalar value
between 0 and <tt>#</tt>x10FFFF, excluding the range
[<tt>#</tt><em>x</em>D800, <tt>#</tt><em>x</em>DFFF].</p>
<p>
The rules for &lt;num <em>R</em>&gt;, &lt;complex <em>R</em>&gt;, &lt;real
<em>R</em>&gt;, &lt;ureal <em>R</em>&gt;, &lt;uinteger <em>R</em>&gt;, and &lt;prefix <em>R</em>&gt; below
should be replicated for <em>R</em>  =  2, 8, 10,
and 16.  There are no rules for &lt;decimal 2&gt;, &lt;decimal
8&gt;, and &lt;decimal 16&gt;, which means that number representations containing
decimal points or exponents must be in decimal radix.</p>
<p>
</p>
<tt>&lt;number&gt; &rarr; &lt;num 2&gt; &#x2223; &lt;num 8&gt;
<p class=nopadding>   <span style="margin-left: 2em">&zwnj;</span>  &#x2223; &lt;num 10&gt; &#x2223; &lt;num 16&gt;</p>

<p class=nopadding>&lt;num <em>R</em>&gt; &rarr; &lt;prefix <em>R</em>&gt; &lt;complex <em>R</em>&gt;</p>

<p class=nopadding>&lt;complex <em>R</em>&gt; &rarr; &lt;real <em>R</em>&gt; &#x2223; &lt;real <em>R</em>&gt; @ &lt;real <em>R</em>&gt;</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; &lt;real <em>R</em>&gt; + &lt;ureal <em>R</em>&gt; i &#x2223; &lt;real <em>R</em>&gt; - &lt;ureal <em>R</em>&gt; i</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; &lt;real <em>R</em>&gt; + &lt;naninf&gt; i &#x2223; &lt;real <em>R</em>&gt; - &lt;naninf&gt; i</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; &lt;real <em>R</em>&gt; + i &#x2223; &lt;real <em>R</em>&gt; - i</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; + &lt;ureal <em>R</em>&gt; i &#x2223; - &lt;ureal <em>R</em>&gt; i </p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; + &lt;naninf&gt; i &#x2223; - &lt;naninf&gt; i</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; + i &#x2223; - i</p>

<p class=nopadding>&lt;real <em>R</em>&gt; &rarr; &lt;sign&gt; &lt;ureal <em>R</em>&gt;</p>

<p class=nopadding>  &nbsp;&nbsp;&nbsp; &#x2223; + &lt;naninf&gt; &#x2223; - &lt;naninf&gt;</p>

<p class=nopadding>&lt;naninf&gt; &rarr; nan.0 &#x2223; inf.0</p>

<p class=nopadding>&lt;ureal <em>R</em>&gt; &rarr; &lt;uinteger <em>R</em>&gt;</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; &lt;uinteger <em>R</em>&gt; / &lt;uinteger <em>R</em>&gt;</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; &lt;decimal <em>R</em>&gt; &lt;mantissa width&gt;</p>

<p class=nopadding>&lt;decimal 10&gt; &rarr; &lt;uinteger 10&gt; &lt;suffix&gt;</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; . &lt;digit 10&gt;<sup>+</sup> &lt;suffix&gt;</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; &lt;digit 10&gt;<sup>+</sup> . &lt;digit 10&gt;* &lt;suffix&gt;</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; &lt;digit 10&gt;<sup>+</sup> . &lt;suffix&gt;</p>

<p class=nopadding>&lt;uinteger <em>R</em>&gt; &rarr; &lt;digit <em>R</em>&gt;<sup>+</sup></p>

<p class=nopadding>&lt;prefix <em>R</em>&gt; &rarr; &lt;radix <em>R</em>&gt; &lt;exactness&gt;</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; &lt;exactness&gt; &lt;radix <em>R</em>&gt;</p>

<p class=nopadding></p>
</tt><p>
</p>
<tt>&lt;suffix&gt; &rarr; &lt;empty&gt; 
<p class=nopadding>   <span style="margin-left: 2em">&zwnj;</span> &#x2223; &lt;exponent marker&gt; &lt;sign&gt; &lt;digit 10&gt;<sup>+</sup></p>

<p class=nopadding>&lt;exponent marker&gt; &rarr; e &#x2223; E &#x2223; s &#x2223; S &#x2223; f &#x2223; F</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; d &#x2223; D &#x2223; l &#x2223; L</p>

<p class=nopadding>&lt;mantissa width&gt; &rarr; &lt;empty&gt;</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; | &lt;digit 10&gt;<sup>+</sup></p>

<p class=nopadding>&lt;sign&gt; &rarr; &lt;empty&gt;  &#x2223; + &#x2223;  -</p>

<p class=nopadding>&lt;exactness&gt; &rarr; &lt;empty&gt;</p>

<p class=nopadding>   &nbsp;&nbsp;&nbsp; &#x2223; #i<a name="node_idx_122"></a>&#x2223; #I &#x2223; #e<a name="node_idx_124"></a>&#x2223; #E</p>

<p class=nopadding>&lt;radix 2&gt; &rarr; #b<a name="node_idx_126"></a>&#x2223; #B</p>

<p class=nopadding>&lt;radix 8&gt; &rarr; #o<a name="node_idx_128"></a>&#x2223; #O</p>

<p class=nopadding>&lt;radix 10&gt; &rarr; &lt;empty&gt; &#x2223; #d &#x2223; #D</p>

<p class=nopadding>&lt;radix 16&gt; &rarr; #x<a name="node_idx_130"></a>&#x2223; #X</p>

<p class=nopadding>&lt;digit 2&gt; &rarr; 0 &#x2223; 1</p>

<p class=nopadding>&lt;digit 8&gt; &rarr; 0 &#x2223; 1 &#x2223; 2 &#x2223; 3 &#x2223; 4 &#x2223; 5 &#x2223; 6 &#x2223; 7</p>

<p class=nopadding>&lt;digit 10&gt; &rarr; &lt;digit&gt;</p>

<p class=nopadding>&lt;digit 16&gt; &rarr; &lt;hex digit&gt;</p>

<p class=nopadding></p>
</tt><p>
</p>
<a name="node_sec_4.2.2"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.2.2">4.2.2&nbsp;&nbsp;Line endings</a></h3>
<p></p>
<p>
Line endings are significant in Scheme in single-line comments (see
section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.2.3">4.2.3</a>) and within string literals.  In
Scheme source code, any of the line endings in &lt;line ending&gt;
marks the end of a line.  Moreover, the two-character line endings
&lt;carriage return&gt; &lt;linefeed&gt; and &lt;carriage return&gt;
&lt;next line&gt; each count as a single line ending.</p>
<p>
In a string literal, a &lt;line ending&gt; not preceded by a <tt><tt>\</tt></tt>
stands for a linefeed character, which is the standard line-ending
character of Scheme.</p>
<p>
</p>
<a name="node_sec_4.2.3"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.2.3">4.2.3&nbsp;&nbsp;Whitespace and comments</a></h3>
<p></p>
<p>
<a name="node_idx_132"></a><em>Whitespace</em> characters are spaces, linefeeds,
carriage returns, character tabulations, form feeds, line tabulations,
and any other character whose category is Zs, Zl, or Zp.
Whitespace is used for improved readability and
as necessary to separate lexemes from each other.  Whitespace may
occur between any two lexemes,
but not within a lexeme.  Whitespace may also occur inside a string,
where it is significant.</p>
<p>
The lexical syntax includes several comment forms. In all cases,
comments are invisible to Scheme, except that they act as delimiters,
so, for example, a comment cannot appear in the middle of an
identifier or representation of a number object.</p>
<p>
A semicolon (<tt>;</tt>) indicates the start of a line
comment.<a name="node_idx_134"></a><a name="node_idx_136"></a>The comment continues to
the end of the line on which the semicolon appears.</p>
<p>
Another way to indicate a comment is to prefix a &lt;datum&gt;
(cf. section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.3.1">4.3.1</a>) with <tt>#;</tt><a name="node_idx_138"></a>, possibly with
&lt;interlexeme space&gt; before the &lt;datum&gt;.  The comment consists of
the comment prefix <tt>#;</tt> and the &lt;datum&gt; together.  This
notation is useful for &ldquo;commenting out&rdquo; sections of code.</p>
<p>
Block comments may be indicated with properly nested <tt>#|</tt><a name="node_idx_140"></a><a name="node_idx_142"></a>and <tt>|#</tt> pairs.</p>
<p>
</p>

<tt>#|
<p class=nopadding>&nbsp;&nbsp;&nbsp;The&nbsp;FACT&nbsp;procedure&nbsp;computes&nbsp;the&nbsp;factorial</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;of&nbsp;a&nbsp;non-negative&nbsp;integer.</p>

<p class=nopadding>|#</p>

<p class=nopadding>(define&nbsp;fact</p>

<p class=nopadding>&nbsp;&nbsp;(lambda&nbsp;(n)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;;;&nbsp;base&nbsp;case</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(=&nbsp;n&nbsp;0)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#;(=&nbsp;n&nbsp;1)</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;identity&nbsp;of&nbsp;*</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*&nbsp;n&nbsp;(fact&nbsp;(-&nbsp;n&nbsp;1))))))</p>
<p></tt></p>
<p>
The lexeme <tt><tt>#</tt>!r6rs</tt>, which signifies that the program text
that follows is written with the lexical and datum syntax described in this
report, is also otherwise treated as a comment.</p>
<p>
</p>
<a name="node_sec_4.2.4"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.2.4">4.2.4&nbsp;&nbsp;Identifiers</a></h3>
<p></p>
<p>
Most identifiers<a name="node_idx_144"></a>allowed by other programming
languages are also acceptable to Scheme.  In general,
a sequence of letters, digits, and &ldquo;extended alphabetic
characters&rdquo; is
an identifier when it begins with a character that cannot begin a
representation of a number object.
In addition, <tt>+</tt>, <tt>-</tt>, and <tt>...</tt> are identifiers, as is
a sequence of letters, digits, and extended alphabetic
characters that begins with the two-character sequence <tt>-&gt;</tt>.
Here are some examples of identifiers:</p>
<p>
</p>

<tt>lambda&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;soup
<p class=nopadding>list-&gt;vector&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V17a</p>

<p class=nopadding>&lt;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a34kTMNs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;-</p>

<p class=nopadding>the-word-recursion-has-many-meanings</p>
<p></tt></p>
<p>
Extended alphabetic characters may be used within identifiers as if
they were letters.  The following are extended alphabetic characters:</p>
<p>
</p>

<tt>! $&nbsp;%&nbsp;<code class=verbatim>&amp;</code>&nbsp;*&nbsp;+&nbsp;-&nbsp;.&nbsp;/&nbsp;: &lt;&nbsp;=&nbsp;&gt;&nbsp;?&nbsp;@&nbsp;<code class=verbatim>^</code>&nbsp;<code class=verbatim>_</code>&nbsp;<code class=verbatim>~</code>&nbsp;<p></tt></p>
<p>
Moreover, all characters whose Unicode scalar values are greater than 127 and
whose Unicode category is Lu, Ll, Lt, Lm, Lo, Mn, Mc, Me, Nd, Nl, No, Pd,
Pc, Po, Sc, Sm, Sk, So, or Co can be used within identifiers.
In addition, any character can be used within an identifier
when specified via an &lt;inline hex escape&gt;.  For example, the
identifier <code class=verbatim>H\x65;llo</code> is the same as the identifier
<code class=verbatim>Hello</code>, and the identifier <code class=verbatim>\x3BB;</code> is the same as the
identifier &lambda;.</p>
<p>
Any identifier may be used as a variable<a name="node_idx_146"></a>or as a
syntactic keyword<a name="node_idx_148"></a>(see
sections&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.2">5.2</a> and&nbsp;<a href="r6rs-Z-H-12.html#node_sec_9.2">9.2</a>) in a Scheme
program.
Any identifier may also be used as a syntactic datum, in which case it
represents a <i>symbol</i><a name="node_idx_150"></a>(see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.10">11.10</a>).</p>
<p>
</p>
<a name="node_sec_4.2.5"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.2.5">4.2.5&nbsp;&nbsp;Booleans</a></h3>
<p>The standard boolean objects for true and false have external representations
<tt>#t</tt> and <tt>#f</tt>.<a name="node_idx_152"></a><a name="node_idx_154"></a></p>
<p>
</p>
<a name="node_sec_4.2.6"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.2.6">4.2.6&nbsp;&nbsp;Characters</a></h3>
<p>Characters are represented using the notation
<tt>#</tt><tt>\</tt>&lt;character&gt;<a name="node_idx_156"></a>or
<tt>#</tt><tt>\</tt>&lt;character name&gt; or
<tt>#</tt><tt>\</tt>x&lt;hex scalar value&gt;.</p>
<p>
For example:</p>
<p>

</p>
<table border=0><tr><td valign=top ><tt>#<tt>\</tt>a</tt>          </td><td valign=top >lower case letter a</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>A</tt>          </td><td valign=top >upper case letter A</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>(</tt>          </td><td valign=top >left parenthesis</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt></tt>           </td><td valign=top >space character</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>nul</tt>        </td><td valign=top >U+0000</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>alarm</tt>      </td><td valign=top >U+0007</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>backspace</tt>  </td><td valign=top >U+0008</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>tab</tt>        </td><td valign=top >U+0009</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>linefeed</tt>   </td><td valign=top >U+000A</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>newline</tt>   </td><td valign=top >U+000A</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>vtab</tt>       </td><td valign=top >U+000B</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>page</tt>       </td><td valign=top >U+000C</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>return</tt>     </td><td valign=top >U+000D</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>esc</tt>        </td><td valign=top >U+001B</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>space</tt>      </td><td valign=top >U+0020</td></tr>
<tr><td valign=top ></td><td valign=top >preferred way to write a space</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>delete</tt>     </td><td valign=top >U+007F</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>xFF</tt>        </td><td valign=top >U+00FF</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>x03BB</tt>      </td><td valign=top >U+03BB</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>x00006587</tt>  </td><td valign=top >U+6587</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>&lambda;</tt> </td><td valign=top >U+03BB</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>x0001z</tt>     </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>&lambda;x</tt>         </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>alarmx</tt>     </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>alarm x</tt>    </td><td valign=top >U+0007</td></tr>
<tr><td valign=top ></td><td valign=top >followed by <tt>x</tt></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>Alarm</tt>      </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>alert</tt>      </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>xA</tt>         </td><td valign=top >U+000A</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>xFF</tt>        </td><td valign=top >U+00FF</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>xff</tt>        </td><td valign=top >U+00FF</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>x ff</tt>       </td><td valign=top >U+0078</td></tr>
<tr><td valign=top ></td><td valign=top >followed by another datum, <tt>ff</tt></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>x(ff)</tt>      </td><td valign=top >U+0078</td></tr>
<tr><td valign=top ></td><td valign=top >followed by another datum,</td></tr>
<tr><td valign=top ></td><td valign=top >a parenthesized <tt>ff</tt></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>(x)</tt>        </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>(x</tt>         </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>((x)</tt>       </td><td valign=top >U+0028</td></tr>
<tr><td valign=top ></td><td valign=top >followed by another datum,</td></tr>
<tr><td valign=top ></td><td valign=top >parenthesized <tt>x</tt></td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>x00110000</tt>  </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ></td><td valign=top >out of range</td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>x000000001</tt> </td><td valign=top >U+0001  </td></tr>
<tr><td valign=top ><tt>#<tt>\</tt>xD800</tt>      </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ></td><td valign=top >in excluded range
</td></tr></table>
<p>
(The notation <tt>&amp;lexical</tt> <i>exception</i> means that the line in question is
a lexical syntax violation.)</p>
<p>
Case is significant in <tt>#</tt><tt>\</tt>&lt;character&gt;, and in
<tt>#</tt><tt>\</tt>&lang;character name&rang;, but not in <tt><tt>#</tt><tt>\</tt>x</tt>&lt;hex scalar value&gt;.  
A &lt;character&gt; must be followed by a &lt;delimiter&gt; or by the end of the input.
This rule resolves various ambiguous cases involving named characters,
requiring, for
example, the sequence of characters &ldquo;<tt><tt>#</tt><tt>\</tt>space</tt>&rdquo;
to be interpreted as the space character rather than as
the character &ldquo;<tt><tt>#</tt><tt>\</tt>s</tt>&rdquo; followed
by the identifier &ldquo;<tt>pace</tt>&rdquo;.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The <tt><tt>#</tt><tt>\</tt>newline</tt> notation is retained for
backward compatibility.  Its use is deprecated;
<tt><tt>#</tt><tt>\</tt>linefeed</tt> should be used instead.
</blockquote><p>
</p>
<a name="node_sec_4.2.7"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.2.7">4.2.7&nbsp;&nbsp;Strings</a></h3>
<p>String are represented by sequences of characters enclosed within doublequotes
(<tt>&quot;</tt>).  Within a string literal, various escape
sequences<a name="node_idx_158"></a>represent characters other than
themselves.  Escape sequences always start with a backslash (<tt>\</tt>):</p>
<p>
</p>
<ul>
<li><p><tt><tt>\</tt>a</tt> : alarm, U+0007
</p>
<li><p><tt><tt>\</tt>b</tt> : backspace, U+0008 
</p>
<li><p><tt><tt>\</tt>t</tt> : character tabulation, U+0009 
</p>
<li><p><tt><tt>\</tt>n</tt> : linefeed, U+000A 
</p>
<li><p><tt><tt>\</tt>v</tt> : line tabulation, U+000B 
</p>
<li><p><tt><tt>\</tt>f</tt> : formfeed, U+000C 
</p>
<li><p><tt><tt>\</tt>r</tt> : return, U+000D 
</p>
<li><p><tt><tt>\</tt></tt><code class=verbatim>&quot;</code> : doublequote, U+0022 
</p>
<li><p><tt><tt>\</tt><tt>\</tt></tt> : backslash, U+005C 
</p>
<li><p><tt><tt>\</tt></tt>&lt;intraline whitespace&gt;&lt;line ending&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;intraline whitespace&gt; : nothing
</p>
<li><p><tt><tt>\</tt>x&lt;hex scalar value&gt;;</tt> : specified character (note the
terminating semi-colon).
</p>
</ul><p></p>
<p>
These escape sequences are case-sensitive, except that the alphabetic
digits of a &lt;hex scalar value&gt; can be uppercase or lowercase.</p>
<p>
Any other character in a string after a backslash is a syntax violation. Except
for a line ending, any
character outside of an escape sequence and not a doublequote stands
for itself in the string literal. For example the single-character
string literal <tt>&quot;&lambda;&quot;</tt> (doublequote, a lower case lambda, doublequote)
represents the same string as <tt>&quot;<tt>\</tt>x03bb;&quot;</tt>.
A line ending that does not follow a backslash stands for a linefeed character.</p>
<p>
Examples:</p>
<p>
</p>
<table border=0><tr><td valign=top ><tt>&quot;abc&quot;</tt> </td><td valign=top >U+0061, U+0062, U+0063</td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>x41;bc&quot;</tt> </td><td valign=top ><tt>&quot;Abc&quot;</tt> ; U+0041, U+0062, U+0063</td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>x41; bc&quot;</tt> </td><td valign=top ><tt>&quot;A bc&quot;</tt></td></tr>
<tr><td valign=top ></td><td valign=top >U+0041, U+0020, U+0062, U+0063</td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>x41bc;&quot;</tt> </td><td valign=top >U+41BC</td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>x41&quot;</tt> </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>x;&quot;</tt> </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>x41bx;&quot;</tt> </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>x00000041;&quot;</tt> </td><td valign=top ><tt>&quot;A&quot;</tt> ; U+0041</td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>x0010FFFF;&quot;</tt> </td><td valign=top >U+10FFFF</td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>x00110000;&quot;</tt> </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ></td><td valign=top >out of range</td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>x000000001;&quot;</tt> </td><td valign=top >U+0001</td></tr>
<tr><td valign=top ><tt>&quot;<tt>\</tt>xD800;&quot;</tt> </td><td valign=top ><tt>&amp;lexical</tt> <i>exception</i></td></tr>
<tr><td valign=top ></td><td valign=top >in excluded range</td></tr>
<tr><td valign=top ><tt>&quot;A</tt></td></tr>
<tr><td valign=top ><tt>bc&quot;</tt> </td><td valign=top >U+0041, U+000A, U+0062, U+0063</td></tr>
<tr><td valign=top ></td><td valign=top >if no space occurs after the <tt>A</tt>
</td></tr></table>
<p>
</p>
<a name="node_sec_4.2.8"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.2.8">4.2.8&nbsp;&nbsp;Numbers</a></h3>
<p></p>
<p>
The syntax of external representations for number objects is described
formally by the &lt;number&gt; rule in the formal grammar.
Case is not significant in external representations of number objects.</p>
<p>
A representation of a number object may be written in binary, octal, decimal, or
hexadecimal by the use of a radix prefix.  The radix prefixes are <tt>#b</tt><a name="node_idx_160"></a>(binary), <tt>#o</tt><a name="node_idx_162"></a>(octal), <tt>#d</tt><a name="node_idx_164"></a>(decimal), and <tt>#x</tt><a name="node_idx_166"></a>(hexadecimal).  With
no radix prefix, a representation of a number object is assumed to be expressed in decimal.</p>
<p>
A representation of a number object may be specified to be either exact or
inexact by a prefix.  The prefixes are <tt>#e</tt><a name="node_idx_168"></a>for exact, and <tt>#i</tt><a name="node_idx_170"></a>for inexact.  An exactness
prefix may appear before or after any radix prefix that is used.  If
the representation of a number object has no exactness prefix, the
constant is
inexact if it contains a decimal point, an
exponent, or
a nonempty mantissa width;
otherwise it is exact.</p>
<p>
In systems with inexact number objects
of varying precisions, it may be useful to specify
the precision of a constant.  For this purpose, representations of
number objects
may be written with an exponent marker that indicates the
desired precision of the inexact
representation.  The letters <tt>s</tt>, <tt>f</tt>,
<tt>d</tt>, and <tt>l</tt> specify the use of <i>short</i>, <i>single</i>,
<i>double</i>, and <i>long</i> precision, respectively.  (When fewer
than four internal
inexact
representations exist, the four size
specifications are mapped onto those available.  For example, an
implementation with two internal representations may map short and
single together and long and double together.)  In addition, the
exponent marker <tt>e</tt> specifies the default precision for the
implementation.  The default precision has at least as much precision
as <i>double</i>, but
implementations may wish to allow this default to be set by the user.</p>
<p>
</p>

<tt>3.1415926535898F0&nbsp;
<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Round&nbsp;to&nbsp;single,&nbsp;perhaps&nbsp;3.141593</p>

<p class=nopadding>0.6L0</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extend&nbsp;to&nbsp;long,&nbsp;perhaps&nbsp;.600000000000000</p>
<p></tt></p>
<p>
A representation of a number object with nonempty mantissa width,
<tt><i>x</i>|<i>p</i></tt>, represents the best binary
floating-point approximation of <i>x</i> using a <i>p</i>-bit significand. 
For example, <tt>1.1|53</tt> is a
representation of the best approximation of 1.1 in IEEE double
precision.
If <i>x</i> is an external representation of an inexact real number object
that contains no vertical bar, then its numerical value should be computed
as though it had a mantissa width of 53 or more.</p>
<p>
Implementations that use binary floating-point representations
of real number objects should represent <tt><i>x</i>|<i>p</i></tt>
using a <i>p</i>-bit significand if practical, or by a greater
precision if a <i>p</i>-bit significand is not practical, or
by the largest available precision if <i>p</i> or more bits
of significand are not practical within the implementation.</p>
<p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
The precision of a significand should not be confused with the
number of bits used to represent the significand.  In the IEEE
floating-point standards, for example, the significand's most
significant bit is implicit in single and double precision but
is explicit in extended precision.  Whether that bit is implicit
or explicit does not affect the mathematical precision.
In implementations that use binary floating point, the default
precision can be calculated by calling the following procedure:<p>
</p>

<tt>(define&nbsp;(precision)
<p class=nopadding>&nbsp;&nbsp;(do&nbsp;((n&nbsp;0&nbsp;(+&nbsp;n&nbsp;1))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(x&nbsp;1.0&nbsp;(/&nbsp;x&nbsp;2.0)))</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;&nbsp;((=&nbsp;1.0&nbsp;(+&nbsp;1.0&nbsp;x))&nbsp;n)))</p>

<p class=nopadding></p>
<p></tt>
</p>
</blockquote>      <p>
</p>
<blockquote><em>Note:<span style="margin-left: .5em">&zwnj;</span></em>
When the underlying floating-point representation is IEEE double
precision, the <tt>|<i>p</i></tt> suffix should not always be omitted:
Denormalized floating-point numbers have diminished precision,
and therefore their external representations should
carry a <tt>|<i>p</i></tt> suffix with the actual width of the
significand.
</blockquote><p>
The literals <tt>+inf.0</tt> and <tt>-inf.0</tt> represent positive and
negative infinity, respectively.  The <tt>+nan.0</tt>
literal represents the NaN that is the result of <tt>(/ 0.0 0.0)</tt>,
and may represent other NaNs as well.</p>
<p>
If <i>x</i> is an external representation of an inexact real number
object and
contains no vertical bar and no exponent marker
other than <tt>e</tt>, the inexact real number object it represents is a flonum
(see library section&nbsp;on &ldquo;Flonums&rdquo;).
Some or all of the other external representations of
inexact real number objects may also represent flonums, but that is not required by
this report.</p>
<p>
</p>
<a name="node_sec_4.3"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.3">4.3&nbsp;&nbsp;Datum syntax</a></h2>
<p></p>
<p>
The datum syntax describes the syntax of
syntactic data<a name="node_idx_172"></a>in terms of a sequence of
&lt;lexeme&gt;s, as defined in the lexical syntax.</p>
<p>
Syntactic data include the lexeme data described in the
previous section as well as the following constructs for forming
compound data:
</p>
<ul>
<li><p>pairs and lists, enclosed by <code class=verbatim>( )</code> or <code class=verbatim>[ ]</code> (see
section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.3.2">4.3.2</a>)
</p>
<li><p>vectors (see section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.3.3">4.3.3</a>)
</p>
<li><p>bytevectors (see section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.3.4">4.3.4</a>)
</p>
</ul><p></p>
<p>
</p>
<a name="node_sec_4.3.1"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.3.1">4.3.1&nbsp;&nbsp;Formal account</a></h3>
<p></p>
<p>
The following grammar describes the syntax of syntactic data in terms
of various kinds of lexemes defined in the grammar in
section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.2">4.2</a>:</p>
<p>
</p>
<tt>&lt;datum&gt; &rarr; &lt;lexeme datum&gt;
<p class=nopadding><span style="margin-left: 2em">&zwnj;</span>  &#x2223; &lt;compound datum&gt;</p>

<p class=nopadding>&lt;lexeme datum&gt; &rarr; &lt;boolean&gt; &#x2223; &lt;number&gt;</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;  &#x2223; &lt;character&gt; &#x2223; &lt;string&gt; &#x2223;  &lt;symbol&gt;</p>

<p class=nopadding>&lt;symbol&gt; &rarr; &lt;identifier&gt;</p>

<p class=nopadding>&lt;compound datum&gt; &rarr; &lt;list&gt; &#x2223; &lt;vector&gt; &#x2223; &lt;bytevector&gt;</p>

<p class=nopadding>&lt;list&gt; &rarr; (&lt;datum&gt;*) &#x2223; [&lt;datum&gt;*]</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;    &#x2223; (&lt;datum&gt;<sup>+</sup> . &lt;datum&gt;) &#x2223; [&lt;datum&gt;<sup>+</sup> . &lt;datum&gt;]</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;    &#x2223; &lt;abbreviation&gt;</p>

<p class=nopadding>&lt;abbreviation&gt; &rarr; &lt;abbrev prefix&gt; &lt;datum&gt;</p>

<p class=nopadding>&lt;abbrev prefix&gt; &rarr; ' &#x2223; ` &#x2223; , &#x2223; ,@</p>

<p class=nopadding>&nbsp;&nbsp;&nbsp;    &#x2223; #' | #` | #, | #,@</p>

<p class=nopadding>&lt;vector&gt; &rarr; #(&lt;datum&gt;*)</p>

<p class=nopadding>&lt;bytevector&gt; &rarr; #vu8(&lt;u8&gt;*)</p>

<p class=nopadding>&lt;u8&gt; &rarr; &lang;any &lt;number&gt; representing an exact</p>

<p class=nopadding> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 1em">&zwnj;</span><span style="margin-left: 1em">&zwnj;</span>integer in {0, <tt>...</tt>, 255}&rang;</p>
</tt><p>
</p>
<a name="node_sec_4.3.2"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.3.2">4.3.2&nbsp;&nbsp;Pairs and lists</a></h3>
<p></p>
<p>
List and pair data, representing pairs and lists of values
(see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.9">11.9</a>) are represented using parentheses or brackets.
Matching pairs of brackets that occur in the rules of &lt;list&gt; are
equivalent to matching pairs of parentheses.</p>
<p>
The most general notation for Scheme pairs as syntactic data is
the &ldquo;dotted&rdquo; notation <tt>(&lt;datum<sub>1</sub>&gt; . &lt;datum<sub>2</sub>&gt;)</tt> where
&lt;datum<sub>1</sub>&gt; is the representation of the value of the car field and
&lt;datum<sub>2</sub>&gt; is the representation of the value of the
cdr field.  For example <tt>(4 . 5)</tt> is a pair whose car is 4 and whose
cdr is 5.</p>
<p>
A more streamlined notation can be used for lists: the elements of the
list are simply enclosed in parentheses and separated by spaces.  The
empty list<a name="node_idx_174"></a>is represented by <tt>()</tt> .  For example,</p>
<p>
</p>

<tt>(a&nbsp;b&nbsp;c&nbsp;d&nbsp;e)<p></tt></p>
<p>
and</p>
<p>
</p>

<tt>(a&nbsp;.&nbsp;(b&nbsp;.&nbsp;(c&nbsp;.&nbsp;(d&nbsp;.&nbsp;(e&nbsp;.&nbsp;())))))<p></tt></p>
<p>
are equivalent notations for a list of symbols.</p>
<p>
The general rule is that, if a dot is followed by an open parenthesis,
the dot, open parenthesis, and matching closing parenthesis
can be omitted in the external representation.</p>
<p>
The sequence of characters &ldquo;<tt>(4 . 5)</tt>&rdquo; is the external representation of a
pair, not an expression that evaluates to a pair.
Similarly, the sequence of characters &ldquo;<tt>(+ 2 6)</tt>&rdquo; is <em>not</em> an
external representation of the integer 8, even though it <em>is</em> an
expression (in the language of the <tt>(rnrs base (6))</tt> library)
evaluating to the integer 8; rather, it is a
syntactic datum representing a three-element list, the elements of which
are the symbol <tt>+</tt> and the integers 2 and 6.</p>
<p>
</p>
<a name="node_sec_4.3.3"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.3.3">4.3.3&nbsp;&nbsp;Vectors</a></h3>
<p></p>
<p>
Vector data, representing vectors of objects (see
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.13">11.13</a>), are represented using the notation
<tt>#(&lt;datum&gt; <tt>...</tt>)</tt>.  For example, a vector of length 3
containing the number object for zero in element 0, the list <tt>(2 2 2 2)</tt> in
element 1, and the string <tt>&quot;Anna&quot;</tt> in element 2 can be represented as
follows:</p>
<p>
</p>

<tt>#(0&nbsp;(2&nbsp;2&nbsp;2&nbsp;2)&nbsp;&quot;Anna&quot;)<p></tt></p>
<p>
This is the external representation of a vector, not an
expression that evaluates to a vector.</p>
<p>
</p>
<a name="node_sec_4.3.4"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.3.4">4.3.4&nbsp;&nbsp;Bytevectors</a></h3>
<p></p>
<p>
Bytevector data, representing bytevectors (see
library chapter&nbsp;on &ldquo;Bytevectors&rdquo;), are represented using the notation
<tt>#vu8(&lt;u8&gt; <tt>...</tt>)</tt>, where the &lt;u8&gt;s represent the octets of
the bytevector.  For example, a bytevector of length 3 containing the
octets 2, 24, and 123 can be represented as follows:</p>
<p>
</p>

<tt>#vu8(2&nbsp;24&nbsp;123)<p></tt></p>
<p>
This is the external representation of a bytevector, and also an
expression that evaluates to a bytevector.</p>
<p>
</p>
<a name="node_sec_4.3.5"></a>
<h3 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_4.3.5">4.3.5&nbsp;&nbsp;Abbreviations</a></h3>
<p><div style="height: -9.0pt"></div>
<p style="margin-top: 0pt; margin-bottom: 0pt"></p>
<p>
</p>
<p></p>
<div align=left><tt><tt>'</tt>&lt;datum&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>&nbsp;</div>

<div align=left><tt><tt>`</tt>&lt;datum&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>&nbsp;</div>

<div align=left><tt>,&lt;datum&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>&nbsp;</div>

<div align=left><tt>,<tt>@</tt>&lt;datum&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>&nbsp;</div>

<div align=left><tt>#'&lt;datum&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>&nbsp;</div>

<div align=left><tt>#<tt>`</tt>&lt;datum&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>&nbsp;</div>

<div align=left><tt>#,&lt;datum&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>&nbsp;</div>

<div align=left><tt>#,@&lt;datum&gt;</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>&nbsp;</div>
<p>
Each of these is an abbreviation:
<br>
<span style="margin-left: 1em">&zwnj;</span><a name="node_idx_176"></a><tt>'</tt>&lt;datum&gt;
for <tt>(quote &lt;datum&gt;)</tt>,
<br>
<span style="margin-left: 1em">&zwnj;</span><a name="node_idx_178"></a><tt>`</tt>&lt;datum&gt;
for <tt>(quasiquote &lt;datum&gt;)</tt>,
<br>
<span style="margin-left: 1em">&zwnj;</span><a name="node_idx_180"></a><tt>,</tt>&lt;datum&gt;
for <tt>(unquote &lt;datum&gt;)</tt>,
<br>
<span style="margin-left: 1em">&zwnj;</span><a name="node_idx_182"></a><tt>,</tt><tt>@</tt>&lt;datum&gt;
for <tt>(unquote-splicing &lt;datum&gt;)</tt>,
<br>
<span style="margin-left: 1em">&zwnj;</span><a name="node_idx_184"></a><tt>#'</tt>&lt;datum&gt;
for <tt>(syntax &lt;datum&gt;)</tt>,
<br>
<span style="margin-left: 1em">&zwnj;</span><a name="node_idx_186"></a><tt>#`</tt>&lt;datum&gt;
for <tt>(quasisyntax &lt;datum&gt;)</tt>,
<br>
<span style="margin-left: 1em">&zwnj;</span><a name="node_idx_188"></a><tt>#,</tt>&lt;datum&gt;
for <tt>(unsyntax &lt;datum&gt;)</tt>, and
<br>
<span style="margin-left: 1em">&zwnj;</span><a name="node_idx_190"></a><tt>#,@</tt>&lt;datum&gt;
for <tt>(unsyntax-splicing &lt;datum&gt;)</tt>.
</p>
<p></p>
<p>
     </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-7.html">previous</a></span><span>, <a href="r6rs-Z-H-9.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
<p></p>
<a name="node_chap_5"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_5">Chapter 5</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_5">Semantic concepts</a></h1>
<p></p>
<p>
</p>
<a name="node_sec_5.1"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.1">5.1&nbsp;&nbsp;Programs and libraries</a></h2>
<p>A Scheme program consists of a <i>top-level program<a name="node_idx_192"></a></i>
together with a set of <i>libraries<a name="node_idx_194"></a></i>, each
of which defines a part of the program connected to the others through
explicitly specified exports and imports.  A library consists of a set
of export and import specifications and a body, which consists of
definitions, and expressions.
A top-level program is similar to a library, but
has no export specifications.
Chapters&nbsp;<a href="r6rs-Z-H-10.html#node_chap_7">7</a> and <a href="r6rs-Z-H-11.html#node_chap_8">8</a>
describe the syntax and semantics of libraries and top-level programs,
respectively. 
Chapter&nbsp;<a href="r6rs-Z-H-14.html#node_chap_11">11</a> describes a base
library that defines many of the constructs traditionally associated with
Scheme.
A separate report&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_24">24</a>]
describes the various <i>standard libraries</i><a name="node_idx_196"></a>provided by a Scheme system.</p>
<p>
The division between the base library and the other standard libraries is
based on use, not on construction.  In particular, some facilities
that are typically implemented as &ldquo;primitives&rdquo; by a compiler or the
run-time system rather than in terms of other standard procedures
or syntactic forms are not part of the base library, but are defined in
separate libraries.  Examples include the fixnums and flonums libraries,
the exceptions and conditions libraries, and the libraries for
records.</p>
<p>
</p>
<a name="node_sec_5.2"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.2">5.2&nbsp;&nbsp;Variables, keywords, and regions</a></h2>
<p>
</p>
<p>
Within the body of a library or top-level program,
an identifier<a name="node_idx_198"></a>may name a kind of syntax, or it may name
a location where a value can be stored.  An identifier that names a kind
of syntax is called a <em>keyword</em><a name="node_idx_200"></a>, or <em>syntactic keyword</em><a name="node_idx_202"></a>,
and is said to be <em>bound</em> to that kind of syntax (or, in the case of a
syntactic abstraction, a <em>transformer</em> that translates the syntax into more
primitive forms; see section&nbsp;<a href="r6rs-Z-H-12.html#node_sec_9.2">9.2</a>).  An identifier that names a
location is called a <em>variable</em><a name="node_idx_204"></a>and is said to be
<em>bound</em> to that location.  
At each point within a top-level program or a library, a specific, fixed set
of identifiers is bound.  The set of these identifiers, the set of <i>visible
bindings</i><a name="node_idx_206"></a>, is
known as the <em>environment</em> in effect at that point.</p>
<p>
Certain forms are used to create syntactic abstractions
and to bind keywords to transformers for those new syntactic abstractions, while other
forms create new locations and bind variables to those
locations.  Collectively, these forms are called <em>binding
constructs</em>.<a name="node_idx_208"></a>Some binding constructs take the form of
<i>definitions</i><a name="node_idx_210"></a>, while others are
expressions.
With the exception of exported library bindings, a binding created
by a definition is visible only within the body in which the
definition appears, e.g., the body of a library, top-level program,
or <tt>lambda</tt> expression.
Exported library bindings are also visible within the bodies of
the libraries and top-level programs that import them (see
chapter&nbsp;<a href="r6rs-Z-H-10.html#node_chap_7">7</a>).</p>
<p>
Expressions that bind variables include the <tt>lambda</tt>,
<tt>let</tt>, <tt>let*</tt>, <tt>letrec</tt>, <tt>letrec*</tt>, <tt>let-values</tt>,
and <tt>let*-values</tt> forms from the base library (see
sections&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.4.2">11.4.2</a>, <a href="r6rs-Z-H-14.html#node_sec_11.4.6">11.4.6</a>).
Of these, <tt>lambda</tt> is the most fundamental.
Variable definitions appearing within the body of 
such an expression, or within the bodies of a library or top-level
program, are treated as a set of
<tt>letrec*</tt> bindings.
In addition, for library bodies, 
the variables exported from the library can be referenced by
importing libraries and top-level programs.</p>
<p>
Expressions that bind keywords include the <tt>let-syntax</tt> and <tt>letrec-syntax</tt> forms (see
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.18">11.18</a>).  A <tt>define</tt> form (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.2.1">11.2.1</a>) is a
definition that creates a variable binding (see 
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.2">11.2</a>), and a <tt>define-syntax</tt> form is
a definition that creates a keyword binding (see
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.2.2">11.2.2</a>).</p>
<p>
Scheme is a statically scoped language with
block structure.  To each place in a top-level program or library body where an identifier is bound 
there corresponds a <a name="node_idx_212"></a><em>region</em> of code within which
the binding is visible.  The region is determined by the particular
binding construct that establishes the binding; if the binding is
established by a <tt>lambda</tt> expression, for example, then its region
is the entire <tt>lambda</tt> expression.  Every mention of an identifier
refers to the binding of the identifier that establishes the
innermost of the regions containing the use.  If a use of an
identifier appears in a place where none of the surrounding expressions
contains a binding for the identifier, the use may refer to a
binding established by a definition or import at the top of the
enclosing library or top-level program
(see chapter&nbsp;<a href="r6rs-Z-H-10.html#node_chap_7">7</a>).
If there is no binding for the identifier,
it is said to be <a name="node_idx_214"></a><em>unbound</em>.<a name="node_idx_216"></a></p>
<p>
</p>
<a name="node_sec_5.3"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.3">5.3&nbsp;&nbsp;Exceptional situations</a></h2>
<p></p>
<p>
<a name="node_idx_218"></a>A variety of exceptional situations
are distinguished in this report, among them violations of syntax,
violations of a procedure's specification, violations of
implementation restrictions, and exceptional situations in the
environment.  When an exceptional situation is detected by the
implementation, an <i>exception is raised</i><a name="node_idx_220"></a>,
which means that a special procedure called the <i>current
exception handler</i> is called.  A program can also raise an
exception, and override the current exception handler; see
library section&nbsp;on &ldquo;Exceptions&rdquo;.</p>
<p>
When an exception is raised, an object is provided that
describes the nature of the exceptional situation.  The report uses
the condition system described in library section&nbsp;on &ldquo;Conditions&rdquo; to
describe exceptional situations, classifying them by condition types.</p>
<p>
Some exceptional situations allow continuing the program if the
exception handler takes appropriate action.  The corresponding
exceptions are called <i>continuable</i><a name="node_idx_222"></a>.
For most of the exceptional situations described in this report,
portable programs cannot rely upon the exception being continuable
at the place where the situation was detected.
For those exceptions, the exception handler that is invoked by the
exception should not return.
In some cases, however, continuing is permissible, and the
handler may return.  See library section&nbsp;on &ldquo;Exceptions&rdquo;.</p>
<p>
Implementations must raise an exception
when they are unable to continue correct execution
of a correct program due to some <a name="node_idx_224"></a><em>implementation restriction</em>.  For
example, an implementation that does not support infinities
must raise an exception with condition type
<tt>&amp;implementation-restriction</tt> when it evaluates an expression
whose result would be an infinity.</p>
<p>
Some possible implementation restrictions such as the lack of
representations for NaNs and infinities (see
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.7.2">11.7.2</a>) are anticipated by this report,
and implementations typically must raise an exception of the
appropriate condition type if they encounter such a situation.</p>
<p>
This report uses the phrase &ldquo;an exception is raised&rdquo; synonymously
with &ldquo;an exception must be raised&rdquo;.
This report uses the phrase &ldquo;an exception with condition type <i>t</i>&rdquo;
to indicate that the object provided with the
exception is a condition object of the specified type.
The phrase &ldquo;a continuable exception is raised&rdquo; indicates an
exceptional situation that permits the exception handler to return.</p>
<p>
</p>
<a name="node_sec_5.4"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.4">5.4&nbsp;&nbsp;Argument checking</a></h2>
<p></p>
<p>
<a name="node_idx_226"></a>Many procedures specified in this report or as part of a
standard library restrict the arguments they accept.
Typically, a procedure accepts only specific numbers and types of arguments.
Many syntactic forms similarly restrict the values to which one or
more of their subforms can evaluate.
These restrictions imply responsibilities<a name="node_idx_228"></a>for
both the programmer and the implementation.
Specifically, the programmer is responsible for ensuring
that the values indeed adhere to the restrictions described
in the specification.  The implementation must check
that the restrictions in the specification are indeed met, to the
extent that it is reasonable, possible, and necessary to allow the
specified operation to complete successfully.  The implementation's
responsibilities are specified in more detail in
chapter&nbsp;<a href="r6rs-Z-H-9.html#node_chap_6">6</a> and throughout the report.</p>
<p>
Note that it is not always possible for an implementation to completely check
the restrictions set forth in a specification.  For example, if an
operation is specified to accept a procedure with specific properties,
checking of these properties is undecidable in general.  Similarly,
some operations accept both lists and procedures that are
called by these operations.  Since lists can be mutated by the procedures
through the <tt>(rnrs mutable-pairs (6))</tt> library (see library
chapter&nbsp;on &ldquo;Mutable pairs&rdquo;), an argument that is a list
when the operation starts may become a non-list during the execution of the operation.
Also, the procedure might escape to a different continuation,
preventing the operation from performing more checks.
Requiring the operation to check that the argument is a list after
each call to such a procedure would be impractical.  Furthermore, some
operations that accept lists only need to traverse these lists
partially to perform their function; requiring the implementation to
traverse the remainder of the list to verify that all specified
restrictions have been met might
violate reasonable performance assumptions.  For these reasons, the
programmer's obligations may exceed the checking obligations of the
implementation.</p>
<p>
When an implementation detects a violation of a restriction for an
argument, it must raise an exception with condition type
<tt>&amp;assertion</tt> in a way consistent with the safety of execution as
described in section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.6">5.6</a>.</p>
<p>
</p>
<a name="node_sec_5.5"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.5">5.5&nbsp;&nbsp;Syntax violations</a></h2>
<p>The subforms of a special form usually need to obey certain syntactic
restrictions.  As forms may be subject to macro expansion, which may
not terminate, the question of whether they obey the specified
restrictions is undecidable in general.</p>
<p>
When macro expansion terminates, however, implementations must detect
violations of the syntax.  A <a name="node_idx_230"></a><em>syntax violation</em> is an error
with respect to the syntax of library bodies, top-level bodies,
or the &ldquo;syntax&rdquo; entries in the
specification of the base library or the standard libraries.
Moreover, attempting to assign to an immutable variable (i.e., the
variables exported by a library; see
section&nbsp;<a href="r6rs-Z-H-10.html#node_sec_7.1">7.1</a>) is also
considered a syntax violation.</p>
<p>
If a top-level or library form in a program is not syntactically
correct, then the implementation must raise an exception with
condition type <tt>&amp;syntax</tt>, and execution of that top-level program
or library must not be allowed to begin.</p>
<p>
</p>
<a name="node_sec_5.6"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.6">5.6&nbsp;&nbsp;Safety</a></h2>
<p></p>
<p>
The standard libraries whose exports are described by this document
are said to be <a name="node_idx_232"></a><em>safe libraries</em>.  Libraries and top-level
programs that import only from safe libraries are also said to be safe.</p>
<p>
As defined by this document, the Scheme programming language
is safe in the following sense:
The execution of a safe top-level program
cannot go so badly wrong as to crash or to continue to
execute while behaving in ways that are
inconsistent with the semantics described in this document,
unless an exception is raised.</p>
<p>
Violations of an implementation restriction must raise an
exception with condition type <tt>&amp;implementation-restriction</tt>,
as must all
violations and errors that would otherwise threaten system
integrity in ways that might result in execution that is
inconsistent with the semantics described in this document.</p>
<p>
The above safety properties are guaranteed only for top-level programs
and libraries that are said to be safe.  In particular,
implementations may provide access to unsafe libraries in ways that
cannot guarantee safety.</p>
<p>
</p>
<a name="node_sec_5.7"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.7">5.7&nbsp;&nbsp;Boolean values</a></h2>
<p></p>
<p>
Although there is a separate boolean type, any Scheme value can be
used as a boolean value for the purpose of a conditional test.  In a
conditional test, all values count as true in such a test except for
<tt>#f</tt>.  This report uses the word &ldquo;true&rdquo; to refer to any
Scheme value except <tt>#f</tt>, and the word &ldquo;false&rdquo; to refer to
<tt>#f</tt>. <a name="node_idx_234"></a><a name="node_idx_236"></a></p>
<p>
</p>
<a name="node_sec_5.8"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.8">5.8&nbsp;&nbsp;Multiple return values</a></h2>
<p></p>
<p>
A Scheme expression can evaluate to an arbitrary finite number of
values.  These values are passed to the expression's continuation.</p>
<p>
Not all continuations accept any number of values. For example, a continuation that
accepts the argument to a procedure call is guaranteed to accept
exactly one value.  The effect of passing some other number of values
to such a continuation is unspecified.  The <tt>call-with-values</tt>
procedure
described in section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.15">11.15</a> makes it possible to create
continuations that accept specified numbers of return values.
If the number of
return values passed to a continuation created by a call to
<tt>call-with-values</tt> is not accepted by its consumer
that was passed in that call, then an exception is raised.
A more complete description of the number of values accepted by
different continuations and the consequences of passing an unexpected
number of values is given in the description of the <tt>values</tt>
procedure in section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.15">11.15</a>.</p>
<p>
A number of forms in the base library have sequences of expressions
as subforms that are evaluated sequentially, with the return values of
all but the last expression being discarded.  The continuations
discarding these values accept any number of values.</p>
<p>
</p>
<a name="node_sec_5.9"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.9">5.9&nbsp;&nbsp;Unspecified behavior</a></h2>
<p>If an expression is said to &ldquo;return unspecified values&rdquo;,
then the expression must evaluate without raising an exception, but
the values returned depend on the implementation; this report
explicitly does not say how many or what values should be returned.
Programmers should not rely on a specific number of return values or
the specific values themselves.
<a name="node_idx_238"></a><a name="node_idx_240"></a></p>
<p>
</p>
<a name="node_sec_5.10"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.10">5.10&nbsp;&nbsp;Storage model</a></h2>
<p></p>
<p>
Variables and objects such as pairs, vectors, bytevectors, strings,
hashtables, and records implicitly
refer to locations<a name="node_idx_242"></a>or sequences of locations.  A string, for
example, contains as many locations as there are characters in the string. 
(These locations need not correspond to a full machine word.) A new value may be
stored into one of these locations using the <tt>string-set!</tt> procedure, but
the string contains the same locations as before.</p>
<p>
An object fetched from a location, by a variable reference or by
a procedure such as <tt>car</tt>, <tt>vector-ref</tt>, or <tt>string-ref</tt>, is
equivalent in the sense of <tt>eqv?</tt> (section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.5">11.5</a>)
to the object last stored in the location before the fetch.</p>
<p>
Every location is marked to show whether it is in use.
No variable or object ever refers to a location that is not in use.
Whenever this report speaks of storage being allocated for a variable
or object, what is meant is that an appropriate number of locations are
chosen from the set of locations that are not in use, and the chosen
locations are marked to indicate that they are now in use before the variable
or object is made to refer to them.</p>
<p>
It is desirable for constants<a name="node_idx_244"></a>(i.e. the values of
literal expressions) to reside in read-only memory.  To express this,
it is convenient to imagine that every object that refers to locations
is associated with a flag telling whether that object is
mutable<a name="node_idx_246"></a>or immutable<a name="node_idx_248"></a>.  Literal
constants, the strings returned by <tt>symbol-&gt;string</tt>, records with
no mutable fields, and other values explicitly designated as immutable
are immutable objects, while all objects created by the other
procedures listed in this report are mutable.  An attempt to store a
new value into a location referred to by an immutable object
should raise an exception with condition type <tt>&amp;assertion</tt>.</p>
<p>
</p>
<a name="node_sec_5.11"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.11">5.11&nbsp;&nbsp;Proper tail recursion</a></h2>
<p></p>
<p>
Implementations of Scheme must be
<em>properly tail-recursive</em><a name="node_idx_250"></a>.
Procedure calls that occur in certain syntactic
contexts called <i>tail contexts</i><a name="node_idx_252"></a>are <i>tail calls</i><a name="node_idx_254"></a>.  A Scheme implementation is
properly tail-recursive if it supports an unbounded number of active
tail calls.  A call is <em>active</em> if the called procedure may still
return.  Note that this includes regular returns as well as returns
through continuations captured earlier by
<tt>call-with-current-continuation</tt> that are later invoked.
In the absence of captured continuations, calls could
return at most once and the active calls would be those that had not
yet returned.
A formal definition of proper tail recursion can be found
in Clinger's paper&nbsp;[<a href="r6rs-Z-H-21.html#node_bib_5">5</a>].  The rules for identifying tail calls
in constructs from the <tt>(rnrs base (6))</tt> library are described in
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.20">11.20</a>.</p>
<p>
</p>
<a name="node_sec_5.12"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_5.12">5.12&nbsp;&nbsp;Dynamic extent and the dynamic environment</a></h2>
<p></p>
<p>
For a procedure call, the time between when it is initiated and when
it returns is called its <a name="node_idx_256"></a><em>dynamic extent</em>.  In Scheme, <tt>call-with-current-continuation</tt>
(section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.15">11.15</a>) allows reentering a
dynamic extent after its procedure call has returned.  Thus, the
dynamic extent of a call may not be a single, connected time period.</p>
<p>
Some operations described in the report acquire information in
addition to their explicit arguments from the <a name="node_idx_258"></a><em>dynamic
environment</em>.  For example, <tt>call-with-current-continuation</tt>
accesses an implicit context established
by <tt>dynamic-wind</tt> (section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.15">11.15</a>), and the <tt>raise</tt> procedure (library
section&nbsp;on &ldquo;Exceptions&rdquo;) accesses the
current exception handler.  The operations that modify the dynamic
environment do so dynamically, for the dynamic extent of a call to a
procedure like <tt>dynamic-wind</tt> or <tt>with-exception-handler</tt>.
When such a call returns, the previous dynamic environment is
restored.  The dynamic environment can be thought of as part of the
dynamic extent of a call.  Consequently, it is captured by <tt>call-with-current-continuation</tt>, and restored by invoking the escape
procedure it creates.</p>
<p>
   </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-7.html">previous</a></span><span>, <a href="r6rs-Z-H-9.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

Generated from r6rs.tex by tex2page, v 20100828
(running on MzScheme 4.2.4, :unix), 
(c) Dorai Sitaram, 
http://evalwhen.com/tex2page/index.html

-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Revised^6 Report on the Algorithmic Language Scheme
</title>
<link rel="stylesheet" type="text/css" href="r6rs-Z-S.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div id=slidecontent>
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-8.html">previous</a></span><span>, <a href="r6rs-Z-H-10.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
<p></p>
<a name="node_chap_6"></a>
<h1 class=chapter>
<div class=chapterheading><a href="r6rs-Z-H-2.html#node_toc_node_chap_6">Chapter 6</a></div><br>
<a href="r6rs-Z-H-2.html#node_toc_node_chap_6">Entry format</a></h1>
<p></p>
<p>
The chapters that describe bindings in the base library and the standard
libraries are organized
into entries.  Each entry describes one language feature or a group of
related features, where a feature is either a syntactic construct or a
built-in procedure.  An entry begins with one or more header lines of the form</p>
<p>
</p>

<p class=noindent></p>
<div align=left><tt><i>template</i></tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span><i>category</i>&nbsp;</div>
<p>
The <i>category</i> defines the kind of binding described by the entry,
typically either &ldquo;syntax&rdquo; or &ldquo;procedure&rdquo;.
An entry may specify various restrictions on subforms or arguments.
For background on this, see section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.4">5.4</a>.</p>
<p>
</p>
<a name="node_sec_6.1"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_6.1">6.1&nbsp;&nbsp;Syntax entries</a></h2>
<p>If <i>category</i> is &ldquo;syntax&rdquo;, the entry describes a 
special syntactic construct, and the template gives the syntax of the
forms of the construct.  
The template is written in a notation similar to a right-hand
side of the BNF rules in chapter&nbsp;<a href="r6rs-Z-H-7.html#node_chap_4">4</a>, and describes
the set of forms equivalent to the forms matching the
template as syntactic data.  Some &ldquo;syntax&rdquo; entries carry a
suffix (<tt>expand</tt>), specifying that the syntactic keyword of the
construct is exported with level
1.  Otherwise, the syntactic keyword is exported with level 0; see
section&nbsp;<a href="r6rs-Z-H-10.html#node_sec_7.2">7.2</a>.</p>
<p>
Components of the form described by a template are designated
by syntactic variables, which are written using angle brackets, for
example, &lt;expression&gt;, &lt;variable&gt;.  Case is insignificant
in syntactic variables.  Syntactic variables
stand for other forms, or
sequences of them.  A syntactic variable may refer to a non-terminal
in the grammar for syntactic data (see section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.3.1">4.3.1</a>),
in which case only forms matching
that non-terminal are permissible in that position.
For example, &lt;identifier&gt; stands for a form which must be an
identifier.
Also,
&lt;expression&gt; stands for any form which is a
syntactically valid expression.  Other non-terminals that are used in
templates are defined as part of the specification.</p>
<p>
The notation
</p>
<p>
<span style="margin-left: 2em">&zwnj;</span>&lt;thing<sub>1</sub>&gt; <tt>...</tt>
</p>
<p>
indicates zero or more occurrences of a &lt;thing&gt;, and
</p>
<p>
<span style="margin-left: 2em">&zwnj;</span>&lt;thing<sub>1</sub>&gt; &lt;thing<sub>2</sub>&gt; <tt>...</tt>
</p>
<p>
indicates one or more occurrences of a &lt;thing&gt;.</p>
<p>
It is the programmer's responsibility to ensure that each component of
a form has the shape specified by a template.  Descriptions of syntax
may express other restrictions on the components of a form.
Typically, such a restriction is formulated as a phrase of the form
&ldquo;&lt;x&gt; must be<a name="node_idx_260"></a>a <tt>...</tt>&rdquo;.  Again, these
specify the programmer's responsibility.  It is the implementation's
responsibility to check that these restrictions are satisfied, as long
as the macro transformers involved in expanding the form terminate.
If the implementation detects that a component does not meet the
restriction, an exception with condition type <tt>&amp;syntax</tt> is raised.</p>
<p>
</p>
<a name="node_sec_6.2"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_6.2">6.2&nbsp;&nbsp;Procedure entries</a></h2>
<p>If <i>category</i> is &ldquo;procedure&rdquo;, then the entry describes a procedure, and
the header line gives a template for a call to the procedure.  Parameter
names in the template are <i>italicized</i>.  Thus the header line</p>
<p>
</p>

<p class=noindent></p>
<div align=left><tt>(vector-ref <i>vector</i> <i>k</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
indicates that the built-in procedure <tt>vector-ref</tt> takes
two arguments, a vector <i>vector</i> and an exact non-negative integer
object <i>k</i> (see below).  The header lines</p>
<p>
</p>

<p class=noindent></p>
<div align=left><tt>(make-vector <i>k</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>

<div align=left><tt>(make-vector <i>k</i> <i>fill</i>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
indicate that the <tt>make-vector</tt> procedure takes
either one or two arguments.  The parameter names are
case-insensitive: <i>Vector</i> is the same as <i>vector</i>.</p>
<p>
As with syntax templates, an ellipsis <tt>...</tt> at the end of a header
line, as in</p>
<p>
</p>

<p class=noindent></p>
<div align=left><tt>(= <i>z<sub>1</sub></i> <i>z<sub>2</sub></i> <i>z<sub>3</sub></i> <tt>...</tt>)</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>procedure&nbsp;</div>
<p>
indicates that the procedure takes arbitrarily many arguments of the
same type as specified for the last parameter name.  In this case,
<tt>=</tt> accepts two or more arguments that must all be complex
number objects.</p>
<p>

A procedure that detects an argument that it is not specified to
handle must raise an exception with condition type
<tt>&amp;assertion</tt>.  Also, the argument specifications are exhaustive: if the
number of arguments provided in a procedure call does not match 
any number of arguments accepted by the procedure, an exception with
condition type <tt>&amp;assertion</tt> must be raised.</p>
<p>
For succinctness, the report follows the convention
that if a parameter name is also the name of a type, then the corresponding argument must be of the named type.
For example, the header line for <tt>vector-ref</tt> given above dictates that the
first argument to <tt>vector-ref</tt> must be a vector.  The following naming
conventions imply type restrictions:</p>
<p>
</p>
<table border=0><tr><td valign=top ><i>obj</i></td><td valign=top >any object</td></tr>
<tr><td valign=top ><i>z</i></td><td valign=top >complex number object</td></tr>
<tr><td valign=top ><i>x</i></td><td valign=top >real number object</td></tr>
<tr><td valign=top ><i>y</i></td><td valign=top >real number object</td></tr>
<tr><td valign=top ><i>q</i></td><td valign=top >rational number object</td></tr>
<tr><td valign=top ><i>n</i></td><td valign=top >integer object</td></tr>
<tr><td valign=top ><i>k</i></td><td valign=top >exact non-negative integer object</td></tr>
<tr><td valign=top ><i>bool</i></td><td valign=top >boolean (<tt>#f</tt> or <tt>#t</tt>)</td></tr>
<tr><td valign=top ><i>octet</i></td><td valign=top >exact integer object in {0, <tt>...</tt>, 255}</td></tr>
<tr><td valign=top ><i>byte</i></td><td valign=top >exact integer object in {&minus;128, <tt>...</tt>, 127}</td></tr>
<tr><td valign=top ><i>char</i></td><td valign=top >character (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.11">11.11</a>)</td></tr>
<tr><td valign=top ><i>pair</i></td><td valign=top >pair (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.9">11.9</a>)</td></tr>
<tr><td valign=top ><i>vector</i></td><td valign=top >vector (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.13">11.13</a>)</td></tr>
<tr><td valign=top ><i>string</i></td><td valign=top >string (see section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.12">11.12</a>)</td></tr>
<tr><td valign=top ><i>condition</i></td><td valign=top >condition (see library section&nbsp;on &ldquo;Conditions&rdquo;)</td></tr>
<tr><td valign=top ><i>bytevector</i></td><td valign=top >bytevector (see library chapter&nbsp;on &ldquo;Bytevectors&rdquo;)</td></tr>
<tr><td valign=top ><i>proc</i></td><td valign=top >procedure (see section&nbsp;<a href="r6rs-Z-H-4.html#node_sec_1.6">1.6</a>)
</td></tr></table>
<p>
Other type restrictions are expressed through parameter-naming
conventions that are described in specific chapters.  For example,
library chapter&nbsp;on &ldquo;Arithmetic&rdquo; uses a number of special
parameter variables for the various subsets of the numbers.</p>
<p>
With the listed type restrictions, it is the programmer's responsibility to
ensure that the corresponding argument is of the specified type.
It is the implementation's responsibility to check for
that type.</p>
<p>
A parameter called <i>list</i> means that it is the
programmer's responsibility to pass an argument that is a list (see
section&nbsp;<a href="r6rs-Z-H-14.html#node_sec_11.9">11.9</a>).  It is the implementation's responsibility
to check that the argument is appropriately structured for the
operation to perform its function, to the extent that this is possible
and reasonable.  The implementation must at least check that the
argument is either an empty list or a pair.</p>
<p>
Descriptions of procedures may express other restrictions on the
arguments of a procedure.  Typically, such a restriction is formulated
as a phrase of the form &ldquo;<i>x</i> must be a <tt>...</tt>&rdquo; (or otherwise
using the word &ldquo;must&rdquo;).</p>
<p>
</p>
<a name="node_sec_6.3"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_6.3">6.3&nbsp;&nbsp;Implementation responsibilities</a></h2>
<p>In addition to the restrictions implied by naming conventions, an
entry may list additional explicit restrictions.
These explicit restrictions usually describe both the
programmer's responsibilities, who must ensure that the subforms of a
form are appropriate, or that an appropriate
argument is passed, and the implementation's responsibilities, which
must check that subform adheres to the specified restrictions (if
macro expansion terminates), or if the argument is appropriate.  A description
may explicitly list the implementation's responsibilities for some
arguments or subforms in a paragraph labeled &ldquo;<i>Implementation
responsibilities</i>&rdquo;.  In this case, the responsibilities specified
for these subforms or arguments in the rest of the description are only for the
programmer.  A paragraph describing implementation responsibility does not
affect the implementation's responsibilities for checking subforms or arguments not
mentioned in the paragraph.</p>
<p>
</p>
<a name="node_sec_6.4"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_6.4">6.4&nbsp;&nbsp;Other kinds of entries</a></h2>
<p>If <i>category</i> is something other than &ldquo;syntax&rdquo; and
&ldquo;procedure&rdquo;, then the entry describes a non-procedural value, and
the <i>category</i> describes the type of that value.  The header line</p>
<p>
</p>

<p class=noindent></p>
<div align=left><tt>&amp;who</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>condition type&nbsp;</div>
<br>
indicates that <tt>&amp;who</tt> is a condition type.  The header line<p>
</p>

<p class=noindent></p>
<div align=left><tt>unquote</tt><span style="margin-left: .5em">&zwnj;</span><span style="margin-left: .5em">&zwnj;</span>auxiliary syntax&nbsp;</div>
<br>
indicates that <tt>unquote</tt> is a syntax binding that may occur
only as part of specific surrounding expressions.  Any use as an
independent syntactic construct or identifier is a syntax violation.
As with &ldquo;syntax&rdquo; entries, some &ldquo;auxiliary syntax&rdquo; entries  carry a
suffix (<tt>expand</tt>), specifying that the syntactic keyword of the
construct is exported with level 1.
<a name="node_sec_6.5"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_6.5">6.5&nbsp;&nbsp;Equivalent entries</a></h2>
<p>The description of an entry occasionally states that it is <i>the
same</i> as another entry.  This means that both entries are
equivalent.  Specifically, it means that if both entries have the same
name and are thus exported from different libraries, the entries from
both libraries can be imported under the same name without conflict.</p>
<p>
</p>
<a name="node_sec_6.6"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_6.6">6.6&nbsp;&nbsp;Evaluation examples</a></h2>
<p>The symbol &ldquo;&rArr;&rdquo; used in program examples can be read
&ldquo;evaluates to&rdquo;.  For example,</p>
<p>
</p>

<tt>(*&nbsp;5&nbsp;8)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;40<p></tt></p>
<p>
means that the expression <tt>(* 5 8)</tt> evaluates to the object <tt>40</tt>.
Or, more precisely:  the expression given by the sequence of characters
&ldquo;<tt>(* 5 8)</tt>&rdquo; evaluates, in an environment that imports the relevant library, to an object
that may be represented externally by the sequence of characters &ldquo;<tt>40</tt>&rdquo;.  See section&nbsp;<a href="r6rs-Z-H-7.html#node_sec_4.3">4.3</a> for a discussion of external
representations of objects.</p>
<p>
The &ldquo;&rArr;&rdquo; symbol is also used when the evaluation of an
expression causes a violation.  For example,</p>
<p>
</p>

<tt>(integer-&gt;char&nbsp;<tt>#</tt>xD800)&nbsp;&nbsp;<tt>&nbsp;&amp;assertion</tt>&nbsp;<i>exception</i><p></tt>
means that the evaluation of the expression <tt>(integer-&gt;char
<tt>#</tt>xD800)</tt> must raise an exception with condition type
<tt>&amp;assertion</tt>.</p>
<p>
Moreover, the &ldquo;&rArr;&rdquo; symbol is also used to explicitly say that
the value of an expression in unspecified.  For example:
</p>

<tt>(eqv?&nbsp;&quot;&quot;&nbsp;&quot;&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;&nbsp;<i>unspecified</i><p></tt></p>
<p>
Mostly, examples merely illustrate the behavior specified in the
entry.  In some cases, however, they disambiguate otherwise ambiguous
specifications and are thus normative.  Note that, in some cases,
specifically in the case of inexact number objects, the return value is only
specified conditionally or approximately.  For example:
</p>

<tt>(atan&nbsp;-inf.0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><span style="margin-left: 2em">&zwnj;</span><span style="margin-left: 2em">&zwnj;</span>&rArr;&nbsp;-1.5707963267948965&nbsp;;&nbsp;approximately<p></tt></p>
<p>
</p>
<a name="node_sec_6.7"></a>
<h2 class=section><a href="r6rs-Z-H-2.html#node_toc_node_sec_6.7">6.7&nbsp;&nbsp;Naming conventions</a></h2>
<p>By convention, the names of procedures that store values into previously
allocated locations (see section&nbsp;<a href="r6rs-Z-H-8.html#node_sec_5.10">5.10</a>) usually end in
&ldquo;<tt>!</tt>&rdquo;.</p>
<p>
By convention, &ldquo;<tt>-&gt;</tt>&rdquo; appears within the names of procedures that
take an object of one type and return an analogous object of another type.
For example, <tt>list-&gt;vector</tt> takes a list and returns a vector whose
elements are the same as those of the list.</p>
<p>
By convention, the names of predicates&mdash;procedures that always return
a boolean value&mdash;end in &ldquo;<tt>?</tt>&rdquo; when the name contains any
letters; otherwise, the predicate's name does not end with a question
mark.</p>
<p>
By convention, the components of compound names are separated by &ldquo;<tt>-</tt>&rdquo;
In particular, prefixes that are actual words or can be pronounced as
though they were actual words are followed by a hyphen, except when
the first character following the hyphen would be something other than
a letter, in which case the hyphen is omitted.  Short,
unpronounceable prefixes (&ldquo;<tt>fx</tt>&rdquo; and &ldquo;<tt>fl</tt>&rdquo;) are not
followed by a hyphen.</p>
<p>
By convention, the names of condition types start with
&ldquo;<tt>&amp;</tt>&rdquo;<a name="node_idx_262"></a>.</p>
<p>
 </p>
<p></p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
<div align=right class=navigation>[Go to <span><a href="r6rs.html">first</a>, <a href="r6rs-Z-H-8.html">previous</a></span><span>, <a href="r6rs-Z-H-10.html">next</a></span> page<span>; &nbsp;&nbsp;</span><span><a href="r6rs-Z-H-2.html#node_toc_start">contents</a></span><span><span>; &nbsp;&nbsp;</span><a href="r6rs-Z-H-21.html#node_index_start">index</a></span>]</div>
</p>
<p></p>
</div>
</body>
</html>
